

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>scipy.spatial.KDTree &mdash; SciPy v0.12 Reference Guide (DRAFT)</title>
    
    <link rel="stylesheet" href="../_static/scipy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.12.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="SciPy v0.12 Reference Guide (DRAFT)" href="../index.html" />
    <link rel="up" title="Spatial algorithms and data structures (scipy.spatial)" href="../spatial.html" />
    <link rel="next" title="scipy.spatial.KDTree.count_neighbors" href="scipy.spatial.KDTree.count_neighbors.html" />
    <link rel="prev" title="scipy.spatial.distance.yule" href="scipy.spatial.distance.yule.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="scipy.spatial.KDTree.count_neighbors.html" title="scipy.spatial.KDTree.count_neighbors"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="scipy.spatial.distance.yule.html" title="scipy.spatial.distance.yule"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">SciPy v0.12 Reference Guide (DRAFT)</a> &raquo;</li>
          <li><a href="../spatial.html" accesskey="U">Spatial algorithms and data structures (<tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">scipy.spatial</span></tt>)</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="scipy-spatial-kdtree">
<h1>scipy.spatial.KDTree<a class="headerlink" href="#scipy-spatial-kdtree" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="scipy.spatial.KDTree">
<em class="property">class </em><tt class="descclassname">scipy.spatial.</tt><tt class="descname">KDTree</tt><big>(</big><em>data</em>, <em>leafsize=10</em><big>)</big><a class="reference external" href="http://github.com/scipy/scipy/blob/v0.12.0/scipy/spatial/kdtree.py#L172"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scipy.spatial.KDTree" title="Permalink to this definition">¶</a></dt>
<dd><p>kd-tree for quick nearest-neighbor lookup</p>
<p>This class provides an index into a set of k-dimensional points which
can be used to rapidly look up the nearest neighbors of any point.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><p class="first"><strong>data</strong> : (N,K) array_like</p>
<blockquote>
<div><p>The data points to be indexed. This array is not copied, and
so modifying this data will result in bogus results.</p>
</div></blockquote>
<p><strong>leafsize</strong> : int, optional</p>
<blockquote>
<div><p>The number of points at which the algorithm switches over to
brute-force.  Has to be positive.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><p class="first"><strong>RuntimeError</strong> :</p>
<blockquote class="last">
<div><p>The maximum recursion limit can be exceeded for large data
sets.  If this happens, either increase the value for the <em class="xref py py-obj">leafsize</em>
parameter or increase the recursion limit by:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">setrecursionlimit</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The algorithm used is described in Maneewongvatana and Mount 1999.
The general idea is that the kd-tree is a binary tree, each of whose
nodes represents an axis-aligned hyperrectangle. Each node specifies
an axis and splits the set of points based on whether their coordinate
along that axis is greater than or less than a particular value.</p>
<p>During construction, the axis and splitting point are chosen by the
&#8220;sliding midpoint&#8221; rule, which ensures that the cells do not all
become long and thin.</p>
<p>The tree can be queried for the r closest neighbors of any given point
(optionally returning only those within some maximum distance of the
point). It can also be queried, with a substantial gain in efficiency,
for the r approximate closest neighbors.</p>
<p>For large dimensions (20 is already large) do not expect this to run
significantly faster than brute force. High-dimensional nearest-neighbor
queries are a substantial open problem in computer science.</p>
<p>The tree also supports all-neighbors queries, both with arrays of points
and with other kd-trees. These do use a reasonably efficient algorithm,
but the kd-tree is not necessarily the best data structure for this
sort of calculation.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="scipy.spatial.KDTree.count_neighbors.html#scipy.spatial.KDTree.count_neighbors" title="scipy.spatial.KDTree.count_neighbors"><tt class="xref py py-obj docutils literal"><span class="pre">count_neighbors</span></tt></a>(other,&nbsp;r[,&nbsp;p])</td>
<td>Count how many nearby pairs can be formed.</td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">innernode</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">leafnode</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">node</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="scipy.spatial.KDTree.query.html#scipy.spatial.KDTree.query" title="scipy.spatial.KDTree.query"><tt class="xref py py-obj docutils literal"><span class="pre">query</span></tt></a>(x[,&nbsp;k,&nbsp;eps,&nbsp;p,&nbsp;distance_upper_bound])</td>
<td>Query the kd-tree for nearest neighbors</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="scipy.spatial.KDTree.query_ball_point.html#scipy.spatial.KDTree.query_ball_point" title="scipy.spatial.KDTree.query_ball_point"><tt class="xref py py-obj docutils literal"><span class="pre">query_ball_point</span></tt></a>(x,&nbsp;r[,&nbsp;p,&nbsp;eps])</td>
<td>Find all points within distance r of point(s) x.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="scipy.spatial.KDTree.query_ball_tree.html#scipy.spatial.KDTree.query_ball_tree" title="scipy.spatial.KDTree.query_ball_tree"><tt class="xref py py-obj docutils literal"><span class="pre">query_ball_tree</span></tt></a>(other,&nbsp;r[,&nbsp;p,&nbsp;eps])</td>
<td>Find all pairs of points whose distance is at most r</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="scipy.spatial.KDTree.query_pairs.html#scipy.spatial.KDTree.query_pairs" title="scipy.spatial.KDTree.query_pairs"><tt class="xref py py-obj docutils literal"><span class="pre">query_pairs</span></tt></a>(r[,&nbsp;p,&nbsp;eps])</td>
<td>Find all pairs of points within a distance.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="scipy.spatial.KDTree.sparse_distance_matrix.html#scipy.spatial.KDTree.sparse_distance_matrix" title="scipy.spatial.KDTree.sparse_distance_matrix"><tt class="xref py py-obj docutils literal"><span class="pre">sparse_distance_matrix</span></tt></a>(other,&nbsp;max_distance)</td>
<td>Compute a sparse distance matrix</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/scipyshiny_small.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="scipy.spatial.distance.yule.html"
                        title="previous chapter">scipy.spatial.distance.yule</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="scipy.spatial.KDTree.count_neighbors.html"
                        title="next chapter">scipy.spatial.KDTree.count_neighbors</a></p>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="scipy.spatial.KDTree.count_neighbors.html" title="scipy.spatial.KDTree.count_neighbors"
             >next</a> |</li>
        <li class="right" >
          <a href="scipy.spatial.distance.yule.html" title="scipy.spatial.distance.yule"
             >previous</a> |</li>
        <li><a href="../index.html">SciPy v0.12 Reference Guide (DRAFT)</a> &raquo;</li>
          <li><a href="../spatial.html" >Spatial algorithms and data structures (<tt class="docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal docutils literal"><span class="pre">scipy.spatial</span></tt>)</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2009, The Scipy community.
      Last updated on May 01, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>