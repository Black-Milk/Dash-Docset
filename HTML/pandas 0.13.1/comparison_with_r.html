

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Comparison with R / R libraries &mdash; pandas 0.13.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.13.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pandas 0.13.1 documentation" href="index.html" />
    <link rel="next" title="Comparison with SQL" href="comparison_with_sql.html" />
    <link rel="prev" title="Pandas Ecosystem" href="ecosystem.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="comparison_with_sql.html" title="Comparison with SQL"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ecosystem.html" title="Pandas Ecosystem"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pandas 0.13.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
<div class="content-wrapper">
    <div class="content">
        <div class="document">
            <div class="sphinxsidebar">
                <h3>Table Of Contents</h3>
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">What&#8217;s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Package overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="10min.html">10 Minutes to Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsintro.html">Intro to Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Essential Basic Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and Selecting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="computation.html">Computational tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_data.html">Working with missing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupby.html">Group By: split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging.html">Merge, join, and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshaping.html">Reshaping and Pivot Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseries.html">Time Series / Date functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Plotting with matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="rplot.html">Trellis plotting interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">IO Tools (Text, CSV, HDF5, ...)</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_data.html">Remote Data Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="enhancingperf.html">Enhancing Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Sparse data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Caveats and Gotchas</a></li>
<li class="toctree-l1"><a class="reference internal" href="r_interface.html">rpy2 / R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="ecosystem.html">Pandas Ecosystem</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Comparison with R / R libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#base-r">Base R</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#aggregate"><tt class="docutils literal"><span class="pre">aggregate</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#match"><tt class="docutils literal"><span class="pre">match</span></tt> / <tt class="docutils literal"><span class="pre">%in%</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tapply"><tt class="docutils literal"><span class="pre">tapply</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#subset"><tt class="docutils literal"><span class="pre">subset</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#with"><tt class="docutils literal"><span class="pre">with</span></tt></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#zoo">zoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="#xts">xts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plyr">plyr</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ddply"><tt class="docutils literal"><span class="pre">ddply</span></tt></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reshape-reshape2">reshape / reshape2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#meltarray"><tt class="docutils literal"><span class="pre">melt.array</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#meltlist"><tt class="docutils literal"><span class="pre">melt.list</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#meltdf"><tt class="docutils literal"><span class="pre">melt.data.frame</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#cast"><tt class="docutils literal"><span class="pre">cast</span></tt></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_sql.html">Comparison with SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Notes</a></li>
</ul>

                <h3 style="margin-top: 1.5em;">Search</h3>

                <form class="search" action="search.html" method="get">
                    <input type="text" name="q" size="18"/>
                    <input type="submit" value="Go"/>
                    <input type="hidden" name="check_keywords" value="yes"/>
                    <input type="hidden" name="area" value="default"/>
                </form>
                <p class="searchtip" style="font-size: 90%">
                    Enter search terms or a module, class or function name.
                </p>

                <p>

                <p>
                    <script type="text/javascript"
                            src="http://www.ohloh.net/p/482908/widgets/project_partner_badge.js"></script>
                </p>
            </div>
             
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div class="body">
                        
  <div class="section" id="comparison-with-r-r-libraries">
<span id="compare-with-r"></span><h1>Comparison with R / R libraries<a class="headerlink" href="#comparison-with-r-r-libraries" title="Permalink to this headline">¶</a></h1>
<p>Since <tt class="docutils literal"><span class="pre">pandas</span></tt> aims to provide a lot of the data manipulation and analysis
functionality that people use <a class="reference external" href="http://www.r-project.org/">R</a> for, this page
was started to provide a more detailed look at the <a class="reference external" href="http://en.wikipedia.org/wiki/R_(programming_language)">R language</a> and its many third
party libraries as they relate to <tt class="docutils literal"><span class="pre">pandas</span></tt>. In comparisons with R and CRAN
libraries, we care about the following things:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Functionality / flexibility</strong>: what can/cannot be done with each tool</li>
<li><strong>Performance</strong>: how fast are operations. Hard numbers/benchmarks are
preferable</li>
<li><strong>Ease-of-use</strong>: Is one tool easier/harder to use (you may have to be
the judge of this, given side-by-side code comparisons)</li>
</ul>
</div></blockquote>
<p>This page is also here to offer a bit of a translation guide for users of these
R packages.</p>
<div class="section" id="base-r">
<h2>Base R<a class="headerlink" href="#base-r" title="Permalink to this headline">¶</a></h2>
<div class="section" id="aggregate">
<h3><a class="reference external" href="http://finzi.psych.upenn.edu/R/library/stats/html/aggregate.html"><tt class="docutils literal"><span class="pre">aggregate</span></tt></a><a class="headerlink" href="#aggregate" title="Permalink to this headline">¶</a></h3>
<p>In R you may want to split data into subsets and compute the mean for each.
Using a data.frame called <tt class="docutils literal"><span class="pre">df</span></tt> and splitting it into groups <tt class="docutils literal"><span class="pre">by1</span></tt> and
<tt class="docutils literal"><span class="pre">by2</span></tt>:</p>
<div class="highlight-r"><div class="highlight"><pre>df <span class="o">&lt;-</span> data.frame<span class="p">(</span>
  v1 <span class="o">=</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="kc">NA</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">5</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">9</span><span class="p">),</span>
  v2 <span class="o">=</span> c<span class="p">(</span><span class="m">11</span><span class="p">,</span><span class="m">33</span><span class="p">,</span><span class="m">55</span><span class="p">,</span><span class="m">77</span><span class="p">,</span><span class="m">88</span><span class="p">,</span><span class="m">33</span><span class="p">,</span><span class="m">55</span><span class="p">,</span><span class="kc">NA</span><span class="p">,</span><span class="m">44</span><span class="p">,</span><span class="m">55</span><span class="p">,</span><span class="m">77</span><span class="p">,</span><span class="m">99</span><span class="p">),</span>
  by1 <span class="o">=</span> c<span class="p">(</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="s">&quot;big&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="m">12</span><span class="p">),</span>
  by2 <span class="o">=</span> c<span class="p">(</span><span class="s">&quot;wet&quot;</span><span class="p">,</span> <span class="s">&quot;dry&quot;</span><span class="p">,</span> <span class="m">99</span><span class="p">,</span> <span class="m">95</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="s">&quot;damp&quot;</span><span class="p">,</span> <span class="m">95</span><span class="p">,</span> <span class="m">99</span><span class="p">,</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="m">99</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="kc">NA</span><span class="p">))</span>
aggregate<span class="p">(</span>x<span class="o">=</span>df<span class="p">[,</span> c<span class="p">(</span><span class="s">&quot;v1&quot;</span><span class="p">,</span> <span class="s">&quot;v2&quot;</span><span class="p">)],</span> by<span class="o">=</span>list<span class="p">(</span>mydf2<span class="o">$</span>by1<span class="p">,</span> mydf2<span class="o">$</span>by2<span class="p">),</span> FUN <span class="o">=</span> mean<span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><tt class="xref py py-meth docutils literal"><span class="pre">groupby()</span></tt></a> method is similar to base R <tt class="docutils literal"><span class="pre">aggregate</span></tt>
function.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span>

<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ...:</span>   <span class="s">&#39;v1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">],</span>
<span class="gp">   ...:</span>   <span class="s">&#39;v2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">77</span><span class="p">,</span><span class="mi">88</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">44</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">77</span><span class="p">,</span><span class="mi">99</span><span class="p">],</span>
<span class="gp">   ...:</span>   <span class="s">&#39;by1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s">&quot;big&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
<span class="gp">   ...:</span>   <span class="s">&#39;by2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;wet&quot;</span><span class="p">,</span> <span class="s">&quot;dry&quot;</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="s">&quot;damp&quot;</span><span class="p">,</span> <span class="mi">95</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span>
<span class="gp">   ...:</span>           <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span>
<span class="gp">   ...:</span> <span class="p">})</span>
<span class="gp">   ...:</span> 

<span class="gp">In [3]: </span><span class="n">g</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">&#39;by1&#39;</span><span class="p">,</span><span class="s">&#39;by2&#39;</span><span class="p">])</span>

<span class="gp">In [4]: </span><span class="n">g</span><span class="p">[[</span><span class="s">&#39;v1&#39;</span><span class="p">,</span><span class="s">&#39;v2&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gr">Out[4]: </span>
<span class="go">           v1  v2</span>
<span class="go">by1  by2         </span>
<span class="go">1    95     5  55</span>
<span class="go">     99     5  55</span>
<span class="go">2    95     7  77</span>
<span class="go">     99   NaN NaN</span>
<span class="go">big  damp   3  33</span>
<span class="go">blue dry    3  33</span>
<span class="go">red  red    4  44</span>
<span class="go">     wet    1  11</span>

<span class="go">[8 rows x 2 columns]</span>
</pre></div>
</div>
<p>For more details and examples see <a class="reference internal" href="groupby.html#groupby-split"><em>the groupby documentation</em></a>.</p>
</div>
<div class="section" id="match">
<h3><a class="reference external" href="http://finzi.psych.upenn.edu/R/library/base/html/match.html"><tt class="docutils literal"><span class="pre">match</span></tt> / <tt class="docutils literal"><span class="pre">%in%</span></tt></a><a class="headerlink" href="#match" title="Permalink to this headline">¶</a></h3>
<p>A common way to select data in R is using <tt class="docutils literal"><span class="pre">%in%</span></tt> which is defined using the
function <tt class="docutils literal"><span class="pre">match</span></tt>. The operator <tt class="docutils literal"><span class="pre">%in%</span></tt> is used to return a logical vector
indicating if there is a match or not:</p>
<div class="highlight-r"><div class="highlight"><pre>s <span class="o">&lt;-</span> <span class="m">0</span><span class="o">:</span><span class="m">4</span>
s <span class="o">%in%</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="generated/pandas.DataFrame.isin.html#pandas.DataFrame.isin" title="pandas.DataFrame.isin"><tt class="xref py py-meth docutils literal"><span class="pre">isin()</span></tt></a> method is similar to R <tt class="docutils literal"><span class="pre">%in%</span></tt> operator:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [5]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">s</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gr">Out[6]: </span>
<span class="go">0    False</span>
<span class="go">1    False</span>
<span class="go">2     True</span>
<span class="go">3    False</span>
<span class="go">4     True</span>
<span class="go">dtype: bool</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">match</span></tt> function returns a vector of the positions of matches
of its first argument in its second:</p>
<div class="highlight-r"><div class="highlight"><pre>s <span class="o">&lt;-</span> <span class="m">0</span><span class="o">:</span><span class="m">4</span>
match<span class="p">(</span>s<span class="p">,</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">))</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="generated/pandas.core.groupby.GroupBy.apply.html#pandas.core.groupby.GroupBy.apply" title="pandas.core.groupby.GroupBy.apply"><tt class="xref py py-meth docutils literal"><span class="pre">apply()</span></tt></a> method can be used to replicate
this:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [7]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

<span class="gp">In [8]: </span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">))</span>
<span class="gr">Out[8]: </span>
<span class="go">0   NaN</span>
<span class="go">1   NaN</span>
<span class="go">2     0</span>
<span class="go">3   NaN</span>
<span class="go">4     1</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>For more details and examples see <a class="reference internal" href="indexing.html#indexing-basics-indexing-isin"><em>the reshaping documentation</em></a>.</p>
</div>
<div class="section" id="tapply">
<h3><a class="reference external" href="http://finzi.psych.upenn.edu/R/library/base/html/tapply.html"><tt class="docutils literal"><span class="pre">tapply</span></tt></a><a class="headerlink" href="#tapply" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">tapply</span></tt> is similar to <tt class="docutils literal"><span class="pre">aggregate</span></tt>, but data can be in a ragged array,
since the subclass sizes are possibly irregular. Using a data.frame called
<tt class="docutils literal"><span class="pre">baseball</span></tt>, and retrieving information based on the array <tt class="docutils literal"><span class="pre">team</span></tt>:</p>
<div class="highlight-r"><div class="highlight"><pre>baseball <span class="o">&lt;-</span>
  data.frame<span class="p">(</span>team <span class="o">=</span> gl<span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span>
             labels <span class="o">=</span> paste<span class="p">(</span><span class="s">&quot;Team&quot;</span><span class="p">,</span> LETTERS<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">])),</span>
             player <span class="o">=</span> sample<span class="p">(</span>letters<span class="p">,</span> <span class="m">25</span><span class="p">),</span>
             batting.average <span class="o">=</span> runif<span class="p">(</span><span class="m">25</span><span class="p">,</span> <span class="m">.200</span><span class="p">,</span> <span class="m">.400</span><span class="p">))</span>

tapply<span class="p">(</span>baseball<span class="o">$</span>batting.average<span class="p">,</span> baseball.example<span class="o">$</span>team<span class="p">,</span>
       max<span class="p">)</span>
</pre></div>
</div>
<p>In <tt class="docutils literal"><span class="pre">pandas</span></tt> we may use <a class="reference internal" href="generated/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><tt class="xref py py-meth docutils literal"><span class="pre">pivot_table()</span></tt></a> method to handle this:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [9]: </span><span class="kn">import</span> <span class="nn">random</span>

<span class="gp">In [10]: </span><span class="kn">import</span> <span class="nn">string</span>

<span class="gp">In [11]: </span><span class="n">baseball</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ....:</span>    <span class="s">&#39;team&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;team </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span><span class="o">*</span><span class="mi">5</span><span class="p">,</span>
<span class="gp">   ....:</span>    <span class="s">&#39;player&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_lowercase</span><span class="p">),</span><span class="mi">25</span><span class="p">),</span>
<span class="gp">   ....:</span>    <span class="s">&#39;batting avg&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">.</span><span class="mi">200</span><span class="p">,</span> <span class="o">.</span><span class="mi">400</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="gp">   ....:</span>    <span class="p">})</span>
<span class="gp">   ....:</span> 

<span class="gp">In [12]: </span><span class="n">baseball</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="s">&#39;batting avg&#39;</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="s">&#39;team&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
<span class="gr">Out[12]: </span>
<span class="go">team</span>
<span class="go">team 1    0.321235</span>
<span class="go">team 2    0.399140</span>
<span class="go">team 3    0.386815</span>
<span class="go">team 4    0.387197</span>
<span class="go">team 5    0.392086</span>
<span class="go">Name: batting avg, dtype: float64</span>
</pre></div>
</div>
<p>For more details and examples see <a class="reference internal" href="reshaping.html#reshaping-pivot"><em>the reshaping documentation</em></a>.</p>
</div>
<div class="section" id="subset">
<h3><a class="reference external" href="http://finzi.psych.upenn.edu/R/library/base/html/subset.html"><tt class="docutils literal"><span class="pre">subset</span></tt></a><a class="headerlink" href="#subset" title="Permalink to this headline">¶</a></h3>
<p class="versionadded">
<span class="versionmodified">New in version 0.13.</span></p>
<p>The <a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> method is similar to the base R <tt class="docutils literal"><span class="pre">subset</span></tt>
function. In R you might want to get the rows of a <tt class="docutils literal"><span class="pre">data.frame</span></tt> where one
column&#8217;s values are less than another column&#8217;s values:</p>
<div class="highlight-r"><div class="highlight"><pre>df <span class="o">&lt;-</span> data.frame<span class="p">(</span>a<span class="o">=</span>rnorm<span class="p">(</span><span class="m">10</span><span class="p">),</span> b<span class="o">=</span>rnorm<span class="p">(</span><span class="m">10</span><span class="p">))</span>
subset<span class="p">(</span>df<span class="p">,</span> a <span class="o">&lt;=</span> b<span class="p">)</span>
df<span class="p">[</span>df<span class="o">$</span>a <span class="o">&lt;=</span> df<span class="o">$</span>b<span class="p">,]</span>  <span class="c1"># note the comma</span>
</pre></div>
</div>
<p>In <tt class="docutils literal"><span class="pre">pandas</span></tt>, there are a few ways to perform subsetting. You can use
<a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> or pass an expression as if it were an
index/slice as well as standard boolean indexing:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [13]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>

<span class="gp">In [14]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a &lt;= b&#39;</span><span class="p">)</span>
<span class="gr">Out[14]: </span>
<span class="go">          a         b</span>
<span class="go">2 -0.838260  0.980077</span>
<span class="go">6 -0.017685  0.027505</span>
<span class="go">7 -0.182877  0.703105</span>
<span class="go">9 -1.717420 -0.986426</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [15]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">a</span> <span class="o">&lt;=</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">]</span>
<span class="gr">Out[15]: </span>
<span class="go">          a         b</span>
<span class="go">2 -0.838260  0.980077</span>
<span class="go">6 -0.017685  0.027505</span>
<span class="go">7 -0.182877  0.703105</span>
<span class="go">9 -1.717420 -0.986426</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [16]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">a</span> <span class="o">&lt;=</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">]</span>
<span class="gr">Out[16]: </span>
<span class="go">          a         b</span>
<span class="go">2 -0.838260  0.980077</span>
<span class="go">6 -0.017685  0.027505</span>
<span class="go">7 -0.182877  0.703105</span>
<span class="go">9 -1.717420 -0.986426</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
<p>For more details and examples see <a class="reference internal" href="indexing.html#indexing-query"><em>the query documentation</em></a>.</p>
</div>
<div class="section" id="with">
<h3><a class="reference external" href="http://finzi.psych.upenn.edu/R/library/base/html/with.html"><tt class="docutils literal"><span class="pre">with</span></tt></a><a class="headerlink" href="#with" title="Permalink to this headline">¶</a></h3>
<p class="versionadded">
<span class="versionmodified">New in version 0.13.</span></p>
<p>An expression using a data.frame called <tt class="docutils literal"><span class="pre">df</span></tt> in R with the columns <tt class="docutils literal"><span class="pre">a</span></tt> and
<tt class="docutils literal"><span class="pre">b</span></tt> would be evaluated using <tt class="docutils literal"><span class="pre">with</span></tt> like so:</p>
<div class="highlight-r"><div class="highlight"><pre>df <span class="o">&lt;-</span> data.frame<span class="p">(</span>a<span class="o">=</span>rnorm<span class="p">(</span><span class="m">10</span><span class="p">),</span> b<span class="o">=</span>rnorm<span class="p">(</span><span class="m">10</span><span class="p">))</span>
with<span class="p">(</span>df<span class="p">,</span> a <span class="o">+</span> b<span class="p">)</span>
df<span class="o">$</span>a <span class="o">+</span> df<span class="o">$</span>b  <span class="c1"># same as the previous expression</span>
</pre></div>
</div>
<p>In <tt class="docutils literal"><span class="pre">pandas</span></tt> the equivalent expression, using the
<a class="reference internal" href="generated/pandas.DataFrame.eval.html#pandas.DataFrame.eval" title="pandas.DataFrame.eval"><tt class="xref py py-meth docutils literal"><span class="pre">eval()</span></tt></a> method, would be:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [17]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">)})</span>

<span class="gp">In [18]: </span><span class="n">df</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="s">&#39;a + b&#39;</span><span class="p">)</span>
<span class="gr">Out[18]: </span>
<span class="go">0   -0.163194</span>
<span class="go">1    0.985872</span>
<span class="go">2    2.864538</span>
<span class="go">3    0.782622</span>
<span class="go">4    0.962818</span>
<span class="go">5    1.974849</span>
<span class="go">6    0.258445</span>
<span class="go">7   -2.288045</span>
<span class="go">8   -0.800437</span>
<span class="go">9    2.667426</span>
<span class="go">dtype: float64</span>

<span class="gp">In [19]: </span><span class="n">df</span><span class="o">.</span><span class="n">a</span> <span class="o">+</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span>  <span class="c"># same as the previous expression</span>
<span class="gr">Out[19]: </span>
<span class="go">0   -0.163194</span>
<span class="go">1    0.985872</span>
<span class="go">2    2.864538</span>
<span class="go">3    0.782622</span>
<span class="go">4    0.962818</span>
<span class="go">5    1.974849</span>
<span class="go">6    0.258445</span>
<span class="go">7   -2.288045</span>
<span class="go">8   -0.800437</span>
<span class="go">9    2.667426</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>In certain cases <a class="reference internal" href="generated/pandas.DataFrame.eval.html#pandas.DataFrame.eval" title="pandas.DataFrame.eval"><tt class="xref py py-meth docutils literal"><span class="pre">eval()</span></tt></a> will be much faster than
evaluation in pure Python. For more details and examples see <a class="reference internal" href="enhancingperf.html#enhancingperf-eval"><em>the eval
documentation</em></a>.</p>
</div>
</div>
<div class="section" id="zoo">
<h2>zoo<a class="headerlink" href="#zoo" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="xts">
<h2>xts<a class="headerlink" href="#xts" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="plyr">
<h2>plyr<a class="headerlink" href="#plyr" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">plyr</span></tt> is an R library for the split-apply-combine strategy for data
analysis. The functions revolve around three data structures in R, <tt class="docutils literal"><span class="pre">a</span></tt>
for <tt class="docutils literal"><span class="pre">arrays</span></tt>, <tt class="docutils literal"><span class="pre">l</span></tt> for <tt class="docutils literal"><span class="pre">lists</span></tt>, and <tt class="docutils literal"><span class="pre">d</span></tt> for <tt class="docutils literal"><span class="pre">data.frame</span></tt>. The
table below shows how these data structures could be mapped in Python.</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">R</th>
<th class="head">Python</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>array</td>
<td>list</td>
</tr>
<tr class="row-odd"><td>lists</td>
<td>dictionary or list of objects</td>
</tr>
<tr class="row-even"><td>data.frame</td>
<td>dataframe</td>
</tr>
</tbody>
</table>
<div class="section" id="ddply">
<h3><a class="reference external" href="http://www.inside-r.org/packages/cran/plyr/docs/ddply"><tt class="docutils literal"><span class="pre">ddply</span></tt></a><a class="headerlink" href="#ddply" title="Permalink to this headline">¶</a></h3>
<p>An expression using a data.frame called <tt class="docutils literal"><span class="pre">df</span></tt> in R where you want to
summarize <tt class="docutils literal"><span class="pre">x</span></tt> by <tt class="docutils literal"><span class="pre">month</span></tt>:</p>
<div class="highlight-r"><div class="highlight"><pre>require<span class="p">(</span>plyr<span class="p">)</span>
df <span class="o">&lt;-</span> data.frame<span class="p">(</span>
  x <span class="o">=</span> runif<span class="p">(</span><span class="m">120</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">168</span><span class="p">),</span>
  y <span class="o">=</span> runif<span class="p">(</span><span class="m">120</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">334</span><span class="p">),</span>
  z <span class="o">=</span> runif<span class="p">(</span><span class="m">120</span><span class="p">,</span> <span class="m">1.7</span><span class="p">,</span> <span class="m">20.7</span><span class="p">),</span>
  month <span class="o">=</span> rep<span class="p">(</span>c<span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">,</span><span class="m">8</span><span class="p">),</span><span class="m">30</span><span class="p">),</span>
  week <span class="o">=</span> sample<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="m">120</span><span class="p">,</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="p">)</span>

ddply<span class="p">(</span>df<span class="p">,</span> .<span class="p">(</span>month<span class="p">,</span> week<span class="p">),</span> summarize<span class="p">,</span>
      mean <span class="o">=</span> round<span class="p">(</span>mean<span class="p">(</span>x<span class="p">),</span> <span class="m">2</span><span class="p">),</span>
      sd <span class="o">=</span> round<span class="p">(</span>sd<span class="p">(</span>x<span class="p">),</span> <span class="m">2</span><span class="p">))</span>
</pre></div>
</div>
<p>In <tt class="docutils literal"><span class="pre">pandas</span></tt> the equivalent expression, using the
<a class="reference internal" href="generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><tt class="xref py py-meth docutils literal"><span class="pre">groupby()</span></tt></a> method, would be:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [20]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ....:</span>     <span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">168.</span><span class="p">,</span> <span class="mi">120</span><span class="p">),</span>
<span class="gp">   ....:</span>     <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">7.</span><span class="p">,</span> <span class="mf">334.</span><span class="p">,</span> <span class="mi">120</span><span class="p">),</span>
<span class="gp">   ....:</span>     <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.7</span><span class="p">,</span> <span class="mf">20.7</span><span class="p">,</span> <span class="mi">120</span><span class="p">),</span>
<span class="gp">   ....:</span>     <span class="s">&#39;month&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">]</span><span class="o">*</span><span class="mi">30</span><span class="p">,</span>
<span class="gp">   ....:</span>     <span class="s">&#39;week&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span> <span class="mi">120</span><span class="p">)</span>
<span class="gp">   ....:</span> <span class="p">})</span>
<span class="gp">   ....:</span> 

<span class="gp">In [21]: </span><span class="n">grouped</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">&#39;month&#39;</span><span class="p">,</span><span class="s">&#39;week&#39;</span><span class="p">])</span>

<span class="gp">In [22]: </span><span class="k">print</span> <span class="n">grouped</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">])</span>
<span class="go">                  mean        std</span>
<span class="go">month week                       </span>
<span class="go">5     1      74.750543  37.602035</span>
<span class="go">      2      91.420601  56.817107</span>
<span class="go">      3      80.270102  55.994654</span>
<span class="go">6     1      81.840060  50.966643</span>
<span class="go">      2      97.434542  59.919288</span>
<span class="go">      3      79.867371  47.377914</span>
<span class="go">7     1      83.997435  39.391772</span>
<span class="go">      2      86.244632  41.066830</span>
<span class="go">      3     108.811608  45.048738</span>
<span class="go">8     1      81.647843  50.264539</span>
<span class="go">      2      94.056653  47.677568</span>
<span class="go">      3      76.004631  47.048914</span>

<span class="go">[12 rows x 2 columns]</span>
</pre></div>
</div>
<p>For more details and examples see <a class="reference internal" href="groupby.html#groupby-aggregate"><em>the groupby documentation</em></a>.</p>
</div>
</div>
<div class="section" id="reshape-reshape2">
<h2>reshape / reshape2<a class="headerlink" href="#reshape-reshape2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="meltarray">
<h3><a class="reference external" href="http://www.inside-r.org/packages/cran/reshape2/docs/melt.array"><tt class="docutils literal"><span class="pre">melt.array</span></tt></a><a class="headerlink" href="#meltarray" title="Permalink to this headline">¶</a></h3>
<p>An expression using a 3 dimensional array called <tt class="docutils literal"><span class="pre">a</span></tt> in R where you want to
melt it into a data.frame:</p>
<div class="highlight-r"><div class="highlight"><pre>a <span class="o">&lt;-</span> array<span class="p">(</span>c<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">23</span><span class="p">,</span> <span class="kc">NA</span><span class="p">),</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">))</span>
data.frame<span class="p">(</span>melt<span class="p">(</span>a<span class="p">))</span>
</pre></div>
</div>
<p>In Python, since <tt class="docutils literal"><span class="pre">a</span></tt> is a list, you can simply use list comprehension.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [23]: </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">24</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">NAN</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [24]: </span><span class="n">DataFrame</span><span class="p">([</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="n">val</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">ndenumerate</span><span class="p">(</span><span class="n">a</span><span class="p">)])</span>
<span class="gr">Out[24]: </span>
<span class="go">    0  1  2   3</span>
<span class="go">0   0  0  0   1</span>
<span class="go">1   0  0  1   2</span>
<span class="go">2   0  0  2   3</span>
<span class="go">3   0  0  3   4</span>
<span class="go">4   0  1  0   5</span>
<span class="go">5   0  1  1   6</span>
<span class="go">6   0  1  2   7</span>
<span class="go">7   0  1  3   8</span>
<span class="go">8   0  2  0   9</span>
<span class="go">9   0  2  1  10</span>
<span class="go">10  0  2  2  11</span>
<span class="go">11  0  2  3  12</span>
<span class="go">12  1  0  0  13</span>
<span class="go">13  1  0  1  14</span>
<span class="go">14  1  0  2  15</span>
<span class="go">   .. .. .. ...</span>

<span class="go">[24 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="meltlist">
<h3><a class="reference internal" href="#meltlist"><tt class="docutils literal"><span class="pre">melt.list</span></tt></a><a class="headerlink" href="#meltlist" title="Permalink to this headline">¶</a></h3>
<p>An expression using a list called <tt class="docutils literal"><span class="pre">a</span></tt> in R where you want to melt it
into a data.frame:</p>
<div class="highlight-r"><div class="highlight"><pre>a <span class="o">&lt;-</span> as.list<span class="p">(</span>c<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="kc">NA</span><span class="p">))</span>
data.frame<span class="p">(</span>melt<span class="p">(</span>a<span class="p">))</span>
</pre></div>
</div>
<p>In Python, this list would be a list of tuples, so
<a class="reference internal" href="generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><tt class="xref py py-meth docutils literal"><span class="pre">DataFrame()</span></tt></a> method would convert it to a dataframe as required.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [25]: </span><span class="n">a</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">NAN</span><span class="p">]))</span>

<span class="gp">In [26]: </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gr">Out[26]: </span>
<span class="go">   0   1</span>
<span class="go">0  0   1</span>
<span class="go">1  1   2</span>
<span class="go">2  2   3</span>
<span class="go">3  3   4</span>
<span class="go">4  4 NaN</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>For more details and examples see <a class="reference internal" href="dsintro.html#basics-dataframe-from-items"><em>the Into to Data Structures
documentation</em></a>.</p>
</div>
<div class="section" id="meltdf">
<h3><a class="reference internal" href="#meltdf"><tt class="docutils literal"><span class="pre">melt.data.frame</span></tt></a><a class="headerlink" href="#meltdf" title="Permalink to this headline">¶</a></h3>
<p>An expression using a data.frame called <tt class="docutils literal"><span class="pre">cheese</span></tt> in R where you want to
reshape the data.frame:</p>
<div class="highlight-r"><div class="highlight"><pre>cheese <span class="o">&lt;-</span> data.frame<span class="p">(</span>
  first <span class="o">=</span> c<span class="p">(</span><span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;Mary&#39;</span><span class="p">),</span>
  last <span class="o">=</span> c<span class="p">(</span><span class="s">&#39;Doe&#39;</span><span class="p">,</span> <span class="s">&#39;Bo&#39;</span><span class="p">),</span>
  height <span class="o">=</span> c<span class="p">(</span><span class="m">5.5</span><span class="p">,</span> <span class="m">6.0</span><span class="p">),</span>
  weight <span class="o">=</span> c<span class="p">(</span><span class="m">130</span><span class="p">,</span> <span class="m">150</span><span class="p">)</span>
<span class="p">)</span>
melt<span class="p">(</span>cheese<span class="p">,</span> id<span class="o">=</span>c<span class="p">(</span><span class="s">&quot;first&quot;</span><span class="p">,</span> <span class="s">&quot;last&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>In Python, the <a class="reference internal" href="generated/pandas.melt.html#pandas.melt" title="pandas.melt"><tt class="xref py py-meth docutils literal"><span class="pre">melt()</span></tt></a> method is the R equivalent:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [27]: </span><span class="n">cheese</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;first&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;John&#39;</span><span class="p">,</span> <span class="s">&#39;Mary&#39;</span><span class="p">],</span>
<span class="gp">   ....:</span>                     <span class="s">&#39;last&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;Doe&#39;</span><span class="p">,</span> <span class="s">&#39;Bo&#39;</span><span class="p">],</span>
<span class="gp">   ....:</span>                     <span class="s">&#39;height&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mf">5.5</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span>
<span class="gp">   ....:</span>                     <span class="s">&#39;weight&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">130</span><span class="p">,</span> <span class="mi">150</span><span class="p">]})</span>
<span class="gp">   ....:</span> 

<span class="gp">In [28]: </span><span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">cheese</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">,</span> <span class="s">&#39;last&#39;</span><span class="p">])</span>
<span class="gr">Out[28]: </span>
<span class="go">  first last variable  value</span>
<span class="go">0  John  Doe   height    5.5</span>
<span class="go">1  Mary   Bo   height    6.0</span>
<span class="go">2  John  Doe   weight  130.0</span>
<span class="go">3  Mary   Bo   weight  150.0</span>

<span class="go">[4 rows x 4 columns]</span>

<span class="gp">In [29]: </span><span class="n">cheese</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s">&#39;first&#39;</span><span class="p">,</span> <span class="s">&#39;last&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span> <span class="c"># alternative way</span>
<span class="gr">Out[29]: </span>
<span class="go">first  last        </span>
<span class="go">John   Doe   height      5.5</span>
<span class="go">             weight    130.0</span>
<span class="go">Mary   Bo    height      6.0</span>
<span class="go">             weight    150.0</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>For more details and examples see <a class="reference internal" href="reshaping.html#reshaping-melt"><em>the reshaping documentation</em></a>.</p>
</div>
<div class="section" id="cast">
<h3><a class="reference internal" href="#cast"><tt class="docutils literal"><span class="pre">cast</span></tt></a><a class="headerlink" href="#cast" title="Permalink to this headline">¶</a></h3>
<p>In R <tt class="docutils literal"><span class="pre">acast</span></tt> is an expression using a data.frame called <tt class="docutils literal"><span class="pre">df</span></tt> in R to cast
into a higher dimensional array:</p>
<div class="highlight-r"><div class="highlight"><pre>df <span class="o">&lt;-</span> data.frame<span class="p">(</span>
  x <span class="o">=</span> runif<span class="p">(</span><span class="m">12</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">168</span><span class="p">),</span>
  y <span class="o">=</span> runif<span class="p">(</span><span class="m">12</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">334</span><span class="p">),</span>
  z <span class="o">=</span> runif<span class="p">(</span><span class="m">12</span><span class="p">,</span> <span class="m">1.7</span><span class="p">,</span> <span class="m">20.7</span><span class="p">),</span>
  month <span class="o">=</span> rep<span class="p">(</span>c<span class="p">(</span><span class="m">5</span><span class="p">,</span><span class="m">6</span><span class="p">,</span><span class="m">7</span><span class="p">),</span><span class="m">4</span><span class="p">),</span>
  week <span class="o">=</span> rep<span class="p">(</span>c<span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">),</span> <span class="m">6</span><span class="p">)</span>
<span class="p">)</span>

mdf <span class="o">&lt;-</span> melt<span class="p">(</span>df<span class="p">,</span> id<span class="o">=</span>c<span class="p">(</span><span class="s">&quot;month&quot;</span><span class="p">,</span> <span class="s">&quot;week&quot;</span><span class="p">))</span>
acast<span class="p">(</span>mdf<span class="p">,</span> week <span class="o">~</span> month <span class="o">~</span> variable<span class="p">,</span> mean<span class="p">)</span>
</pre></div>
</div>
<p>In Python the best way is to make use of <a class="reference internal" href="generated/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><tt class="xref py py-meth docutils literal"><span class="pre">pivot_table()</span></tt></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [30]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ....:</span>      <span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">168.</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
<span class="gp">   ....:</span>      <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">7.</span><span class="p">,</span> <span class="mf">334.</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
<span class="gp">   ....:</span>      <span class="s">&#39;z&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.7</span><span class="p">,</span> <span class="mf">20.7</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
<span class="gp">   ....:</span>      <span class="s">&#39;month&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span>
<span class="gp">   ....:</span>      <span class="s">&#39;week&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="mi">6</span>
<span class="gp">   ....:</span> <span class="p">})</span>
<span class="gp">   ....:</span> 

<span class="gp">In [31]: </span><span class="n">mdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">melt</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">id_vars</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;month&#39;</span><span class="p">,</span> <span class="s">&#39;week&#39;</span><span class="p">])</span>

<span class="gp">In [32]: </span><span class="n">pd</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">mdf</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s">&#39;value&#39;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;variable&#39;</span><span class="p">,</span><span class="s">&#39;week&#39;</span><span class="p">],</span>
<span class="gp">   ....:</span>                  <span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;month&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">)</span>
<span class="gp">   ....:</span> 
<span class="gr">Out[32]: </span>
<span class="go">month                   5           6           7</span>
<span class="go">variable week                                    </span>
<span class="go">x        1      89.863679   78.824388   50.832050</span>
<span class="go">         2     132.209447   36.715123   75.566345</span>
<span class="go">y        1     216.526257  110.507591   11.484571</span>
<span class="go">         2     153.506838  239.965235  160.223954</span>
<span class="go">z        1      15.536152    8.826941    7.015962</span>
<span class="go">         2      14.646656   17.064267   11.806954</span>

<span class="go">[6 rows x 3 columns]</span>
</pre></div>
</div>
<p>Similarly for <tt class="docutils literal"><span class="pre">dcast</span></tt> which uses a data.frame called <tt class="docutils literal"><span class="pre">df</span></tt> in R to
aggregate information based on <tt class="docutils literal"><span class="pre">Animal</span></tt> and <tt class="docutils literal"><span class="pre">FeedType</span></tt>:</p>
<div class="highlight-r"><div class="highlight"><pre>df <span class="o">&lt;-</span> data.frame<span class="p">(</span>
  Animal <span class="o">=</span> c<span class="p">(</span><span class="s">&#39;Animal1&#39;</span><span class="p">,</span> <span class="s">&#39;Animal2&#39;</span><span class="p">,</span> <span class="s">&#39;Animal3&#39;</span><span class="p">,</span> <span class="s">&#39;Animal2&#39;</span><span class="p">,</span> <span class="s">&#39;Animal1&#39;</span><span class="p">,</span>
             <span class="s">&#39;Animal2&#39;</span><span class="p">,</span> <span class="s">&#39;Animal3&#39;</span><span class="p">),</span>
  FeedType <span class="o">=</span> c<span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">),</span>
  Amount <span class="o">=</span> c<span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<span class="p">)</span>

dcast<span class="p">(</span>df<span class="p">,</span> Animal <span class="o">~</span> FeedType<span class="p">,</span> sum<span class="p">,</span> fill<span class="o">=</span><span class="kc">NaN</span><span class="p">)</span>
<span class="c1"># Alternative method using base R</span>
with<span class="p">(</span>df<span class="p">,</span> tapply<span class="p">(</span>Amount<span class="p">,</span> list<span class="p">(</span>Animal<span class="p">,</span> FeedType<span class="p">),</span> sum<span class="p">))</span>
</pre></div>
</div>
<p>Python can approach this in two different ways. Firstly, similar to above
using <a class="reference internal" href="generated/pandas.pivot_table.html#pandas.pivot_table" title="pandas.pivot_table"><tt class="xref py py-meth docutils literal"><span class="pre">pivot_table()</span></tt></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [33]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ....:</span>     <span class="s">&#39;Animal&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;Animal1&#39;</span><span class="p">,</span> <span class="s">&#39;Animal2&#39;</span><span class="p">,</span> <span class="s">&#39;Animal3&#39;</span><span class="p">,</span> <span class="s">&#39;Animal2&#39;</span><span class="p">,</span> <span class="s">&#39;Animal1&#39;</span><span class="p">,</span>
<span class="gp">   ....:</span>                <span class="s">&#39;Animal2&#39;</span><span class="p">,</span> <span class="s">&#39;Animal3&#39;</span><span class="p">],</span>
<span class="gp">   ....:</span>     <span class="s">&#39;FeedType&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">],</span>
<span class="gp">   ....:</span>     <span class="s">&#39;Amount&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">   ....:</span> <span class="p">})</span>
<span class="gp">   ....:</span> 

<span class="gp">In [34]: </span><span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="s">&#39;Amount&#39;</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="s">&#39;Animal&#39;</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="s">&#39;FeedType&#39;</span><span class="p">,</span> <span class="n">aggfunc</span><span class="o">=</span><span class="s">&#39;sum&#39;</span><span class="p">)</span>
<span class="gr">Out[34]: </span>
<span class="go">FeedType   A   B</span>
<span class="go">Animal          </span>
<span class="go">Animal1   10   5</span>
<span class="go">Animal2    2  13</span>
<span class="go">Animal3    6 NaN</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>The second approach is to use the <a class="reference internal" href="generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><tt class="xref py py-meth docutils literal"><span class="pre">groupby()</span></tt></a> method:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [35]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">&#39;Animal&#39;</span><span class="p">,</span><span class="s">&#39;FeedType&#39;</span><span class="p">])[</span><span class="s">&#39;Amount&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gr">Out[35]: </span>
<span class="go">Animal   FeedType</span>
<span class="go">Animal1  A           10</span>
<span class="go">         B            5</span>
<span class="go">Animal2  A            2</span>
<span class="go">         B           13</span>
<span class="go">Animal3  A            6</span>
<span class="go">Name: Amount, dtype: int64</span>
</pre></div>
</div>
<p>For more details and examples see <a class="reference internal" href="reshaping.html#reshaping-pivot"><em>the reshaping documentation</em></a> or <a class="reference internal" href="groupby.html#groupby-split"><em>the groupby documentation</em></a>.</p>
</div>
</div>
</div>


                    </div>
                </div>
            </div>

            
            <div class="clearer"></div>
        </div>
    </div>
</div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="comparison_with_sql.html" title="Comparison with SQL"
             >next</a> |</li>
        <li class="right" >
          <a href="ecosystem.html" title="Pandas Ecosystem"
             >previous</a> |</li>
        <li><a href="index.html">pandas 0.13.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2014, the pandas development team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>