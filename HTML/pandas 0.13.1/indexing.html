

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Indexing and Selecting Data &mdash; pandas 0.13.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.13.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pandas 0.13.1 documentation" href="index.html" />
    <link rel="next" title="Computational tools" href="computation.html" />
    <link rel="prev" title="Essential Basic Functionality" href="basics.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="computation.html" title="Computational tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="basics.html" title="Essential Basic Functionality"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pandas 0.13.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
<div class="content-wrapper">
    <div class="content">
        <div class="document">
            <div class="sphinxsidebar">
                <h3>Table Of Contents</h3>
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">What&#8217;s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Package overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="10min.html">10 Minutes to Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsintro.html">Intro to Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Essential Basic Functionality</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Indexing and Selecting Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#different-choices-for-indexing-loc-iloc-and-ix">Different Choices for Indexing (<tt class="docutils literal"><span class="pre">loc</span></tt>, <tt class="docutils literal"><span class="pre">iloc</span></tt>, and <tt class="docutils literal"><span class="pre">ix</span></tt>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attribute-access">Attribute Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#slicing-ranges">Slicing ranges</a></li>
<li class="toctree-l2"><a class="reference internal" href="#selection-by-label">Selection By Label</a></li>
<li class="toctree-l2"><a class="reference internal" href="#selection-by-position">Selection By Position</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-with-enlargement">Setting With Enlargement</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fast-scalar-value-getting-and-setting">Fast scalar value getting and setting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boolean-indexing">Boolean indexing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#indexing-with-isin">Indexing with isin</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#the-where-method-and-masking">The <tt class="docutils literal"><span class="pre">where()</span></tt> Method and Masking</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-query-method-experimental">The <tt class="docutils literal"><span class="pre">query()</span></tt> Method (Experimental)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multiindex-query-syntax"><tt class="docutils literal"><span class="pre">MultiIndex</span></tt> <tt class="docutils literal"><span class="pre">query()</span></tt> Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-use-cases"><tt class="docutils literal"><span class="pre">query()</span></tt> Use Cases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-python-versus-pandas-syntax-comparison"><tt class="docutils literal"><span class="pre">query()</span></tt> Python versus pandas Syntax Comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-in-and-not-in-operators">The <tt class="docutils literal"><span class="pre">in</span></tt> and <tt class="docutils literal"><span class="pre">not</span> <span class="pre">in</span></tt> operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-use-of-the-operator-with-list-objects">Special use of the <tt class="docutils literal"><span class="pre">==</span></tt> operator with <tt class="docutils literal"><span class="pre">list</span></tt> objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#boolean-operators">Boolean Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance-of-query">Performance of <tt class="docutils literal"><span class="pre">query()</span></tt></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#take-methods">Take Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#duplicate-data">Duplicate Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dictionary-like-get-method">Dictionary-like <tt class="docutils literal"><span class="pre">get()</span></tt> method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-indexing-with-ix">Advanced Indexing with <tt class="docutils literal"><span class="pre">.ix</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-select-method">The <tt class="docutils literal"><span class="pre">select()</span></tt> Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-lookup-method">The <tt class="docutils literal"><span class="pre">lookup()</span></tt> Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="#float64index">Float64Index</a></li>
<li class="toctree-l2"><a class="reference internal" href="#returning-a-view-versus-a-copy">Returning a view versus a copy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fallback-indexing">Fallback indexing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#index-objects">Index objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#set-operations-on-index-objects">Set operations on Index objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-isin-method-of-index-objects">The <tt class="docutils literal"><span class="pre">isin</span></tt> method of Index objects</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hierarchical-indexing-multiindex">Hierarchical indexing (MultiIndex)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-multiindex-hierarchical-index-object">Creating a MultiIndex (hierarchical index) object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reconstructing-the-level-labels">Reconstructing the level labels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-indexing-on-axis-with-multiindex">Basic indexing on axis with MultiIndex</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-alignment-and-using-reindex">Data alignment and using <tt class="docutils literal"><span class="pre">reindex</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-indexing-with-hierarchical-index">Advanced indexing with hierarchical index</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cross-section-with-hierarchical-index">Cross-section with hierarchical index</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-reindexing-and-alignment-with-hierarchical-index">Advanced reindexing and alignment with hierarchical index</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-need-for-sortedness-with-multiindex">The need for sortedness with <tt class="docutils literal"><span class="pre">MultiIndex</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#swapping-levels-with-swaplevel">Swapping levels with <tt class="docutils literal"><span class="pre">swaplevel()</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#reordering-levels-with-reorder-levels">Reordering levels with <tt class="docutils literal"><span class="pre">reorder_levels()</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#some-gory-internal-details">Some gory internal details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#setting-index-metadata-name-s-levels-labels">Setting index metadata (<tt class="docutils literal"><span class="pre">name(s)</span></tt>, <tt class="docutils literal"><span class="pre">levels</span></tt>, <tt class="docutils literal"><span class="pre">labels</span></tt>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-an-index-to-an-existing-dataframe">Adding an index to an existing DataFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-an-index-using-dataframe-columns">Add an index using DataFrame columns</a></li>
<li class="toctree-l2"><a class="reference internal" href="#remove-reset-the-index-reset-index">Remove / reset the index,  <tt class="docutils literal"><span class="pre">reset_index</span></tt></a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-an-ad-hoc-index">Adding an ad hoc index</a></li>
<li class="toctree-l2"><a class="reference internal" href="#indexing-internal-details">Indexing internal details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="computation.html">Computational tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_data.html">Working with missing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupby.html">Group By: split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging.html">Merge, join, and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshaping.html">Reshaping and Pivot Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseries.html">Time Series / Date functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Plotting with matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="rplot.html">Trellis plotting interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">IO Tools (Text, CSV, HDF5, ...)</a></li>
<li class="toctree-l1"><a class="reference internal" href="remote_data.html">Remote Data Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="enhancingperf.html">Enhancing Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Sparse data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Caveats and Gotchas</a></li>
<li class="toctree-l1"><a class="reference internal" href="r_interface.html">rpy2 / R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="ecosystem.html">Pandas Ecosystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_r.html">Comparison with R / R libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_sql.html">Comparison with SQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Notes</a></li>
</ul>

                <h3 style="margin-top: 1.5em;">Search</h3>

                <form class="search" action="search.html" method="get">
                    <input type="text" name="q" size="18"/>
                    <input type="submit" value="Go"/>
                    <input type="hidden" name="check_keywords" value="yes"/>
                    <input type="hidden" name="area" value="default"/>
                </form>
                <p class="searchtip" style="font-size: 90%">
                    Enter search terms or a module, class or function name.
                </p>

                <p>

                <p>
                    <script type="text/javascript"
                            src="http://www.ohloh.net/p/482908/widgets/project_partner_badge.js"></script>
                </p>
            </div>
             
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div class="body">
                        
  <div class="section" id="indexing-and-selecting-data">
<span id="indexing"></span><h1>Indexing and Selecting Data<a class="headerlink" href="#indexing-and-selecting-data" title="Permalink to this headline">¶</a></h1>
<p>The axis labeling information in pandas objects serves many purposes:</p>
<blockquote>
<div><ul class="simple">
<li>Identifies data (i.e. provides <em>metadata</em>) using known indicators,
important for for analysis, visualization, and interactive console display</li>
<li>Enables automatic and explicit data alignment</li>
<li>Allows intuitive getting and setting of subsets of the data set</li>
</ul>
</div></blockquote>
<p>In this section, we will focus on the final point: namely, how to slice, dice,
and generally get and set subsets of pandas objects. The primary focus will be
on Series and DataFrame as they have received more development attention in
this area. Expect more work to be invested higher-dimensional data structures
(including <tt class="docutils literal"><span class="pre">Panel</span></tt>) in the future, especially in label-based advanced
indexing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Python and NumPy indexing operators <tt class="docutils literal"><span class="pre">[]</span></tt> and attribute operator <tt class="docutils literal"><span class="pre">.</span></tt>
provide quick and easy access to pandas data structures across a wide range
of use cases. This makes interactive work intuitive, as there&#8217;s little new
to learn if you already know how to deal with Python dictionaries and NumPy
arrays. However, since the type of the data to be accessed isn&#8217;t known in
advance, directly using standard operators has some optimization limits. For
production code, we recommended that you take advantage of the optimized
pandas data access methods exposed in this chapter.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Whether a copy or a reference is returned for a setting operation, may
depend on the context.  This is sometimes called <tt class="docutils literal"><span class="pre">chained</span> <span class="pre">assignment</span></tt> and
should be avoided.  See <a class="reference internal" href="#indexing-view-versus-copy"><em>Returning a View versus Copy</em></a></p>
</div>
<p>See the <a class="reference internal" href="cookbook.html#cookbook-selection"><em>cookbook</em></a> for some advanced strategies</p>
<div class="section" id="different-choices-for-indexing-loc-iloc-and-ix">
<h2>Different Choices for Indexing (<tt class="docutils literal"><span class="pre">loc</span></tt>, <tt class="docutils literal"><span class="pre">iloc</span></tt>, and <tt class="docutils literal"><span class="pre">ix</span></tt>)<a class="headerlink" href="#different-choices-for-indexing-loc-iloc-and-ix" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 0.11.0.</span></p>
<p>Object selection has had a number of user-requested additions in order to
support more explicit location based indexing. Pandas now supports three types
of multi-axis indexing.</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">.loc</span></tt> is strictly label based, will raise <tt class="docutils literal"><span class="pre">KeyError</span></tt> when the items are
not found, allowed inputs are:</p>
<ul class="simple">
<li>A single label, e.g. <tt class="docutils literal"><span class="pre">5</span></tt> or <tt class="docutils literal"><span class="pre">'a'</span></tt>, (note that <tt class="docutils literal"><span class="pre">5</span></tt> is interpreted as a
<em>label</em> of the index. This use is <strong>not</strong> an integer position along the
index)</li>
<li>A list or array of labels <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></tt></li>
<li>A slice object with labels <tt class="docutils literal"><span class="pre">'a':'f'</span></tt>, (note that contrary to usual python
slices, <strong>both</strong> the start and the stop are included!)</li>
<li>A boolean array</li>
</ul>
<p>See more at <a class="reference internal" href="#indexing-label"><em>Selection by Label</em></a></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">.iloc</span></tt> is strictly integer position based (from <tt class="docutils literal"><span class="pre">0</span></tt> to <tt class="docutils literal"><span class="pre">length-1</span></tt> of
the axis), will raise <tt class="docutils literal"><span class="pre">IndexError</span></tt> when the requested indicies are out of
bounds. Allowed inputs are:</p>
<ul class="simple">
<li>An integer e.g. <tt class="docutils literal"><span class="pre">5</span></tt></li>
<li>A list or array of integers <tt class="docutils literal"><span class="pre">[4,</span> <span class="pre">3,</span> <span class="pre">0]</span></tt></li>
<li>A slice object with ints <tt class="docutils literal"><span class="pre">1:7</span></tt></li>
</ul>
<p>See more at <a class="reference internal" href="#indexing-integer"><em>Selection by Position</em></a></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">.ix</span></tt> supports mixed integer and label based access. It is primarily label
based, but will fallback to integer positional access. <tt class="docutils literal"><span class="pre">.ix</span></tt> is the most
general and will support any of the inputs to <tt class="docutils literal"><span class="pre">.loc</span></tt> and <tt class="docutils literal"><span class="pre">.iloc</span></tt>, as well
as support for floating point label schemes. <tt class="docutils literal"><span class="pre">.ix</span></tt> is especially useful
when dealing with mixed positional and label based hierarchial indexes.
As using integer slices with <tt class="docutils literal"><span class="pre">.ix</span></tt> have different behavior depending on
whether the slice is interpreted as position based or label based, it&#8217;s
usually better to be explicit and use <tt class="docutils literal"><span class="pre">.iloc</span></tt> or <tt class="docutils literal"><span class="pre">.loc</span></tt>.</p>
<p>See more at <a class="reference internal" href="#indexing-advanced"><em>Advanced Indexing</em></a>, <a class="reference internal" href="#indexing-advanced-hierarchical"><em>Advanced
Hierarchical</em></a> and <a class="reference internal" href="#indexing-fallback"><em>Fallback Indexing</em></a></p>
</li>
</ul>
<p>Getting values from an object with multi-axes selection uses the following
notation (using <tt class="docutils literal"><span class="pre">.loc</span></tt> as an example, but applies to <tt class="docutils literal"><span class="pre">.iloc</span></tt> and <tt class="docutils literal"><span class="pre">.ix</span></tt> as
well). Any of the axes accessors may be the null slice <tt class="docutils literal"><span class="pre">:</span></tt>. Axes left out of
the specification are assumed to be <tt class="docutils literal"><span class="pre">:</span></tt>. (e.g. <tt class="docutils literal"><span class="pre">p.loc['a']</span></tt> is equiv to
<tt class="docutils literal"><span class="pre">p.loc['a',</span> <span class="pre">:,</span> <span class="pre">:]</span></tt>)</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Object Type</th>
<th class="head">Indexers</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Series</td>
<td><tt class="docutils literal"><span class="pre">s.loc[indexer]</span></tt></td>
</tr>
<tr class="row-odd"><td>DataFrame</td>
<td><tt class="docutils literal"><span class="pre">df.loc[row_indexer,column_indexer]</span></tt></td>
</tr>
<tr class="row-even"><td>Panel</td>
<td><tt class="docutils literal"><span class="pre">p.loc[item_indexer,major_indexer,minor_indexer]</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h2>
<p>Beginning with version 0.11.0, it&#8217;s recommended that you transition away from
the following methods as they <em>may</em> be deprecated in future versions.</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">irow</span></tt></li>
<li><tt class="docutils literal"><span class="pre">icol</span></tt></li>
<li><tt class="docutils literal"><span class="pre">iget_value</span></tt></li>
</ul>
</div></blockquote>
<p>See the section <a class="reference internal" href="#indexing-integer"><em>Selection by Position</em></a> for substitutes.</p>
</div>
<div class="section" id="basics">
<span id="indexing-basics"></span><h2>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>As mentioned when introducing the data structures in the <a class="reference internal" href="basics.html#basics"><em>last section</em></a>, the primary function of indexing with <tt class="docutils literal"><span class="pre">[]</span></tt> (a.k.a. <tt class="docutils literal"><span class="pre">__getitem__</span></tt>
for those familiar with implementing class behavior in Python) is selecting out
lower-dimensional slices. Thus,</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Object Type</th>
<th class="head">Selection</th>
<th class="head">Return Value Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Series</td>
<td><tt class="docutils literal"><span class="pre">series[label]</span></tt></td>
<td>scalar value</td>
</tr>
<tr class="row-odd"><td>DataFrame</td>
<td><tt class="docutils literal"><span class="pre">frame[colname]</span></tt></td>
<td><tt class="docutils literal"><span class="pre">Series</span></tt> corresponding to colname</td>
</tr>
<tr class="row-even"><td>Panel</td>
<td><tt class="docutils literal"><span class="pre">panel[itemname]</span></tt></td>
<td><tt class="docutils literal"><span class="pre">DataFrame</span></tt> corresponing to the itemname</td>
</tr>
</tbody>
</table>
<p>Here we construct a simple time series data set to use for illustrating the
indexing functionality:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="n">dates</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">dates</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;D&#39;</span><span class="p">])</span>

<span class="gp">In [3]: </span><span class="n">df</span>
<span class="gr">Out[3]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">2000-01-02  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2000-01-03 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">2000-01-04  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">2000-01-05 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">2000-01-06 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">2000-01-07  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">2000-01-08 -0.370647 -1.157892 -1.344312  0.844885</span>

<span class="go">[8 rows x 4 columns]</span>

<span class="gp">In [4]: </span><span class="n">panel</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">({</span><span class="s">&#39;one&#39;</span> <span class="p">:</span> <span class="n">df</span><span class="p">,</span> <span class="s">&#39;two&#39;</span> <span class="p">:</span> <span class="n">df</span> <span class="o">-</span> <span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">()})</span>

<span class="gp">In [5]: </span><span class="n">panel</span>
<span class="gr">Out[5]: </span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 2 (items) x 8 (major_axis) x 4 (minor_axis)</span>
<span class="go">Items axis: one to two</span>
<span class="go">Major_axis axis: 2000-01-01 00:00:00 to 2000-01-08 00:00:00</span>
<span class="go">Minor_axis axis: A to D</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">None of the indexing functionality is time series specific unless
specifically stated.</p>
</div>
<p>Thus, as per above, we have the most basic indexing using <tt class="docutils literal"><span class="pre">[]</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [6]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span>

<span class="gp">In [7]: </span><span class="n">s</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">5</span><span class="p">]]</span>
<span class="gr">Out[7]: </span><span class="o">-</span><span class="mf">0.67368970808837059</span>

<span class="gp">In [8]: </span><span class="n">panel</span><span class="p">[</span><span class="s">&#39;two&#39;</span><span class="p">]</span>
<span class="gr">Out[8]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  0.409571  0.113086 -0.610826 -0.936507</span>
<span class="go">2000-01-02  1.152571  0.222735  1.017442 -0.845111</span>
<span class="go">2000-01-03 -0.921390 -1.708620  0.403304  1.270929</span>
<span class="go">2000-01-04  0.662014 -0.310822 -0.141342  0.470985</span>
<span class="go">2000-01-05 -0.484513  0.962970  1.174465 -0.888276</span>
<span class="go">2000-01-06 -0.733231  0.509598 -0.580194  0.724113</span>
<span class="go">2000-01-07  0.345164  0.972995 -0.816769 -0.840143</span>
<span class="go">2000-01-08 -0.430188 -0.761943 -0.446079  1.044010</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>You can pass a list of columns to <tt class="docutils literal"><span class="pre">[]</span></tt> to select columns in that order.
If a column is not contained in the DataFrame, an exception will be
raised. Multiple columns can also be set in this manner:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [9]: </span><span class="n">df</span>
<span class="gr">Out[9]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">2000-01-02  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2000-01-03 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">2000-01-04  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">2000-01-05 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">2000-01-06 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">2000-01-07  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">2000-01-08 -0.370647 -1.157892 -1.344312  0.844885</span>

<span class="go">[8 rows x 4 columns]</span>

<span class="gp">In [10]: </span><span class="n">df</span><span class="p">[[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]]</span>

<span class="gp">In [11]: </span><span class="n">df</span>
<span class="gr">Out[11]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -0.282863  0.469112 -1.509059 -1.135632</span>
<span class="go">2000-01-02 -0.173215  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-03 -2.104569 -0.861849 -0.494929  1.071804</span>
<span class="go">2000-01-04 -0.706771  0.721555 -1.039575  0.271860</span>
<span class="go">2000-01-05  0.567020 -0.424972  0.276232 -1.087401</span>
<span class="go">2000-01-06  0.113648 -0.673690 -1.478427  0.524988</span>
<span class="go">2000-01-07  0.577046  0.404705 -1.715002 -1.039268</span>
<span class="go">2000-01-08 -1.157892 -0.370647 -1.344312  0.844885</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>You may find this useful for applying a transform (in-place) to a subset of the
columns.</p>
</div>
<div class="section" id="attribute-access">
<h2>Attribute Access<a class="headerlink" href="#attribute-access" title="Permalink to this headline">¶</a></h2>
<p id="indexing-attribute-access"><span id="indexing-df-cols"></span><span id="indexing-columns-multiple"></span>You may access an index on a <tt class="docutils literal"><span class="pre">Series</span></tt>, column on a <tt class="docutils literal"><span class="pre">DataFrame</span></tt>, and a item on a <tt class="docutils literal"><span class="pre">Panel</span></tt> directly
as an attribute:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [12]: </span><span class="n">sa</span> <span class="o">=</span> <span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [13]: </span><span class="n">dfa</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [14]: </span><span class="n">sa</span><span class="o">.</span><span class="n">b</span>
<span class="gr">Out[14]: </span><span class="mi">2</span>

<span class="gp">In [15]: </span><span class="n">dfa</span><span class="o">.</span><span class="n">A</span>
<span class="gr">Out[15]: </span>
<span class="go">2000-01-01   -0.282863</span>
<span class="go">2000-01-02   -0.173215</span>
<span class="go">2000-01-03   -2.104569</span>
<span class="go">2000-01-04   -0.706771</span>
<span class="go">2000-01-05    0.567020</span>
<span class="go">2000-01-06    0.113648</span>
<span class="go">2000-01-07    0.577046</span>
<span class="go">2000-01-08   -1.157892</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>

<span class="gp">In [16]: </span><span class="n">panel</span><span class="o">.</span><span class="n">one</span>
<span class="gr">Out[16]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">2000-01-02  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2000-01-03 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">2000-01-04  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">2000-01-05 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">2000-01-06 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">2000-01-07  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">2000-01-08 -0.370647 -1.157892 -1.344312  0.844885</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>Setting is allowed as well</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [17]: </span><span class="n">sa</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>

<span class="gp">In [18]: </span><span class="n">sa</span>
<span class="gr">Out[18]: </span>
<span class="go">a    5</span>
<span class="go">b    2</span>
<span class="go">c    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [19]: </span><span class="n">dfa</span><span class="o">.</span><span class="n">A</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dfa</span><span class="o">.</span><span class="n">index</span><span class="p">)))</span>

<span class="gp">In [20]: </span><span class="n">dfa</span>
<span class="gr">Out[20]: </span>
<span class="go">            A         B         C         D</span>
<span class="go">2000-01-01  0  0.469112 -1.509059 -1.135632</span>
<span class="go">2000-01-02  1  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-03  2 -0.861849 -0.494929  1.071804</span>
<span class="go">2000-01-04  3  0.721555 -1.039575  0.271860</span>
<span class="go">2000-01-05  4 -0.424972  0.276232 -1.087401</span>
<span class="go">2000-01-06  5 -0.673690 -1.478427  0.524988</span>
<span class="go">2000-01-07  6  0.404705 -1.715002 -1.039268</span>
<span class="go">2000-01-08  7 -0.370647 -1.344312  0.844885</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>You can use this access only if the index element is a valid python identifier, e.g. <tt class="docutils literal"><span class="pre">s.1</span></tt> is not allowed.
see <a class="reference external" href="http://docs.python.org/2.7/reference/lexical_analysis.html#identifiers">here for an explanation of valid identifiers</a>.</li>
<li>The attribute will not be available if it conflicts with an existing method name, e.g. <tt class="docutils literal"><span class="pre">s.min</span></tt> is not allowed.</li>
<li>The <tt class="docutils literal"><span class="pre">Series/Panel</span></tt> accesses are available starting in 0.13.0.</li>
</ul>
</div>
<p>If you are using the IPython environment, you may also use tab-completion to
see these accessable attributes.</p>
</div>
<div class="section" id="slicing-ranges">
<h2>Slicing ranges<a class="headerlink" href="#slicing-ranges" title="Permalink to this headline">¶</a></h2>
<p>The most robust and consistent way of slicing ranges along arbitrary axes is
described in the <a class="reference internal" href="#indexing-integer"><em>Selection by Position</em></a> section
detailing the <tt class="docutils literal"><span class="pre">.iloc</span></tt> method. For now, we explain the semantics of slicing using the <tt class="docutils literal"><span class="pre">[]</span></tt> operator.</p>
<p>With Series, the syntax works exactly as with an ndarray, returning a slice of
the values and the corresponding labels:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [21]: </span><span class="n">s</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="gr">Out[21]: </span>
<span class="go">2000-01-01   -0.282863</span>
<span class="go">2000-01-02   -0.173215</span>
<span class="go">2000-01-03   -2.104569</span>
<span class="go">2000-01-04   -0.706771</span>
<span class="go">2000-01-05    0.567020</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>

<span class="gp">In [22]: </span><span class="n">s</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
<span class="gr">Out[22]: </span>
<span class="go">2000-01-01   -0.282863</span>
<span class="go">2000-01-03   -2.104569</span>
<span class="go">2000-01-05    0.567020</span>
<span class="go">2000-01-07    0.577046</span>
<span class="go">Freq: 2D, Name: A, dtype: float64</span>

<span class="gp">In [23]: </span><span class="n">s</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gr">Out[23]: </span>
<span class="go">2000-01-08   -1.157892</span>
<span class="go">2000-01-07    0.577046</span>
<span class="go">2000-01-06    0.113648</span>
<span class="go">2000-01-05    0.567020</span>
<span class="go">2000-01-04   -0.706771</span>
<span class="go">2000-01-03   -2.104569</span>
<span class="go">2000-01-02   -0.173215</span>
<span class="go">2000-01-01   -0.282863</span>
<span class="go">Freq: -1D, Name: A, dtype: float64</span>
</pre></div>
</div>
<p>Note that setting works as well:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [24]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [25]: </span><span class="n">s2</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [26]: </span><span class="n">s2</span>
<span class="gr">Out[26]: </span>
<span class="go">2000-01-01    0.000000</span>
<span class="go">2000-01-02    0.000000</span>
<span class="go">2000-01-03    0.000000</span>
<span class="go">2000-01-04    0.000000</span>
<span class="go">2000-01-05    0.000000</span>
<span class="go">2000-01-06    0.113648</span>
<span class="go">2000-01-07    0.577046</span>
<span class="go">2000-01-08   -1.157892</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>
</pre></div>
</div>
<p>With DataFrame, slicing inside of <tt class="docutils literal"><span class="pre">[]</span></tt> <strong>slices the rows</strong>. This is provided
largely as a convenience since it is such a common operation.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [27]: </span><span class="n">df</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[27]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -0.282863  0.469112 -1.509059 -1.135632</span>
<span class="go">2000-01-02 -0.173215  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-03 -2.104569 -0.861849 -0.494929  1.071804</span>

<span class="go">[3 rows x 4 columns]</span>

<span class="gp">In [28]: </span><span class="n">df</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gr">Out[28]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-08 -1.157892 -0.370647 -1.344312  0.844885</span>
<span class="go">2000-01-07  0.577046  0.404705 -1.715002 -1.039268</span>
<span class="go">2000-01-06  0.113648 -0.673690 -1.478427  0.524988</span>
<span class="go">2000-01-05  0.567020 -0.424972  0.276232 -1.087401</span>
<span class="go">2000-01-04 -0.706771  0.721555 -1.039575  0.271860</span>
<span class="go">2000-01-03 -2.104569 -0.861849 -0.494929  1.071804</span>
<span class="go">2000-01-02 -0.173215  1.212112  0.119209 -1.044236</span>
<span class="go">2000-01-01 -0.282863  0.469112 -1.509059 -1.135632</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="selection-by-label">
<span id="indexing-label"></span><h2>Selection By Label<a class="headerlink" href="#selection-by-label" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Whether a copy or a reference is returned for a setting operation, may depend on the context.
This is sometimes called <tt class="docutils literal"><span class="pre">chained</span> <span class="pre">assignment</span></tt> and should be avoided.
See <a class="reference internal" href="#indexing-view-versus-copy"><em>Returning a View versus Copy</em></a></p>
</div>
<p>Pandas provides a suite of methods in order to have <strong>purely label based indexing</strong>. This is a strict inclusion based protocol.
<strong>ALL</strong> of the labels for which you ask, must be in the index or a <tt class="docutils literal"><span class="pre">KeyError</span></tt> will be raised! When slicing, the start bound is <em>included</em>, <strong>AND</strong> the stop bound is <em>included</em>. Integers are valid labels, but they refer to the label <strong>and not the position</strong>.</p>
<p>The <tt class="docutils literal"><span class="pre">.loc</span></tt> attribute is the primary access method. The following are valid inputs:</p>
<ul class="simple">
<li>A single label, e.g. <tt class="docutils literal"><span class="pre">5</span></tt> or <tt class="docutils literal"><span class="pre">'a'</span></tt>, (note that <tt class="docutils literal"><span class="pre">5</span></tt> is interpreted as a <em>label</em> of the index. This use is <strong>not</strong> an integer position along the index)</li>
<li>A list or array of labels <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></tt></li>
<li>A slice object with labels <tt class="docutils literal"><span class="pre">'a':'f'</span></tt> (note that contrary to usual python slices, <strong>both</strong> the start and the stop are included!)</li>
<li>A boolean array</li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [29]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">))</span>

<span class="gp">In [30]: </span><span class="n">s1</span>
<span class="gr">Out[30]: </span>
<span class="go">a    1.075770</span>
<span class="go">b   -0.109050</span>
<span class="go">c    1.643563</span>
<span class="go">d   -1.469388</span>
<span class="go">e    0.357021</span>
<span class="go">f   -0.674600</span>
<span class="go">dtype: float64</span>

<span class="gp">In [31]: </span><span class="n">s1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">:]</span>
<span class="gr">Out[31]: </span>
<span class="go">c    1.643563</span>
<span class="go">d   -1.469388</span>
<span class="go">e    0.357021</span>
<span class="go">f   -0.674600</span>
<span class="go">dtype: float64</span>

<span class="gp">In [32]: </span><span class="n">s1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span>
<span class="gr">Out[32]: </span><span class="o">-</span><span class="mf">0.10904997528022223</span>
</pre></div>
</div>
<p>Note that setting works as well:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [33]: </span><span class="n">s1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [34]: </span><span class="n">s1</span>
<span class="gr">Out[34]: </span>
<span class="go">a    1.07577</span>
<span class="go">b   -0.10905</span>
<span class="go">c    0.00000</span>
<span class="go">d    0.00000</span>
<span class="go">e    0.00000</span>
<span class="go">f    0.00000</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>With a DataFrame</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [35]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....:</span>                 <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">),</span>
<span class="gp">   ....:</span>                 <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">))</span>
<span class="gp">   ....:</span> 

<span class="gp">In [36]: </span><span class="n">df1</span>
<span class="gr">Out[36]: </span>
<span class="go">          A         B         C         D</span>
<span class="go">a -1.776904 -0.968914 -1.294524  0.413738</span>
<span class="go">b  0.276662 -0.472035 -0.013960 -0.362543</span>
<span class="go">c -0.006154 -0.923061  0.895717  0.805244</span>
<span class="go">d -1.206412  2.565646  1.431256  1.340309</span>
<span class="go">e -1.170299 -0.226169  0.410835  0.813850</span>
<span class="go">f  0.132003 -0.827317 -0.076467 -1.187678</span>

<span class="go">[6 rows x 4 columns]</span>

<span class="gp">In [37]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">],:]</span>
<span class="gr">Out[37]: </span>
<span class="go">          A         B         C         D</span>
<span class="go">a -1.776904 -0.968914 -1.294524  0.413738</span>
<span class="go">b  0.276662 -0.472035 -0.013960 -0.362543</span>
<span class="go">d -1.206412  2.565646  1.431256  1.340309</span>

<span class="go">[3 rows x 4 columns]</span>
</pre></div>
</div>
<p>Accessing via label slices</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [38]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;d&#39;</span><span class="p">:,</span><span class="s">&#39;A&#39;</span><span class="p">:</span><span class="s">&#39;C&#39;</span><span class="p">]</span>
<span class="gr">Out[38]: </span>
<span class="go">          A         B         C</span>
<span class="go">d -1.206412  2.565646  1.431256</span>
<span class="go">e -1.170299 -0.226169  0.410835</span>
<span class="go">f  0.132003 -0.827317 -0.076467</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<p>For getting a cross section using a label (equiv to <tt class="docutils literal"><span class="pre">df.xs('a')</span></tt>)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [39]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="gr">Out[39]: </span>
<span class="go">A   -1.776904</span>
<span class="go">B   -0.968914</span>
<span class="go">C   -1.294524</span>
<span class="go">D    0.413738</span>
<span class="go">Name: a, dtype: float64</span>
</pre></div>
</div>
<p>For getting values with a boolean array</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [40]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span>
<span class="gr">Out[40]: </span>
<span class="go">A    False</span>
<span class="go">B    False</span>
<span class="go">C    False</span>
<span class="go">D     True</span>
<span class="go">Name: a, dtype: bool</span>

<span class="gp">In [41]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="gr">Out[41]: </span>
<span class="go">          D</span>
<span class="go">a  0.413738</span>
<span class="go">b -0.362543</span>
<span class="go">c  0.805244</span>
<span class="go">d  1.340309</span>
<span class="go">e  0.813850</span>
<span class="go">f -1.187678</span>

<span class="go">[6 rows x 1 columns]</span>
</pre></div>
</div>
<p>For getting a value explicity (equiv to deprecated <tt class="docutils literal"><span class="pre">df.get_value('a','A')</span></tt>)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># this is also equivalent to ``df1.at[&#39;a&#39;,&#39;A&#39;]``</span>
<span class="gp">In [42]: </span><span class="n">df1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">]</span>
<span class="gr">Out[42]: </span><span class="o">-</span><span class="mf">1.7769037169718671</span>
</pre></div>
</div>
</div>
<div class="section" id="selection-by-position">
<span id="indexing-integer"></span><h2>Selection By Position<a class="headerlink" href="#selection-by-position" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Whether a copy or a reference is returned for a setting operation, may depend on the context.
This is sometimes called <tt class="docutils literal"><span class="pre">chained</span> <span class="pre">assignment</span></tt> and should be avoided.
See <a class="reference internal" href="#indexing-view-versus-copy"><em>Returning a View versus Copy</em></a></p>
</div>
<p>Pandas provides a suite of methods in order to get <strong>purely integer based indexing</strong>. The semantics follow closely python and numpy slicing. These are <tt class="docutils literal"><span class="pre">0-based</span></tt> indexing. When slicing, the start bounds is <em>included</em>, while the upper bound is <em>excluded</em>. Trying to use a non-integer, even a <strong>valid</strong> label will raise a <tt class="docutils literal"><span class="pre">IndexError</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">.iloc</span></tt> attribute is the primary access method. The following are valid inputs:</p>
<ul class="simple">
<li>An integer e.g. <tt class="docutils literal"><span class="pre">5</span></tt></li>
<li>A list or array of integers <tt class="docutils literal"><span class="pre">[4,</span> <span class="pre">3,</span> <span class="pre">0]</span></tt></li>
<li>A slice object with ints <tt class="docutils literal"><span class="pre">1:7</span></tt></li>
</ul>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [43]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)))</span>

<span class="gp">In [44]: </span><span class="n">s1</span>
<span class="gr">Out[44]: </span>
<span class="go">0    1.130127</span>
<span class="go">2   -1.436737</span>
<span class="go">4   -1.413681</span>
<span class="go">6    1.607920</span>
<span class="go">8    1.024180</span>
<span class="go">dtype: float64</span>

<span class="gp">In [45]: </span><span class="n">s1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[45]: </span>
<span class="go">0    1.130127</span>
<span class="go">2   -1.436737</span>
<span class="go">4   -1.413681</span>
<span class="go">dtype: float64</span>

<span class="gp">In [46]: </span><span class="n">s1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[46]: </span><span class="mf">1.6079204745847746</span>
</pre></div>
</div>
<p>Note that setting works as well:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [47]: </span><span class="n">s1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [48]: </span><span class="n">s1</span>
<span class="gr">Out[48]: </span>
<span class="go">0    0.00000</span>
<span class="go">2    0.00000</span>
<span class="go">4    0.00000</span>
<span class="go">6    1.60792</span>
<span class="go">8    1.02418</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>With a DataFrame</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [49]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....:</span>                 <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span>
<span class="gp">   ....:</span>                 <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">2</span><span class="p">)))</span>
<span class="gp">   ....:</span> 

<span class="gp">In [50]: </span><span class="n">df1</span>
<span class="gr">Out[50]: </span>
<span class="go">           0         2         4         6</span>
<span class="go">0   0.569605  0.875906 -2.211372  0.974466</span>
<span class="go">2  -2.006747 -0.410001 -0.078638  0.545952</span>
<span class="go">4  -1.219217 -1.226825  0.769804 -1.281247</span>
<span class="go">6  -0.727707 -0.121306 -0.097883  0.695775</span>
<span class="go">8   0.341734  0.959726 -1.110336 -0.619976</span>
<span class="go">10  0.149748 -0.732339  0.687738  0.176444</span>

<span class="go">[6 rows x 4 columns]</span>
</pre></div>
</div>
<p>Select via integer slicing</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [51]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[51]: </span>
<span class="go">          0         2         4         6</span>
<span class="go">0  0.569605  0.875906 -2.211372  0.974466</span>
<span class="go">2 -2.006747 -0.410001 -0.078638  0.545952</span>
<span class="go">4 -1.219217 -1.226825  0.769804 -1.281247</span>

<span class="go">[3 rows x 4 columns]</span>

<span class="gp">In [52]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gr">Out[52]: </span>
<span class="go">          4         6</span>
<span class="go">2 -0.078638  0.545952</span>
<span class="go">4  0.769804 -1.281247</span>
<span class="go">6 -0.097883  0.695775</span>
<span class="go">8 -1.110336 -0.619976</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
<p>Select via integer list</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [53]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>
<span class="gr">Out[53]: </span>
<span class="go">           2         6</span>
<span class="go">2  -0.410001  0.545952</span>
<span class="go">6  -0.121306  0.695775</span>
<span class="go">10 -0.732339  0.176444</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>For slicing rows explicitly (equiv to deprecated <tt class="docutils literal"><span class="pre">df.irow(slice(1,3))</span></tt>).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [54]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">,:]</span>
<span class="gr">Out[54]: </span>
<span class="go">          0         2         4         6</span>
<span class="go">2 -2.006747 -0.410001 -0.078638  0.545952</span>
<span class="go">4 -1.219217 -1.226825  0.769804 -1.281247</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
<p>For slicing columns explicitly (equiv to deprecated <tt class="docutils literal"><span class="pre">df.icol(slice(1,3))</span></tt>).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [55]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[55]: </span>
<span class="go">           2         4</span>
<span class="go">0   0.875906 -2.211372</span>
<span class="go">2  -0.410001 -0.078638</span>
<span class="go">4  -1.226825  0.769804</span>
<span class="go">6  -0.121306 -0.097883</span>
<span class="go">8   0.959726 -1.110336</span>
<span class="go">10 -0.732339  0.687738</span>

<span class="go">[6 rows x 2 columns]</span>
</pre></div>
</div>
<p>For getting a scalar via integer position (equiv to deprecated <tt class="docutils literal"><span class="pre">df.get_value(1,1)</span></tt>)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># this is also equivalent to ``df1.iat[1,1]``</span>
<span class="gp">In [56]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gr">Out[56]: </span><span class="o">-</span><span class="mf">0.41000056806065832</span>
</pre></div>
</div>
<p>For getting a cross section using an integer position (equiv to <tt class="docutils literal"><span class="pre">df.xs(1)</span></tt>)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [57]: </span><span class="n">df1</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gr">Out[57]: </span>
<span class="go">0   -2.006747</span>
<span class="go">2   -0.410001</span>
<span class="go">4   -0.078638</span>
<span class="go">6    0.545952</span>
<span class="go">Name: 2, dtype: float64</span>
</pre></div>
</div>
<p>There is one signficant departure from standard python/numpy slicing semantics.
python/numpy allow slicing past the end of an array without an associated error.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># these are allowed in python/numpy.</span>
<span class="gp">In [58]: </span><span class="n">x</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;abcdef&#39;</span><span class="p">)</span>

<span class="gp">In [59]: </span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gr">Out[59]: </span><span class="p">[</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">]</span>

<span class="gp">In [60]: </span><span class="n">x</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="gr">Out[60]: </span><span class="p">[]</span>
</pre></div>
</div>
<p>Pandas will detect this and raise <tt class="docutils literal"><span class="pre">IndexError</span></tt>, rather than return an empty structure.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
<span class="go">IndexError: out-of-bounds on slice (end)</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-with-enlargement">
<span id="indexing-basics-partial-setting"></span><h2>Setting With Enlargement<a class="headerlink" href="#setting-with-enlargement" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 0.13.</span></p>
<p>The <tt class="docutils literal"><span class="pre">.loc/.ix/[]</span></tt> operations can perform enlargement when setting a non-existant key for that axis.</p>
<p>In the <tt class="docutils literal"><span class="pre">Series</span></tt> case this is effectively an appending operation</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [61]: </span><span class="n">se</span> <span class="o">=</span> <span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>

<span class="gp">In [62]: </span><span class="n">se</span>
<span class="gr">Out[62]: </span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [63]: </span><span class="n">se</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="mf">5.</span>

<span class="gp">In [64]: </span><span class="n">se</span>
<span class="gr">Out[64]: </span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">5    5</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>A <tt class="docutils literal"><span class="pre">DataFrame</span></tt> can be enlarged on either axis via <tt class="docutils literal"><span class="pre">.loc</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [65]: </span><span class="n">dfi</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">   ....:</span>                 <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">])</span>
<span class="gp">   ....:</span> 

<span class="gp">In [66]: </span><span class="n">dfi</span>
<span class="gr">Out[66]: </span>
<span class="go">   A  B</span>
<span class="go">0  0  1</span>
<span class="go">1  2  3</span>
<span class="go">2  4  5</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [67]: </span><span class="n">dfi</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s">&#39;C&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dfi</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s">&#39;A&#39;</span><span class="p">]</span>

<span class="gp">In [68]: </span><span class="n">dfi</span>
<span class="gr">Out[68]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  0  1  0</span>
<span class="go">1  2  3  2</span>
<span class="go">2  4  5  4</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<p>This is like an <tt class="docutils literal"><span class="pre">append</span></tt> operation on the <tt class="docutils literal"><span class="pre">DataFrame</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [69]: </span><span class="n">dfi</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span>

<span class="gp">In [70]: </span><span class="n">dfi</span>
<span class="gr">Out[70]: </span>
<span class="go">   A  B  C</span>
<span class="go">0  0  1  0</span>
<span class="go">1  2  3  2</span>
<span class="go">2  4  5  4</span>
<span class="go">3  5  5  5</span>

<span class="go">[4 rows x 3 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="fast-scalar-value-getting-and-setting">
<span id="indexing-basics-get-value"></span><h2>Fast scalar value getting and setting<a class="headerlink" href="#fast-scalar-value-getting-and-setting" title="Permalink to this headline">¶</a></h2>
<p>Since indexing with <tt class="docutils literal"><span class="pre">[]</span></tt> must handle a lot of cases (single-label access,
slicing, boolean indexing, etc.), it has a bit of overhead in order to figure
out what you&#8217;re asking for. If you only want to access a scalar value, the
fastest way is to use the <tt class="docutils literal"><span class="pre">at</span></tt> and <tt class="docutils literal"><span class="pre">iat</span></tt> methods, which are implemented on
all of the data structures.</p>
<p>Similary to <tt class="docutils literal"><span class="pre">loc</span></tt>, <tt class="docutils literal"><span class="pre">at</span></tt> provides <strong>label</strong> based scalar lookups, while, <tt class="docutils literal"><span class="pre">iat</span></tt> provides <strong>integer</strong> based lookups analagously to <tt class="docutils literal"><span class="pre">iloc</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [71]: </span><span class="n">s</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="gr">Out[71]: </span><span class="mf">0.1136484096888855</span>

<span class="gp">In [72]: </span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="s">&#39;A&#39;</span><span class="p">]</span>
<span class="gr">Out[72]: </span><span class="mf">0.1136484096888855</span>

<span class="gp">In [73]: </span><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gr">Out[73]: </span><span class="o">-</span><span class="mf">0.70677113363008448</span>
</pre></div>
</div>
<p>You can also set using these same indexers.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [74]: </span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="s">&#39;E&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>

<span class="gp">In [75]: </span><span class="n">df</span><span class="o">.</span><span class="n">iat</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">at</span></tt> may enlarge the object in-place as above if the indexer is missing.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [76]: </span><span class="n">df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">dates</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span>

<span class="gp">In [77]: </span><span class="n">df</span>
<span class="gr">Out[77]: </span>
<span class="go">                   A         B         C         D   E   0</span>
<span class="go">2000-01-01 -0.282863  0.469112 -1.509059 -1.135632 NaN NaN</span>
<span class="go">2000-01-02 -0.173215  1.212112  0.119209 -1.044236 NaN NaN</span>
<span class="go">2000-01-03 -2.104569 -0.861849 -0.494929  1.071804 NaN NaN</span>
<span class="go">2000-01-04  7.000000  0.721555 -1.039575  0.271860 NaN NaN</span>
<span class="go">2000-01-05  0.567020 -0.424972  0.276232 -1.087401 NaN NaN</span>
<span class="go">2000-01-06  0.113648 -0.673690 -1.478427  0.524988   7 NaN</span>
<span class="go">2000-01-07  0.577046  0.404705 -1.715002 -1.039268 NaN NaN</span>
<span class="go">2000-01-08 -1.157892 -0.370647 -1.344312  0.844885 NaN NaN</span>
<span class="go">2000-01-09       NaN       NaN       NaN       NaN NaN   7</span>

<span class="go">[9 rows x 6 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="boolean-indexing">
<h2>Boolean indexing<a class="headerlink" href="#boolean-indexing" title="Permalink to this headline">¶</a></h2>
<p id="indexing-boolean">Another common operation is the use of boolean vectors to filter the data.
The operators are: <tt class="docutils literal"><span class="pre">|</span></tt> for <tt class="docutils literal"><span class="pre">or</span></tt>, <tt class="docutils literal"><span class="pre">&amp;</span></tt> for <tt class="docutils literal"><span class="pre">and</span></tt>, and <tt class="docutils literal"><span class="pre">~</span></tt> for <tt class="docutils literal"><span class="pre">not</span></tt>. These <strong>must</strong> be grouped by using parentheses.</p>
<p>Using a boolean vector to index a Series works exactly as in a numpy ndarray:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [78]: </span><span class="n">s</span><span class="p">[</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gr">Out[78]: </span>
<span class="go">2000-01-05    0.567020</span>
<span class="go">2000-01-06    0.113648</span>
<span class="go">2000-01-07    0.577046</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>

<span class="gp">In [79]: </span><span class="n">s</span><span class="p">[(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">s</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">)]</span>
<span class="gr">Out[79]: </span>
<span class="go">2000-01-01   -0.282863</span>
<span class="go">2000-01-02   -0.173215</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>

<span class="gp">In [80]: </span><span class="n">s</span><span class="p">[(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)]</span>
<span class="gr">Out[80]: </span>
<span class="go">2000-01-03   -2.104569</span>
<span class="go">2000-01-08   -1.157892</span>
<span class="go">Name: A, dtype: float64</span>

<span class="gp">In [81]: </span><span class="n">s</span><span class="p">[</span><span class="o">~</span><span class="p">(</span><span class="n">s</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)]</span>
<span class="gr">Out[81]: </span>
<span class="go">2000-01-05    0.567020</span>
<span class="go">2000-01-06    0.113648</span>
<span class="go">2000-01-07    0.577046</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>
</pre></div>
</div>
<p>You may select rows from a DataFrame using a boolean vector the same length as
the DataFrame&#8217;s index (for example, something derived from one of the columns
of the DataFrame):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [82]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gr">Out[82]: </span>
<span class="go">                   A         B         C         D   E   0</span>
<span class="go">2000-01-04  7.000000  0.721555 -1.039575  0.271860 NaN NaN</span>
<span class="go">2000-01-05  0.567020 -0.424972  0.276232 -1.087401 NaN NaN</span>
<span class="go">2000-01-06  0.113648 -0.673690 -1.478427  0.524988   7 NaN</span>
<span class="go">2000-01-07  0.577046  0.404705 -1.715002 -1.039268 NaN NaN</span>

<span class="go">[4 rows x 6 columns]</span>
</pre></div>
</div>
<p>List comprehensions and <tt class="docutils literal"><span class="pre">map</span></tt> method of Series can also be used to produce
more complex criteria:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [83]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;a&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;three&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;six&#39;</span><span class="p">],</span>
<span class="gp">   ....:</span>                  <span class="s">&#39;b&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">   ....:</span>                  <span class="s">&#39;c&#39;</span> <span class="p">:</span> <span class="n">randn</span><span class="p">(</span><span class="mi">7</span><span class="p">)})</span>
<span class="gp">   ....:</span> 

<span class="c"># only want &#39;two&#39; or &#39;three&#39;</span>
<span class="gp">In [84]: </span><span class="n">criterion</span> <span class="o">=</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">))</span>

<span class="gp">In [85]: </span><span class="n">df2</span><span class="p">[</span><span class="n">criterion</span><span class="p">]</span>
<span class="gr">Out[85]: </span>
<span class="go">       a  b         c</span>
<span class="go">2    two  y  0.301624</span>
<span class="go">3  three  x -2.179861</span>
<span class="go">4    two  y -1.369849</span>

<span class="go">[3 rows x 3 columns]</span>

<span class="c"># equivalent but slower</span>
<span class="gp">In [86]: </span><span class="n">df2</span><span class="p">[[</span><span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;t&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df2</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">]]]</span>
<span class="gr">Out[86]: </span>
<span class="go">       a  b         c</span>
<span class="go">2    two  y  0.301624</span>
<span class="go">3  three  x -2.179861</span>
<span class="go">4    two  y -1.369849</span>

<span class="go">[3 rows x 3 columns]</span>

<span class="c"># Multiple criteria</span>
<span class="gp">In [87]: </span><span class="n">df2</span><span class="p">[</span><span class="n">criterion</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;x&#39;</span><span class="p">)]</span>
<span class="gr">Out[87]: </span>
<span class="go">       a  b         c</span>
<span class="go">3  three  x -2.179861</span>

<span class="go">[1 rows x 3 columns]</span>
</pre></div>
</div>
<p>Note, with the choice methods <a class="reference internal" href="#indexing-label"><em>Selection by Label</em></a>, <a class="reference internal" href="#indexing-integer"><em>Selection by Position</em></a>,
and <a class="reference internal" href="#indexing-advanced"><em>Advanced Indexing</em></a> you may select along more than one axis using boolean vectors combined with other indexing expressions.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [88]: </span><span class="n">df2</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">criterion</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df2</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;x&#39;</span><span class="p">),</span><span class="s">&#39;b&#39;</span><span class="p">:</span><span class="s">&#39;c&#39;</span><span class="p">]</span>
<span class="gr">Out[88]: </span>
<span class="go">   b         c</span>
<span class="go">3  x -2.179861</span>

<span class="go">[1 rows x 2 columns]</span>
</pre></div>
</div>
<div class="section" id="indexing-with-isin">
<span id="indexing-basics-indexing-isin"></span><h3>Indexing with isin<a class="headerlink" href="#indexing-with-isin" title="Permalink to this headline">¶</a></h3>
<p>Consider the <tt class="docutils literal"><span class="pre">isin</span></tt> method of Series, which returns a boolean vector that is
true wherever the Series elements exist in the passed list. This allows you to
select rows where one or more columns have values you want:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [89]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)[::</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int64&#39;</span><span class="p">)</span>

<span class="gp">In [90]: </span><span class="n">s</span>
<span class="gr">Out[90]: </span>
<span class="go">4    0</span>
<span class="go">3    1</span>
<span class="go">2    2</span>
<span class="go">1    3</span>
<span class="go">0    4</span>
<span class="go">dtype: int64</span>

<span class="gp">In [91]: </span><span class="n">s</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gr">Out[91]: </span>
<span class="go">4    False</span>
<span class="go">3    False</span>
<span class="go">2     True</span>
<span class="go">1    False</span>
<span class="go">0     True</span>
<span class="go">dtype: bool</span>

<span class="gp">In [92]: </span><span class="n">s</span><span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])]</span>
<span class="gr">Out[92]: </span>
<span class="go">2    2</span>
<span class="go">0    4</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>DataFrame also has an <tt class="docutils literal"><span class="pre">isin</span></tt> method.  When calling <tt class="docutils literal"><span class="pre">isin</span></tt>, pass a set of
values as either an array or dict.  If values is an array, <tt class="docutils literal"><span class="pre">isin</span></tt> returns
a DataFrame of booleans that is the same shape as the original DataFrame, with True
wherever the element is in the sequence of values.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [93]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;vals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s">&#39;ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">],</span>
<span class="gp">   ....:</span>                 <span class="s">&#39;ids2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">]})</span>
<span class="gp">   ....:</span> 

<span class="gp">In [94]: </span><span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="gp">In [95]: </span><span class="n">df</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gr">Out[95]: </span>
<span class="go">     ids   ids2   vals</span>
<span class="go">0   True   True   True</span>
<span class="go">1   True  False  False</span>
<span class="go">2  False  False   True</span>
<span class="go">3  False  False  False</span>

<span class="go">[4 rows x 3 columns]</span>
</pre></div>
</div>
<p>Oftentimes you&#8217;ll want to match certain values with certain columns.
Just make values a <tt class="docutils literal"><span class="pre">dict</span></tt> where the key is the column, and the value is
a list of items you want to check for.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [96]: </span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="s">&#39;vals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [97]: </span><span class="n">df</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gr">Out[97]: </span>
<span class="go">     ids   ids2   vals</span>
<span class="go">0   True  False   True</span>
<span class="go">1   True  False  False</span>
<span class="go">2  False  False   True</span>
<span class="go">3  False  False  False</span>

<span class="go">[4 rows x 3 columns]</span>
</pre></div>
</div>
<p>Combine DataFrame&#8217;s <tt class="docutils literal"><span class="pre">isin</span></tt> with the <tt class="docutils literal"><span class="pre">any()</span></tt> and <tt class="docutils literal"><span class="pre">all()</span></tt> methods to
quickly select subsets of your data that meet a given criteria.
To select a row where each column meets its own criterion:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [98]: </span><span class="n">values</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;ids&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="s">&#39;ids2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">],</span> <span class="s">&#39;vals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [99]: </span><span class="n">row_mask</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="gp">In [100]: </span><span class="n">df</span><span class="p">[</span><span class="n">row_mask</span><span class="p">]</span>
<span class="gr">Out[100]: </span>
<span class="go">  ids ids2  vals</span>
<span class="go">0   a    a     1</span>

<span class="go">[1 rows x 3 columns]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-where-method-and-masking">
<h2>The <a class="reference internal" href="generated/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><tt class="xref py py-meth docutils literal"><span class="pre">where()</span></tt></a> Method and Masking<a class="headerlink" href="#the-where-method-and-masking" title="Permalink to this headline">¶</a></h2>
<p>Selecting values from a Series with a boolean vector generally returns a
subset of the data. To guarantee that selection output has the same shape as
the original data, you can use the <tt class="docutils literal"><span class="pre">where</span></tt> method in <tt class="docutils literal"><span class="pre">Series</span></tt> and <tt class="docutils literal"><span class="pre">DataFrame</span></tt>.</p>
<p>To return only the selected rows</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [101]: </span><span class="n">s</span><span class="p">[</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gr">Out[101]: </span>
<span class="go">3    1</span>
<span class="go">2    2</span>
<span class="go">1    3</span>
<span class="go">0    4</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>To return a Series of the same shape as the original</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [102]: </span><span class="n">s</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">s</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[102]: </span>
<span class="go">4   NaN</span>
<span class="go">3     1</span>
<span class="go">2     2</span>
<span class="go">1     3</span>
<span class="go">0     4</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>Selecting values from a DataFrame with a boolean critierion now also preserves
input data shape. <tt class="docutils literal"><span class="pre">where</span></tt> is used under the hood as the implementation.
Equivalent is <tt class="docutils literal"><span class="pre">df.where(df</span> <span class="pre">&lt;</span> <span class="pre">0)</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [103]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span>
<span class="gr">Out[103]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -1.743161 -0.826591 -0.345352       NaN</span>
<span class="go">2000-01-02       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-03       NaN -0.317441 -1.236269       NaN</span>
<span class="go">2000-01-04 -0.487602 -0.082240 -2.182937       NaN</span>
<span class="go">2000-01-05       NaN       NaN       NaN -0.493662</span>
<span class="go">2000-01-06       NaN       NaN       NaN -0.023688</span>
<span class="go">2000-01-07       NaN       NaN       NaN -0.251905</span>
<span class="go">2000-01-08 -2.213588       NaN       NaN       NaN</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>In addition, <tt class="docutils literal"><span class="pre">where</span></tt> takes an optional <tt class="docutils literal"><span class="pre">other</span></tt> argument for replacement of
values where the condition is False, in the returned copy.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [104]: </span><span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">df</span><span class="p">)</span>
<span class="gr">Out[104]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -1.743161 -0.826591 -0.345352 -1.314232</span>
<span class="go">2000-01-02 -0.690579 -0.995761 -2.396780 -0.014871</span>
<span class="go">2000-01-03 -3.357427 -0.317441 -1.236269 -0.896171</span>
<span class="go">2000-01-04 -0.487602 -0.082240 -2.182937 -0.380396</span>
<span class="go">2000-01-05 -0.084844 -0.432390 -1.519970 -0.493662</span>
<span class="go">2000-01-06 -0.600178 -0.274230 -0.132885 -0.023688</span>
<span class="go">2000-01-07 -2.410179 -1.450520 -0.206053 -0.251905</span>
<span class="go">2000-01-08 -2.213588 -1.063327 -1.266143 -0.299368</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>You may wish to set values based on some boolean criteria.
This can be done intuitively like so:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [105]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [106]: </span><span class="n">s2</span><span class="p">[</span><span class="n">s2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [107]: </span><span class="n">s2</span>
<span class="gr">Out[107]: </span>
<span class="go">4    0</span>
<span class="go">3    1</span>
<span class="go">2    2</span>
<span class="go">1    3</span>
<span class="go">0    4</span>
<span class="go">dtype: int64</span>

<span class="gp">In [108]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [109]: </span><span class="n">df2</span><span class="p">[</span><span class="n">df2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [110]: </span><span class="n">df2</span>
<span class="gr">Out[110]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  0.000000  0.000000  0.000000  1.314232</span>
<span class="go">2000-01-02  0.690579  0.995761  2.396780  0.014871</span>
<span class="go">2000-01-03  3.357427  0.000000  0.000000  0.896171</span>
<span class="go">2000-01-04  0.000000  0.000000  0.000000  0.380396</span>
<span class="go">2000-01-05  0.084844  0.432390  1.519970  0.000000</span>
<span class="go">2000-01-06  0.600178  0.274230  0.132885  0.000000</span>
<span class="go">2000-01-07  2.410179  1.450520  0.206053  0.000000</span>
<span class="go">2000-01-08  0.000000  1.063327  1.266143  0.299368</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>By default, <tt class="docutils literal"><span class="pre">where</span></tt> returns a modified copy of the data. There is an
optional parameter <tt class="docutils literal"><span class="pre">inplace</span></tt> so that the original data can be modified
without creating a copy:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [111]: </span><span class="n">df_orig</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [112]: </span><span class="n">df_orig</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">df</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">);</span>

<span class="gp">In [113]: </span><span class="n">df_orig</span>
<span class="gr">Out[113]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  1.743161  0.826591  0.345352  1.314232</span>
<span class="go">2000-01-02  0.690579  0.995761  2.396780  0.014871</span>
<span class="go">2000-01-03  3.357427  0.317441  1.236269  0.896171</span>
<span class="go">2000-01-04  0.487602  0.082240  2.182937  0.380396</span>
<span class="go">2000-01-05  0.084844  0.432390  1.519970  0.493662</span>
<span class="go">2000-01-06  0.600178  0.274230  0.132885  0.023688</span>
<span class="go">2000-01-07  2.410179  1.450520  0.206053  0.251905</span>
<span class="go">2000-01-08  2.213588  1.063327  1.266143  0.299368</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p><strong>alignment</strong></p>
<p>Furthermore, <tt class="docutils literal"><span class="pre">where</span></tt> aligns the input boolean condition (ndarray or DataFrame),
such that partial selection with setting is possible. This is analagous to
partial setting via <tt class="docutils literal"><span class="pre">.ix</span></tt> (but on the contents rather than the axis labels)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [114]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [115]: </span><span class="n">df2</span><span class="p">[</span> <span class="n">df2</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>

<span class="gp">In [116]: </span><span class="n">df2</span>
<span class="gr">Out[116]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -1.743161 -0.826591 -0.345352  1.314232</span>
<span class="go">2000-01-02  3.000000  3.000000  3.000000  3.000000</span>
<span class="go">2000-01-03  3.000000 -0.317441 -1.236269  3.000000</span>
<span class="go">2000-01-04 -0.487602 -0.082240 -2.182937  3.000000</span>
<span class="go">2000-01-05  0.084844  0.432390  1.519970 -0.493662</span>
<span class="go">2000-01-06  0.600178  0.274230  0.132885 -0.023688</span>
<span class="go">2000-01-07  2.410179  1.450520  0.206053 -0.251905</span>
<span class="go">2000-01-08 -2.213588  1.063327  1.266143  0.299368</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.13.</span></p>
<p>Where can also accept <tt class="docutils literal"><span class="pre">axis</span></tt> and <tt class="docutils literal"><span class="pre">level</span></tt> parameters to align the input when
performing the <tt class="docutils literal"><span class="pre">where</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [117]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [118]: </span><span class="n">df2</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df2</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span><span class="n">df2</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;index&#39;</span><span class="p">)</span>
<span class="gr">Out[118]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -1.743161 -1.743161 -1.743161  1.314232</span>
<span class="go">2000-01-02  0.690579  0.995761  2.396780  0.014871</span>
<span class="go">2000-01-03  3.357427  3.357427  3.357427  0.896171</span>
<span class="go">2000-01-04 -0.487602 -0.487602 -0.487602  0.380396</span>
<span class="go">2000-01-05  0.084844  0.432390  1.519970  0.084844</span>
<span class="go">2000-01-06  0.600178  0.274230  0.132885  0.600178</span>
<span class="go">2000-01-07  2.410179  1.450520  0.206053  2.410179</span>
<span class="go">2000-01-08 -2.213588  1.063327  1.266143  0.299368</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>This is equivalent (but faster than) the following.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [119]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [120]: </span><span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span><span class="n">y</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">])</span>
<span class="gr">Out[120]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -1.743161 -1.743161 -1.743161  1.314232</span>
<span class="go">2000-01-02  0.690579  0.995761  2.396780  0.014871</span>
<span class="go">2000-01-03  3.357427  3.357427  3.357427  0.896171</span>
<span class="go">2000-01-04 -0.487602 -0.487602 -0.487602  0.380396</span>
<span class="go">2000-01-05  0.084844  0.432390  1.519970  0.084844</span>
<span class="go">2000-01-06  0.600178  0.274230  0.132885  0.600178</span>
<span class="go">2000-01-07  2.410179  1.450520  0.206053  2.410179</span>
<span class="go">2000-01-08 -2.213588  1.063327  1.266143  0.299368</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p><strong>mask</strong></p>
<p><tt class="docutils literal"><span class="pre">mask</span></tt> is the inverse boolean operation of <tt class="docutils literal"><span class="pre">where</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [121]: </span><span class="n">s</span><span class="o">.</span><span class="n">mask</span><span class="p">(</span><span class="n">s</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[121]: </span>
<span class="go">4   NaN</span>
<span class="go">3   NaN</span>
<span class="go">2   NaN</span>
<span class="go">1   NaN</span>
<span class="go">0   NaN</span>
<span class="go">dtype: float64</span>

<span class="gp">In [122]: </span><span class="n">df</span><span class="o">.</span><span class="n">mask</span><span class="p">(</span><span class="n">df</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[122]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01 -1.743161 -0.826591 -0.345352       NaN</span>
<span class="go">2000-01-02       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-03       NaN -0.317441 -1.236269       NaN</span>
<span class="go">2000-01-04 -0.487602 -0.082240 -2.182937       NaN</span>
<span class="go">2000-01-05       NaN       NaN       NaN -0.493662</span>
<span class="go">2000-01-06       NaN       NaN       NaN -0.023688</span>
<span class="go">2000-01-07       NaN       NaN       NaN -0.251905</span>
<span class="go">2000-01-08 -2.213588       NaN       NaN       NaN</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="the-query-method-experimental">
<span id="indexing-query"></span><h2>The <a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> Method (Experimental)<a class="headerlink" href="#the-query-method-experimental" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 0.13.</span></p>
<p><a class="reference internal" href="generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><tt class="xref py py-class docutils literal"><span class="pre">DataFrame</span></tt></a> objects have a <a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a>
method that allows selection using an expression.</p>
<p>You can get the value of the frame where column <tt class="docutils literal"><span class="pre">b</span></tt> has values
between the values of columns <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">c</span></tt>. For example:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [123]: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>

<span class="gp">In [124]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [125]: </span><span class="n">df</span>
<span class="gr">Out[125]: </span>
<span class="go">          a         b         c</span>
<span class="go">0  0.191519  0.622109  0.437728</span>
<span class="go">1  0.785359  0.779976  0.272593</span>
<span class="go">2  0.276464  0.801872  0.958139</span>
<span class="go">3  0.875933  0.357817  0.500995</span>
<span class="go">4  0.683463  0.712702  0.370251</span>
<span class="go">5  0.561196  0.503083  0.013768</span>
<span class="go">6  0.772827  0.882641  0.364886</span>
<span class="go">7  0.615396  0.075381  0.368824</span>
<span class="go">8  0.933140  0.651378  0.397203</span>
<span class="go">9  0.788730  0.316836  0.568099</span>

<span class="go">[10 rows x 3 columns]</span>

<span class="c"># pure python</span>
<span class="gp">In [126]: </span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">df</span><span class="o">.</span><span class="n">c</span><span class="p">)]</span>
<span class="gr">Out[126]: </span>
<span class="go">          a         b         c</span>
<span class="go">2  0.276464  0.801872  0.958139</span>

<span class="go">[1 rows x 3 columns]</span>

<span class="c"># query</span>
<span class="gp">In [127]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;(a &lt; b) &amp; (b &lt; c)&#39;</span><span class="p">)</span>
<span class="gr">Out[127]: </span>
<span class="go">          a         b         c</span>
<span class="go">2  0.276464  0.801872  0.958139</span>

<span class="go">[1 rows x 3 columns]</span>
</pre></div>
</div>
<p>Do the same thing but fallback on a named index if there is no column
with the name <tt class="docutils literal"><span class="pre">a</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [128]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;bc&#39;</span><span class="p">))</span>

<span class="gp">In [129]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;a&#39;</span>

<span class="gp">In [130]: </span><span class="n">df</span>
<span class="gr">Out[130]: </span>
<span class="go">   b  c</span>
<span class="go">a      </span>
<span class="go">0  2  3</span>
<span class="go">1  4  1</span>
<span class="go">2  4  0</span>
<span class="go">3  4  1</span>
<span class="go">4  1  4</span>
<span class="go">5  1  4</span>
<span class="go">6  0  1</span>
<span class="go">7  0  0</span>
<span class="go">8  4  0</span>
<span class="go">9  4  2</span>

<span class="go">[10 rows x 2 columns]</span>

<span class="gp">In [131]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a &lt; b and b &lt; c&#39;</span><span class="p">)</span>
<span class="gr">Out[131]: </span>
<span class="go">   b  c</span>
<span class="go">a      </span>
<span class="go">0  2  3</span>

<span class="go">[1 rows x 2 columns]</span>
</pre></div>
</div>
<p>If instead you don&#8217;t want to or cannot name your index, you can use the name
<tt class="docutils literal"><span class="pre">index</span></tt> in your query expression:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [132]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;bc&#39;</span><span class="p">))</span>

<span class="gp">In [133]: </span><span class="n">df</span>
<span class="gr">Out[133]: </span>
<span class="go">   b  c</span>
<span class="go">0  3  1</span>
<span class="go">1  2  5</span>
<span class="go">2  2  5</span>
<span class="go">3  6  7</span>
<span class="go">4  4  3</span>
<span class="go">5  5  6</span>
<span class="go">6  4  6</span>
<span class="go">7  2  4</span>
<span class="go">8  2  7</span>
<span class="go">9  9  7</span>

<span class="go">[10 rows x 2 columns]</span>

<span class="gp">In [134]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;index &lt; b &lt; c&#39;</span><span class="p">)</span>
<span class="gr">Out[134]: </span>
<span class="go">   b  c</span>
<span class="go">1  2  5</span>
<span class="go">3  6  7</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
<div class="section" id="multiindex-query-syntax">
<h3><tt class="xref py py-class docutils literal"><span class="pre">MultiIndex</span></tt> <a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> Syntax<a class="headerlink" href="#multiindex-query-syntax" title="Permalink to this headline">¶</a></h3>
<p>You can also use the levels of a <tt class="docutils literal"><span class="pre">DataFrame</span></tt> with a
<tt class="xref py py-class docutils literal"><span class="pre">MultiIndex</span></tt> as if they were columns in the frame:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [135]: </span><span class="kn">import</span> <span class="nn">pandas.util.testing</span> <span class="kn">as</span> <span class="nn">tm</span>

<span class="gp">In [136]: </span><span class="n">n</span> <span class="o">=</span> <span class="mi">10</span>

<span class="gp">In [137]: </span><span class="n">colors</span> <span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="s">&#39;green&#39;</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>

<span class="gp">In [138]: </span><span class="n">foods</span> <span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s">&#39;eggs&#39;</span><span class="p">,</span> <span class="s">&#39;ham&#39;</span><span class="p">],</span> <span class="n">size</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>

<span class="gp">In [139]: </span><span class="n">colors</span>
<span class="gr">Out[139]: </span>
<span class="go">array([&#39;green&#39;, &#39;red&#39;, &#39;green&#39;, &#39;red&#39;, &#39;green&#39;, &#39;red&#39;, &#39;green&#39;, &#39;red&#39;,</span>
<span class="go">       &#39;green&#39;, &#39;red&#39;], </span>
<span class="go">      dtype=&#39;|S5&#39;)</span>

<span class="gp">In [140]: </span><span class="n">foods</span>
<span class="gr">Out[140]: </span>
<span class="go">array([&#39;ham&#39;, &#39;eggs&#39;, &#39;ham&#39;, &#39;eggs&#39;, &#39;ham&#39;, &#39;eggs&#39;, &#39;ham&#39;, &#39;ham&#39;, &#39;ham&#39;,</span>
<span class="go">       &#39;ham&#39;], </span>
<span class="go">      dtype=&#39;|S4&#39;)</span>

<span class="gp">In [141]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">([</span><span class="n">colors</span><span class="p">,</span> <span class="n">foods</span><span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">,</span> <span class="s">&#39;food&#39;</span><span class="p">])</span>

<span class="gp">In [142]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

<span class="gp">In [143]: </span><span class="n">df</span>
<span class="gr">Out[143]: </span>
<span class="go">                   0         1</span>
<span class="go">color food                    </span>
<span class="go">green ham   0.565738  1.545659</span>
<span class="go">red   eggs -0.974236 -0.070345</span>
<span class="go">green ham   0.307969 -0.208499</span>
<span class="go">red   eggs  1.033801 -2.400454</span>
<span class="go">green ham   2.030604 -1.142631</span>
<span class="go">red   eggs  0.211883  0.704721</span>
<span class="go">green ham  -0.785435  0.462060</span>
<span class="go">red   ham   0.704228  0.523508</span>
<span class="go">green ham  -0.926254  2.007843</span>
<span class="go">red   ham   0.226963 -1.152659</span>

<span class="go">[10 rows x 2 columns]</span>

<span class="gp">In [144]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;color == &quot;red&quot;&#39;</span><span class="p">)</span>
<span class="gr">Out[144]: </span>
<span class="go">                   0         1</span>
<span class="go">color food                    </span>
<span class="go">red   eggs -0.974236 -0.070345</span>
<span class="go">      eggs  1.033801 -2.400454</span>
<span class="go">      eggs  0.211883  0.704721</span>
<span class="go">      ham   0.704228  0.523508</span>
<span class="go">      ham   0.226963 -1.152659</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>If the levels of the <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> are unnamed, you can refer to them using
special names:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [145]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">]</span>

<span class="gp">In [146]: </span><span class="n">df</span>
<span class="gr">Out[146]: </span>
<span class="go">                   0         1</span>
<span class="go">green ham   0.565738  1.545659</span>
<span class="go">red   eggs -0.974236 -0.070345</span>
<span class="go">green ham   0.307969 -0.208499</span>
<span class="go">red   eggs  1.033801 -2.400454</span>
<span class="go">green ham   2.030604 -1.142631</span>
<span class="go">red   eggs  0.211883  0.704721</span>
<span class="go">green ham  -0.785435  0.462060</span>
<span class="go">red   ham   0.704228  0.523508</span>
<span class="go">green ham  -0.926254  2.007843</span>
<span class="go">red   ham   0.226963 -1.152659</span>

<span class="go">[10 rows x 2 columns]</span>

<span class="gp">In [147]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;ilevel_0 == &quot;red&quot;&#39;</span><span class="p">)</span>
<span class="gr">Out[147]: </span>
<span class="go">                 0         1</span>
<span class="go">red eggs -0.974236 -0.070345</span>
<span class="go">    eggs  1.033801 -2.400454</span>
<span class="go">    eggs  0.211883  0.704721</span>
<span class="go">    ham   0.704228  0.523508</span>
<span class="go">    ham   0.226963 -1.152659</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>The convention is <tt class="docutils literal"><span class="pre">ilevel_0</span></tt>, which means &#8220;index level 0&#8221; for the 0th level
of the <tt class="docutils literal"><span class="pre">index</span></tt>.</p>
</div>
<div class="section" id="query-use-cases">
<h3><a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> Use Cases<a class="headerlink" href="#query-use-cases" title="Permalink to this headline">¶</a></h3>
<p>A use case for <a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> is when you have a collection of
<a class="reference internal" href="generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><tt class="xref py py-class docutils literal"><span class="pre">DataFrame</span></tt></a> objects that have a subset of column names (or index
levels/names) in common. You can pass the same query to both frames <em>without</em>
having to specify which frame you&#8217;re interested in querying</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [148]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [149]: </span><span class="n">df</span>
<span class="gr">Out[149]: </span>
<span class="go">          a         b         c</span>
<span class="go">0  0.528224  0.951429  0.480359</span>
<span class="go">1  0.502560  0.536878  0.819202</span>
<span class="go">2  0.057116  0.669422  0.767117</span>
<span class="go">3  0.708115  0.796867  0.557761</span>
<span class="go">4  0.965837  0.147157  0.029647</span>
<span class="go">5  0.593893  0.114066  0.950810</span>
<span class="go">6  0.325707  0.193619  0.457812</span>
<span class="go">7  0.920403  0.879069  0.252616</span>
<span class="go">8  0.348009  0.182589  0.901796</span>
<span class="go">9  0.706528  0.726658  0.900088</span>

<span class="go">[10 rows x 3 columns]</span>

<span class="gp">In [150]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [151]: </span><span class="n">df2</span>
<span class="gr">Out[151]: </span>
<span class="go">           a         b         c</span>
<span class="go">0   0.779164  0.599155  0.291125</span>
<span class="go">1   0.151395  0.335175  0.657552</span>
<span class="go">2   0.073343  0.055006  0.323195</span>
<span class="go">3   0.590482  0.853899  0.287062</span>
<span class="go">4   0.173067  0.134021  0.994654</span>
<span class="go">5   0.179498  0.317547  0.568291</span>
<span class="go">6   0.009349  0.900649  0.977241</span>
<span class="go">7   0.556895  0.084774  0.333002</span>
<span class="go">8   0.728429  0.142435  0.552469</span>
<span class="go">9   0.273043  0.974495  0.667787</span>
<span class="go">10  0.255653  0.108311  0.776181</span>
<span class="go">11  0.782478  0.761604  0.914403</span>

<span class="go">[12 rows x 3 columns]</span>

<span class="gp">In [152]: </span><span class="n">expr</span> <span class="o">=</span> <span class="s">&#39;0.0 &lt;= a &lt;= c &lt;= 0.5&#39;</span>

<span class="gp">In [153]: </span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">frame</span><span class="p">:</span> <span class="n">frame</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">expr</span><span class="p">),</span> <span class="p">[</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span>
<span class="gr">Out[153]: </span>
<span class="go">[          a         b         c</span>
<span class="go"> 6  0.325707  0.193619  0.457812</span>
<span class="go"> </span>
<span class="go"> [1 rows x 3 columns],           a         b         c</span>
<span class="go"> 2  0.073343  0.055006  0.323195</span>
<span class="go"> </span>
<span class="go"> [1 rows x 3 columns]]</span>
</pre></div>
</div>
</div>
<div class="section" id="query-python-versus-pandas-syntax-comparison">
<h3><a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> Python versus pandas Syntax Comparison<a class="headerlink" href="#query-python-versus-pandas-syntax-comparison" title="Permalink to this headline">¶</a></h3>
<p>Full numpy-like syntax</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [154]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [155]: </span><span class="n">df</span>
<span class="gr">Out[155]: </span>
<span class="go">   a  b  c</span>
<span class="go">0  2  3  1</span>
<span class="go">1  7  1  4</span>
<span class="go">2  7  3  8</span>
<span class="go">3  4  5  3</span>
<span class="go">4  8  8  8</span>
<span class="go">5  1  3  6</span>
<span class="go">6  8  9  1</span>
<span class="go">7  5  8  4</span>
<span class="go">8  1  1  1</span>
<span class="go">9  2  3  4</span>

<span class="go">[10 rows x 3 columns]</span>

<span class="gp">In [156]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;(a &lt; b) &amp; (b &lt; c)&#39;</span><span class="p">)</span>
<span class="gr">Out[156]: </span>
<span class="go">   a  b  c</span>
<span class="go">5  1  3  6</span>
<span class="go">9  2  3  4</span>

<span class="go">[2 rows x 3 columns]</span>

<span class="gp">In [157]: </span><span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">df</span><span class="o">.</span><span class="n">c</span><span class="p">)]</span>
<span class="gr">Out[157]: </span>
<span class="go">   a  b  c</span>
<span class="go">5  1  3  6</span>
<span class="go">9  2  3  4</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>Slightly nicer by removing the parentheses (by binding making comparison
operators bind tighter than <tt class="docutils literal"><span class="pre">&amp;</span></tt>/<tt class="docutils literal"><span class="pre">|</span></tt>)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [158]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a &lt; b &amp; b &lt; c&#39;</span><span class="p">)</span>
<span class="gr">Out[158]: </span>
<span class="go">   a  b  c</span>
<span class="go">5  1  3  6</span>
<span class="go">9  2  3  4</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>Use English instead of symbols</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [159]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a &lt; b and b &lt; c&#39;</span><span class="p">)</span>
<span class="gr">Out[159]: </span>
<span class="go">   a  b  c</span>
<span class="go">5  1  3  6</span>
<span class="go">9  2  3  4</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>Pretty close to how you might write it on paper</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [160]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a &lt; b &lt; c&#39;</span><span class="p">)</span>
<span class="gr">Out[160]: </span>
<span class="go">   a  b  c</span>
<span class="go">5  1  3  6</span>
<span class="go">9  2  3  4</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="the-in-and-not-in-operators">
<h3>The <tt class="docutils literal"><span class="pre">in</span></tt> and <tt class="docutils literal"><span class="pre">not</span> <span class="pre">in</span></tt> operators<a class="headerlink" href="#the-in-and-not-in-operators" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a> also supports special use of Python&#8217;s <tt class="docutils literal"><span class="pre">in</span></tt> and
<tt class="docutils literal"><span class="pre">not</span> <span class="pre">in</span></tt> comparison operators, providing a succint syntax for calling the
<tt class="docutils literal"><span class="pre">isin</span></tt> method of a <tt class="docutils literal"><span class="pre">Series</span></tt> or <tt class="docutils literal"><span class="pre">DataFrame</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># get all rows where columns &quot;a&quot; and &quot;b&quot; have overlapping values</span>
<span class="gp">In [161]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;aabbccddeeff&#39;</span><span class="p">),</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;aaaabbbbcccc&#39;</span><span class="p">),</span>
<span class="gp">   .....:</span>                 <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">),</span> <span class="s">&#39;d&#39;</span><span class="p">:</span> <span class="n">randint</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">)})</span>
<span class="gp">   .....:</span> 

<span class="gp">In [162]: </span><span class="n">df</span>
<span class="gr">Out[162]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  2</span>
<span class="go">1   a  a  3  5</span>
<span class="go">2   b  a  1  8</span>
<span class="go">3   b  a  1  8</span>
<span class="go">4   c  b  4  7</span>
<span class="go">5   c  b  0  5</span>
<span class="go">6   d  b  0  7</span>
<span class="go">7   d  b  2  0</span>
<span class="go">8   e  c  1  0</span>
<span class="go">9   e  c  4  6</span>
<span class="go">10  f  c  2  6</span>
<span class="go">11  f  c  3  1</span>

<span class="go">[12 rows x 4 columns]</span>

<span class="gp">In [163]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a in b&#39;</span><span class="p">)</span>
<span class="gr">Out[163]: </span>
<span class="go">   a  b  c  d</span>
<span class="go">0  a  a  2  2</span>
<span class="go">1  a  a  3  5</span>
<span class="go">2  b  a  1  8</span>
<span class="go">3  b  a  1  8</span>
<span class="go">4  c  b  4  7</span>
<span class="go">5  c  b  0  5</span>

<span class="go">[6 rows x 4 columns]</span>

<span class="c"># How you&#39;d do it in pure Python</span>
<span class="gp">In [164]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">)]</span>
<span class="gr">Out[164]: </span>
<span class="go">   a  b  c  d</span>
<span class="go">0  a  a  2  2</span>
<span class="go">1  a  a  3  5</span>
<span class="go">2  b  a  1  8</span>
<span class="go">3  b  a  1  8</span>
<span class="go">4  c  b  4  7</span>
<span class="go">5  c  b  0  5</span>

<span class="go">[6 rows x 4 columns]</span>

<span class="gp">In [165]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a not in b&#39;</span><span class="p">)</span>
<span class="gr">Out[165]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">6   d  b  0  7</span>
<span class="go">7   d  b  2  0</span>
<span class="go">8   e  c  1  0</span>
<span class="go">9   e  c  4  6</span>
<span class="go">10  f  c  2  6</span>
<span class="go">11  f  c  3  1</span>

<span class="go">[6 rows x 4 columns]</span>

<span class="c"># pure Python</span>
<span class="gp">In [166]: </span><span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">)]</span>
<span class="gr">Out[166]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">6   d  b  0  7</span>
<span class="go">7   d  b  2  0</span>
<span class="go">8   e  c  1  0</span>
<span class="go">9   e  c  4  6</span>
<span class="go">10  f  c  2  6</span>
<span class="go">11  f  c  3  1</span>

<span class="go">[6 rows x 4 columns]</span>
</pre></div>
</div>
<p>You can combine this with other expressions for very succinct queries:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># rows where cols a and b have overlapping values and col c&#39;s values are less than col d&#39;s</span>
<span class="gp">In [167]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a in b and c &lt; d&#39;</span><span class="p">)</span>
<span class="gr">Out[167]: </span>
<span class="go">   a  b  c  d</span>
<span class="go">1  a  a  3  5</span>
<span class="go">2  b  a  1  8</span>
<span class="go">3  b  a  1  8</span>
<span class="go">4  c  b  4  7</span>
<span class="go">5  c  b  0  5</span>

<span class="go">[5 rows x 4 columns]</span>

<span class="c"># pure Python</span>
<span class="gp">In [168]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">c</span> <span class="o">&lt;</span> <span class="n">df</span><span class="o">.</span><span class="n">d</span><span class="p">)]</span>
<span class="gr">Out[168]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">1   a  a  3  5</span>
<span class="go">2   b  a  1  8</span>
<span class="go">3   b  a  1  8</span>
<span class="go">4   c  b  4  7</span>
<span class="go">5   c  b  0  5</span>
<span class="go">6   d  b  0  7</span>
<span class="go">9   e  c  4  6</span>
<span class="go">10  f  c  2  6</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Note that <tt class="docutils literal"><span class="pre">in</span></tt> and <tt class="docutils literal"><span class="pre">not</span> <span class="pre">in</span></tt> are evaluated in Python, since <tt class="docutils literal"><span class="pre">numexpr</span></tt>
has no equivalent of this operation. However, <strong>only the</strong> <tt class="docutils literal"><span class="pre">in</span></tt>/<tt class="docutils literal"><span class="pre">not</span> <span class="pre">in</span></tt>
<strong>expression itself</strong> is evaluated in vanilla Python. For example, in the
expression</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a in b + c + d&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p class="last"><tt class="docutils literal"><span class="pre">(b</span> <span class="pre">+</span> <span class="pre">c</span> <span class="pre">+</span> <span class="pre">d)</span></tt> is evaluated by <tt class="docutils literal"><span class="pre">numexpr</span></tt> and <em>then</em> the <tt class="docutils literal"><span class="pre">in</span></tt>
operation is evaluated in plain Python. In general, any operations that can
be evaluated using <tt class="docutils literal"><span class="pre">numexpr</span></tt> will be.</p>
</div>
</div>
<div class="section" id="special-use-of-the-operator-with-list-objects">
<h3>Special use of the <tt class="docutils literal"><span class="pre">==</span></tt> operator with <tt class="docutils literal"><span class="pre">list</span></tt> objects<a class="headerlink" href="#special-use-of-the-operator-with-list-objects" title="Permalink to this headline">¶</a></h3>
<p>Comparing a <tt class="docutils literal"><span class="pre">list</span></tt> of values to a column using <tt class="docutils literal"><span class="pre">==</span></tt>/<tt class="docutils literal"><span class="pre">!=</span></tt> works similarly
to <tt class="docutils literal"><span class="pre">in</span></tt>/<tt class="docutils literal"><span class="pre">not</span> <span class="pre">in</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [169]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;b == [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]&#39;</span><span class="p">)</span>
<span class="gr">Out[169]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  2</span>
<span class="go">1   a  a  3  5</span>
<span class="go">2   b  a  1  8</span>
<span class="go">3   b  a  1  8</span>
<span class="go">4   c  b  4  7</span>
<span class="go">5   c  b  0  5</span>
<span class="go">6   d  b  0  7</span>
<span class="go">7   d  b  2  0</span>
<span class="go">8   e  c  1  0</span>
<span class="go">9   e  c  4  6</span>
<span class="go">10  f  c  2  6</span>
<span class="go">11  f  c  3  1</span>

<span class="go">[12 rows x 4 columns]</span>

<span class="c"># pure Python</span>
<span class="gp">In [170]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">])]</span>
<span class="gr">Out[170]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  2</span>
<span class="go">1   a  a  3  5</span>
<span class="go">2   b  a  1  8</span>
<span class="go">3   b  a  1  8</span>
<span class="go">4   c  b  4  7</span>
<span class="go">5   c  b  0  5</span>
<span class="go">6   d  b  0  7</span>
<span class="go">7   d  b  2  0</span>
<span class="go">8   e  c  1  0</span>
<span class="go">9   e  c  4  6</span>
<span class="go">10  f  c  2  6</span>
<span class="go">11  f  c  3  1</span>

<span class="go">[12 rows x 4 columns]</span>

<span class="gp">In [171]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;c == [1, 2]&#39;</span><span class="p">)</span>
<span class="gr">Out[171]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  2</span>
<span class="go">2   b  a  1  8</span>
<span class="go">3   b  a  1  8</span>
<span class="go">7   d  b  2  0</span>
<span class="go">8   e  c  1  0</span>
<span class="go">10  f  c  2  6</span>

<span class="go">[6 rows x 4 columns]</span>

<span class="gp">In [172]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;c != [1, 2]&#39;</span><span class="p">)</span>
<span class="gr">Out[172]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">1   a  a  3  5</span>
<span class="go">4   c  b  4  7</span>
<span class="go">5   c  b  0  5</span>
<span class="go">6   d  b  0  7</span>
<span class="go">9   e  c  4  6</span>
<span class="go">11  f  c  3  1</span>

<span class="go">[6 rows x 4 columns]</span>

<span class="c"># using in/not in</span>
<span class="gp">In [173]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;[1, 2] in c&#39;</span><span class="p">)</span>
<span class="gr">Out[173]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  2</span>
<span class="go">2   b  a  1  8</span>
<span class="go">3   b  a  1  8</span>
<span class="go">7   d  b  2  0</span>
<span class="go">8   e  c  1  0</span>
<span class="go">10  f  c  2  6</span>

<span class="go">[6 rows x 4 columns]</span>

<span class="gp">In [174]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;[1, 2] not in c&#39;</span><span class="p">)</span>
<span class="gr">Out[174]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">1   a  a  3  5</span>
<span class="go">4   c  b  4  7</span>
<span class="go">5   c  b  0  5</span>
<span class="go">6   d  b  0  7</span>
<span class="go">9   e  c  4  6</span>
<span class="go">11  f  c  3  1</span>

<span class="go">[6 rows x 4 columns]</span>

<span class="c"># pure Python</span>
<span class="gp">In [175]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])]</span>
<span class="gr">Out[175]: </span>
<span class="go">    a  b  c  d</span>
<span class="go">0   a  a  2  2</span>
<span class="go">2   b  a  1  8</span>
<span class="go">3   b  a  1  8</span>
<span class="go">7   d  b  2  0</span>
<span class="go">8   e  c  1  0</span>
<span class="go">10  f  c  2  6</span>

<span class="go">[6 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="boolean-operators">
<h3>Boolean Operators<a class="headerlink" href="#boolean-operators" title="Permalink to this headline">¶</a></h3>
<p>You can negate boolean expressions with the word <tt class="docutils literal"><span class="pre">not</span></tt> or the <tt class="docutils literal"><span class="pre">~</span></tt> operator.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [176]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">rand</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">))</span>

<span class="gp">In [177]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;bools&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mf">0.5</span>

<span class="gp">In [178]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;~bools&#39;</span><span class="p">)</span>
<span class="gr">Out[178]: </span>
<span class="go">          a         b         c  bools</span>
<span class="go">0  0.035334  0.943947  0.405569  False</span>
<span class="go">1  0.447902  0.782636  0.574193  False</span>
<span class="go">4  0.791346  0.491674  0.395827  False</span>
<span class="go">5  0.035597  0.171689  0.189045  False</span>
<span class="go">7  0.898831  0.435002  0.078368  False</span>
<span class="go">8  0.224708  0.697626  0.499990  False</span>
<span class="go">9  0.504279  0.746247  0.877177  False</span>

<span class="go">[7 rows x 4 columns]</span>

<span class="gp">In [179]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;not bools&#39;</span><span class="p">)</span>
<span class="gr">Out[179]: </span>
<span class="go">          a         b         c  bools</span>
<span class="go">0  0.035334  0.943947  0.405569  False</span>
<span class="go">1  0.447902  0.782636  0.574193  False</span>
<span class="go">4  0.791346  0.491674  0.395827  False</span>
<span class="go">5  0.035597  0.171689  0.189045  False</span>
<span class="go">7  0.898831  0.435002  0.078368  False</span>
<span class="go">8  0.224708  0.697626  0.499990  False</span>
<span class="go">9  0.504279  0.746247  0.877177  False</span>

<span class="go">[7 rows x 4 columns]</span>

<span class="gp">In [180]: </span><span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;not bools&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">bools</span><span class="p">]</span>
<span class="gr">Out[180]: </span>
<span class="go">      a     b     c bools</span>
<span class="go">0  True  True  True  True</span>
<span class="go">1  True  True  True  True</span>
<span class="go">4  True  True  True  True</span>
<span class="go">5  True  True  True  True</span>
<span class="go">7  True  True  True  True</span>
<span class="go">8  True  True  True  True</span>
<span class="go">9  True  True  True  True</span>

<span class="go">[7 rows x 4 columns]</span>
</pre></div>
</div>
<p>Of course, expressions can be arbitrarily complex too</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># short query syntax</span>
<span class="gp">In [181]: </span><span class="n">shorter</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">&#39;a &lt; b &lt; c and (not bools) or bools &gt; 2&#39;</span><span class="p">)</span>

<span class="c"># equivalent in pure Python</span>
<span class="gp">In [182]: </span><span class="n">longer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">df</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">bools</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">bools</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)]</span>

<span class="gp">In [183]: </span><span class="n">shorter</span>
<span class="gr">Out[183]: </span>
<span class="go">          a         b         c  bools</span>
<span class="go">5  0.035597  0.171689  0.189045  False</span>
<span class="go">9  0.504279  0.746247  0.877177  False</span>

<span class="go">[2 rows x 4 columns]</span>

<span class="gp">In [184]: </span><span class="n">longer</span>
<span class="gr">Out[184]: </span>
<span class="go">          a         b         c  bools</span>
<span class="go">5  0.035597  0.171689  0.189045  False</span>
<span class="go">9  0.504279  0.746247  0.877177  False</span>

<span class="go">[2 rows x 4 columns]</span>

<span class="gp">In [185]: </span><span class="n">shorter</span> <span class="o">==</span> <span class="n">longer</span>
<span class="gr">Out[185]: </span>
<span class="go">      a     b     c bools</span>
<span class="go">5  True  True  True  True</span>
<span class="go">9  True  True  True  True</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="performance-of-query">
<h3>Performance of <a class="reference internal" href="generated/pandas.DataFrame.query.html#pandas.DataFrame.query" title="pandas.DataFrame.query"><tt class="xref py py-meth docutils literal"><span class="pre">query()</span></tt></a><a class="headerlink" href="#performance-of-query" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">DataFrame.query()</span></tt> using <tt class="docutils literal"><span class="pre">numexpr</span></tt> is slightly faster than Python for
large frames</p>
<img alt="_images/query-perf.png" src="_images/query-perf.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You will only see the performance benefits of using the <tt class="docutils literal"><span class="pre">numexpr</span></tt> engine
with <tt class="docutils literal"><span class="pre">DataFrame.query()</span></tt> if your frame has more than approximately 200,000
rows</p>
<blockquote class="last">
<div><img alt="_images/query-perf-small.png" src="_images/query-perf-small.png" />
</div></blockquote>
</div>
<p>This plot was created using a <tt class="docutils literal"><span class="pre">DataFrame</span></tt> with 3 columns each containing
floating point values generated using <tt class="docutils literal"><span class="pre">numpy.random.randn()</span></tt>.</p>
</div>
</div>
<div class="section" id="take-methods">
<h2>Take Methods<a class="headerlink" href="#take-methods" title="Permalink to this headline">¶</a></h2>
<p id="indexing-take">Similar to numpy ndarrays, pandas Index, Series, and DataFrame also provides
the <tt class="docutils literal"><span class="pre">take</span></tt> method that retrieves elements along a given axis at the given
indices. The given indices must be either a list or an ndarray of integer
index positions. <tt class="docutils literal"><span class="pre">take</span></tt> will also accept negative integers as relative positions to the end of the object.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [186]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="gp">In [187]: </span><span class="n">index</span>
<span class="gr">Out[187]: </span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">399</span><span class="p">,</span> <span class="mi">134</span><span class="p">,</span> <span class="mi">575</span><span class="p">,</span> <span class="mi">635</span><span class="p">,</span> <span class="mi">358</span><span class="p">,</span> <span class="mi">102</span><span class="p">,</span> <span class="mi">468</span><span class="p">,</span> <span class="mi">657</span><span class="p">,</span> <span class="mi">848</span><span class="p">,</span> <span class="mi">343</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int64&#39;</span><span class="p">)</span>

<span class="gp">In [188]: </span><span class="n">positions</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="gp">In [189]: </span><span class="n">index</span><span class="p">[</span><span class="n">positions</span><span class="p">]</span>
<span class="gr">Out[189]: </span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">399</span><span class="p">,</span> <span class="mi">343</span><span class="p">,</span> <span class="mi">635</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int64&#39;</span><span class="p">)</span>

<span class="gp">In [190]: </span><span class="n">index</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span>
<span class="gr">Out[190]: </span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">399</span><span class="p">,</span> <span class="mi">343</span><span class="p">,</span> <span class="mi">635</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int64&#39;</span><span class="p">)</span>

<span class="gp">In [191]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="gp">In [192]: </span><span class="n">ser</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">positions</span><span class="p">]</span>
<span class="gr">Out[192]: </span>
<span class="go">0   -0.921988</span>
<span class="go">9    0.391944</span>
<span class="go">3   -0.220720</span>
<span class="go">dtype: float64</span>

<span class="gp">In [193]: </span><span class="n">ser</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">positions</span><span class="p">)</span>
<span class="gr">Out[193]: </span>
<span class="go">0   -0.921988</span>
<span class="go">9    0.391944</span>
<span class="go">3   -0.220720</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>For DataFrames, the given indices should be a 1d list or ndarray that specifies
row or column positions.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [194]: </span><span class="n">frm</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="gp">In [195]: </span><span class="n">frm</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gr">Out[195]: </span>
<span class="go">          0         1         2</span>
<span class="go">1 -1.387499 -0.717938 -0.930118</span>
<span class="go">4 -0.710203  1.263598 -2.113153</span>
<span class="go">3 -2.430222  1.583772  2.991093</span>

<span class="go">[3 rows x 3 columns]</span>

<span class="gp">In [196]: </span><span class="n">frm</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[196]: </span>
<span class="go">          0         2</span>
<span class="go">0  1.031070  1.334887</span>
<span class="go">1 -1.387499 -0.930118</span>
<span class="go">2 -0.752610 -0.212412</span>
<span class="go">3 -2.430222  2.991093</span>
<span class="go">4 -0.710203 -2.113153</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>It is important to note that the <tt class="docutils literal"><span class="pre">take</span></tt> method on pandas objects are not
intended to work on boolean indices and may return unexpected results.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [197]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="gp">In [198]: </span><span class="n">arr</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">])</span>
<span class="gr">Out[198]: </span><span class="n">array</span><span class="p">([</span> <span class="mf">0.191</span> <span class="p">,</span>  <span class="mf">0.191</span> <span class="p">,</span>  <span class="mf">0.2296</span><span class="p">,</span>  <span class="mf">0.2296</span><span class="p">])</span>

<span class="gp">In [199]: </span><span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="gr">Out[199]: </span><span class="n">array</span><span class="p">([</span> <span class="mf">0.191</span> <span class="p">,</span>  <span class="mf">0.2296</span><span class="p">])</span>

<span class="gp">In [200]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="gp">In [201]: </span><span class="n">ser</span><span class="o">.</span><span class="n">take</span><span class="p">([</span><span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">])</span>
<span class="gr">Out[201]: </span>
<span class="go">0    1.557902</span>
<span class="go">0    1.557902</span>
<span class="go">1    1.089202</span>
<span class="go">1    1.089202</span>
<span class="go">dtype: float64</span>

<span class="gp">In [202]: </span><span class="n">ser</span><span class="o">.</span><span class="n">ix</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
<span class="gr">Out[202]: </span>
<span class="go">0    1.557902</span>
<span class="go">1    1.089202</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>Finally, as a small note on performance, because the <tt class="docutils literal"><span class="pre">take</span></tt> method handles
a narrower range of inputs, it can offer performance that is a good deal
faster than fancy indexing.</p>
</div>
<div class="section" id="duplicate-data">
<h2>Duplicate Data<a class="headerlink" href="#duplicate-data" title="Permalink to this headline">¶</a></h2>
<p id="indexing-duplicate">If you want to identify and remove duplicate rows in a DataFrame,  there are
two methods that will help: <tt class="docutils literal"><span class="pre">duplicated</span></tt> and <tt class="docutils literal"><span class="pre">drop_duplicates</span></tt>. Each
takes as an argument the columns to use to identify duplicated rows.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">duplicated</span></tt> returns a boolean vector whose length is the number of rows, and which indicates whether a row is duplicated.</li>
<li><tt class="docutils literal"><span class="pre">drop_duplicates</span></tt> removes duplicate rows.</li>
</ul>
<p>By default, the first observed row of a duplicate set is considered unique, but
each method has a <tt class="docutils literal"><span class="pre">take_last</span></tt> parameter that indicates the last observed row
should be taken instead.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [203]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;a&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;three&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;six&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>                  <span class="s">&#39;b&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>                  <span class="s">&#39;c&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">7</span><span class="p">)})</span>
<span class="gp">   .....:</span> 

<span class="gp">In [204]: </span><span class="n">df2</span><span class="o">.</span><span class="n">duplicated</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">])</span>
<span class="gr">Out[204]: </span>
<span class="go">0    False</span>
<span class="go">1    False</span>
<span class="go">2    False</span>
<span class="go">3    False</span>
<span class="go">4     True</span>
<span class="go">5     True</span>
<span class="go">6    False</span>
<span class="go">dtype: bool</span>

<span class="gp">In [205]: </span><span class="n">df2</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">])</span>
<span class="gr">Out[205]: </span>
<span class="go">       a  b         c</span>
<span class="go">0    one  x -1.363210</span>
<span class="go">1    one  y  0.623587</span>
<span class="go">2    two  y -1.808744</span>
<span class="go">3  three  x -0.367734</span>
<span class="go">6    six  x -0.554902</span>

<span class="go">[5 rows x 3 columns]</span>

<span class="gp">In [206]: </span><span class="n">df2</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">take_last</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gr">Out[206]: </span>
<span class="go">       a  b         c</span>
<span class="go">1    one  y  0.623587</span>
<span class="go">3  three  x -0.367734</span>
<span class="go">4    two  y  1.787442</span>
<span class="go">5    one  x -1.420214</span>
<span class="go">6    six  x -0.554902</span>

<span class="go">[5 rows x 3 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="dictionary-like-get-method">
<span id="indexing-dictionarylike"></span><h2>Dictionary-like <a class="reference internal" href="generated/pandas.DataFrame.get.html#pandas.DataFrame.get" title="pandas.DataFrame.get"><tt class="xref py py-meth docutils literal"><span class="pre">get()</span></tt></a> method<a class="headerlink" href="#dictionary-like-get-method" title="Permalink to this headline">¶</a></h2>
<p>Each of Series, DataFrame, and Panel have a <tt class="docutils literal"><span class="pre">get</span></tt> method which can return a
default value.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [207]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">])</span>

<span class="gp">In [208]: </span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>               <span class="c"># equivalent to s[&#39;a&#39;]</span>
<span class="gr">Out[208]: </span><span class="mi">1</span>

<span class="gp">In [209]: </span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[209]: </span><span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-indexing-with-ix">
<span id="indexing-advanced"></span><h2>Advanced Indexing with <tt class="docutils literal"><span class="pre">.ix</span></tt><a class="headerlink" href="#advanced-indexing-with-ix" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The recent addition of <tt class="docutils literal"><span class="pre">.loc</span></tt> and <tt class="docutils literal"><span class="pre">.iloc</span></tt> have enabled users to be quite
explicit about indexing choices. <tt class="docutils literal"><span class="pre">.ix</span></tt> allows a great flexibility to
specify indexing locations by <em>label</em> and/or <em>integer position</em>. Pandas will
attempt to use any passed <em>integer</em> as <em>label</em> locations first (like what
<tt class="docutils literal"><span class="pre">.loc</span></tt> would do, then to fall back on <em>positional</em> indexing, like what
<tt class="docutils literal"><span class="pre">.iloc</span></tt>  would do). See <a class="reference internal" href="#indexing-fallback"><em>Fallback Indexing</em></a> for
an example.</p>
</div>
<p>The syntax of using <tt class="docutils literal"><span class="pre">.ix</span></tt> is identical to <tt class="docutils literal"><span class="pre">.loc</span></tt>, in <a class="reference internal" href="#indexing-label"><em>Selection by
Label</em></a>, and <tt class="docutils literal"><span class="pre">.iloc</span></tt> in <a class="reference internal" href="#indexing-integer"><em>Selection by Position</em></a>.</p>
<p>The <tt class="docutils literal"><span class="pre">.ix</span></tt> attribute takes the following inputs:</p>
<ul class="simple">
<li>An integer or single label, e.g. <tt class="docutils literal"><span class="pre">5</span></tt> or <tt class="docutils literal"><span class="pre">'a'</span></tt></li>
<li>A list or array of labels <tt class="docutils literal"><span class="pre">['a',</span> <span class="pre">'b',</span> <span class="pre">'c']</span></tt> or integers <tt class="docutils literal"><span class="pre">[4,</span> <span class="pre">3,</span> <span class="pre">0]</span></tt></li>
<li>A slice object with ints <tt class="docutils literal"><span class="pre">1:7</span></tt> or labels <tt class="docutils literal"><span class="pre">'a':'f'</span></tt></li>
<li>A boolean array</li>
</ul>
<p>We&#8217;ll illustrate all of these methods. First, note that this provides a concise
way of reindexing on multiple axes at once:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [210]: </span><span class="n">subindex</span> <span class="o">=</span> <span class="n">dates</span><span class="p">[[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span>

<span class="gp">In [211]: </span><span class="n">df</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">subindex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">])</span>
<span class="gr">Out[211]: </span>
<span class="go">                   C         B</span>
<span class="go">2000-01-04  0.036249  0.484166</span>
<span class="go">2000-01-05  0.378125 -1.180301</span>
<span class="go">2000-01-06  0.075871  0.441177</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [212]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">subindex</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]]</span>
<span class="gr">Out[212]: </span>
<span class="go">                   C         B</span>
<span class="go">2000-01-04  0.036249  0.484166</span>
<span class="go">2000-01-05  0.378125 -1.180301</span>
<span class="go">2000-01-06  0.075871  0.441177</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>Assignment / setting values is possible when using <tt class="docutils literal"><span class="pre">ix</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [213]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [214]: </span><span class="n">df2</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">subindex</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span>

<span class="gp">In [215]: </span><span class="n">df2</span>
<span class="gr">Out[215]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  1.438115 -0.355420  1.391176 -0.349452</span>
<span class="go">2000-01-02  0.240054 -0.057057 -0.173676 -0.119693</span>
<span class="go">2000-01-03  1.315562  0.089291  0.454389  0.854294</span>
<span class="go">2000-01-04  0.245116  0.000000  0.000000 -0.546831</span>
<span class="go">2000-01-05  1.459886  0.000000  0.000000 -0.038520</span>
<span class="go">2000-01-06  1.926220  0.000000  0.000000  0.710816</span>
<span class="go">2000-01-07 -0.042475 -1.265025 -0.677097  1.701349</span>
<span class="go">2000-01-08  0.518029 -0.592656  1.482845  0.227322</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>Indexing with an array of integers can also be done:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [216]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]]</span>
<span class="gr">Out[216]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-05  1.459886 -1.180301  0.378125 -0.038520</span>
<span class="go">2000-01-04  0.245116  0.484166  0.036249 -0.546831</span>
<span class="go">2000-01-02  0.240054 -0.057057 -0.173676 -0.119693</span>

<span class="go">[3 rows x 4 columns]</span>

<span class="gp">In [217]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">dates</span><span class="p">[[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]]]</span>
<span class="gr">Out[217]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-05  1.459886 -1.180301  0.378125 -0.038520</span>
<span class="go">2000-01-04  0.245116  0.484166  0.036249 -0.546831</span>
<span class="go">2000-01-02  0.240054 -0.057057 -0.173676 -0.119693</span>

<span class="go">[3 rows x 4 columns]</span>
</pre></div>
</div>
<p><strong>Slicing</strong> has standard Python semantics for integer slices:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [218]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="gr">Out[218]: </span>
<span class="go">                   A         B</span>
<span class="go">2000-01-02  0.240054 -0.057057</span>
<span class="go">2000-01-03  1.315562  0.089291</span>
<span class="go">2000-01-04  0.245116  0.484166</span>
<span class="go">2000-01-05  1.459886 -1.180301</span>
<span class="go">2000-01-06  1.926220  0.441177</span>
<span class="go">2000-01-07 -0.042475 -1.265025</span>

<span class="go">[6 rows x 2 columns]</span>
</pre></div>
</div>
<p>Slicing with labels is semantically slightly different because the slice start
and stop are <strong>inclusive</strong> in the label-based case:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [219]: </span><span class="n">date1</span><span class="p">,</span> <span class="n">date2</span> <span class="o">=</span> <span class="n">dates</span><span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>

<span class="gp">In [220]: </span><span class="k">print</span><span class="p">(</span><span class="n">date1</span><span class="p">,</span> <span class="n">date2</span><span class="p">)</span>
<span class="go">(Timestamp(&#39;2000-01-03 00:00:00&#39;, tz=None), Timestamp(&#39;2000-01-05 00:00:00&#39;, tz=None))</span>

<span class="gp">In [221]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">date1</span><span class="p">:</span><span class="n">date2</span><span class="p">]</span>
<span class="gr">Out[221]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-03  1.315562  0.089291  0.454389  0.854294</span>
<span class="go">2000-01-04  0.245116  0.484166  0.036249 -0.546831</span>
<span class="go">2000-01-05  1.459886 -1.180301  0.378125 -0.038520</span>

<span class="go">[3 rows x 4 columns]</span>

<span class="gp">In [222]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">date1</span><span class="p">:</span><span class="n">date2</span><span class="p">]</span>
<span class="gr">Out[222]: </span>
<span class="go">2000-01-03    1.315562</span>
<span class="go">2000-01-04    0.245116</span>
<span class="go">2000-01-05    1.459886</span>
<span class="go">Freq: D, Name: A, dtype: float64</span>
</pre></div>
</div>
<p>Getting and setting rows in a DataFrame, especially by their location, is much
easier:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [223]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [224]: </span><span class="n">df2</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[224]: </span>
<span class="go">A    0.245116</span>
<span class="go">B    0.484166</span>
<span class="go">C    0.036249</span>
<span class="go">D   -0.546831</span>
<span class="go">Name: 2000-01-04 00:00:00, dtype: float64</span>

<span class="gp">In [225]: </span><span class="n">df2</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df2</span><span class="o">.</span><span class="n">columns</span><span class="p">))</span>

<span class="gp">In [226]: </span><span class="n">df2</span>
<span class="gr">Out[226]: </span>
<span class="go">                   A         B         C         D</span>
<span class="go">2000-01-01  1.438115 -0.355420  1.391176 -0.349452</span>
<span class="go">2000-01-02  0.240054 -0.057057 -0.173676 -0.119693</span>
<span class="go">2000-01-03  1.315562  0.089291  0.454389  0.854294</span>
<span class="go">2000-01-04  0.000000  1.000000  2.000000  3.000000</span>
<span class="go">2000-01-05  1.459886 -1.180301  0.378125 -0.038520</span>

<span class="go">[5 rows x 4 columns]</span>
</pre></div>
</div>
<p>Column or row selection can be combined as you would expect with arrays of
labels or even boolean vectors:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [227]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]</span>
<span class="gr">Out[227]: </span>
<span class="go">2000-01-01   -0.355420</span>
<span class="go">2000-01-02   -0.057057</span>
<span class="go">2000-01-03    0.089291</span>
<span class="go">2000-01-04    0.484166</span>
<span class="go">2000-01-05   -1.180301</span>
<span class="go">2000-01-06    0.441177</span>
<span class="go">2000-01-08   -0.592656</span>
<span class="go">Name: B, dtype: float64</span>

<span class="gp">In [228]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">date1</span><span class="p">:</span><span class="n">date2</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]</span>
<span class="gr">Out[228]: </span>
<span class="go">2000-01-03    0.089291</span>
<span class="go">2000-01-04    0.484166</span>
<span class="go">2000-01-05   -1.180301</span>
<span class="go">Freq: D, Name: B, dtype: float64</span>

<span class="gp">In [229]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="n">date1</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]</span>
<span class="gr">Out[229]: </span><span class="mf">0.089290642365767614</span>
</pre></div>
</div>
<p>Slicing with labels is closely related to the <tt class="docutils literal"><span class="pre">truncate</span></tt> method which does
precisely <tt class="docutils literal"><span class="pre">.ix[start:stop]</span></tt> but returns a copy (for legacy reasons).</p>
</div>
<div class="section" id="the-select-method">
<h2>The <a class="reference internal" href="generated/pandas.DataFrame.select.html#pandas.DataFrame.select" title="pandas.DataFrame.select"><tt class="xref py py-meth docutils literal"><span class="pre">select()</span></tt></a> Method<a class="headerlink" href="#the-select-method" title="Permalink to this headline">¶</a></h2>
<p>Another way to extract slices from an object is with the <tt class="docutils literal"><span class="pre">select</span></tt> method of
Series, DataFrame, and Panel. This method should be used only when there is no
more direct way.  <tt class="docutils literal"><span class="pre">select</span></tt> takes a function which operates on labels along
<tt class="docutils literal"><span class="pre">axis</span></tt> and returns a boolean.  For instance:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [230]: </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[230]: </span>
<span class="go">                   A</span>
<span class="go">2000-01-01  1.438115</span>
<span class="go">2000-01-02  0.240054</span>
<span class="go">2000-01-03  1.315562</span>
<span class="go">2000-01-04  0.245116</span>
<span class="go">2000-01-05  1.459886</span>
<span class="go">2000-01-06  1.926220</span>
<span class="go">2000-01-07 -0.042475</span>
<span class="go">2000-01-08  0.518029</span>

<span class="go">[8 rows x 1 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="the-lookup-method">
<h2>The <a class="reference internal" href="generated/pandas.DataFrame.lookup.html#pandas.DataFrame.lookup" title="pandas.DataFrame.lookup"><tt class="xref py py-meth docutils literal"><span class="pre">lookup()</span></tt></a> Method<a class="headerlink" href="#the-lookup-method" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you want to extract a set of values given a sequence of row labels
and column labels, and the <tt class="docutils literal"><span class="pre">lookup</span></tt> method allows for this and returns a
numpy array.  For instance,</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [231]: </span><span class="n">dflookup</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">])</span>

<span class="gp">In [232]: </span><span class="n">dflookup</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)),</span> <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;C&#39;</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">,</span><span class="s">&#39;B&#39;</span><span class="p">,</span><span class="s">&#39;D&#39;</span><span class="p">])</span>
<span class="gr">Out[232]: </span><span class="n">array</span><span class="p">([</span> <span class="mf">0.4254</span><span class="p">,</span>  <span class="mf">0.4579</span><span class="p">,</span>  <span class="mf">0.0333</span><span class="p">,</span>  <span class="mf">0.3469</span><span class="p">,</span>  <span class="mf">0.3085</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="float64index">
<span id="indexing-float64index"></span><h2>Float64Index<a class="headerlink" href="#float64index" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 0.13.0.</span></p>
<p>By default a <tt class="docutils literal"><span class="pre">Float64Index</span></tt> will be automatically created when passing floating, or mixed-integer-floating values in index creation.
This enables a pure label-based slicing paradigm that makes <tt class="docutils literal"><span class="pre">[],ix,loc</span></tt> for scalar indexing and slicing work exactly the
same.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [233]: </span><span class="n">indexf</span> <span class="o">=</span> <span class="n">Index</span><span class="p">([</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="gp">In [234]: </span><span class="n">indexf</span>
<span class="gr">Out[234]: </span><span class="n">Float64Index</span><span class="p">([</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">)</span>

<span class="gp">In [235]: </span><span class="n">sf</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">indexf</span><span class="p">)</span>

<span class="gp">In [236]: </span><span class="n">sf</span>
<span class="gr">Out[236]: </span>
<span class="go">1.5    0</span>
<span class="go">2.0    1</span>
<span class="go">3.0    2</span>
<span class="go">4.5    3</span>
<span class="go">5.0    4</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>Scalar selection for <tt class="docutils literal"><span class="pre">[],.ix,.loc</span></tt> will always be label based. An integer will match an equal float index (e.g. <tt class="docutils literal"><span class="pre">3</span></tt> is equivalent to <tt class="docutils literal"><span class="pre">3.0</span></tt>)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [237]: </span><span class="n">sf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[237]: </span><span class="mi">2</span>

<span class="gp">In [238]: </span><span class="n">sf</span><span class="p">[</span><span class="mf">3.0</span><span class="p">]</span>
<span class="gr">Out[238]: </span><span class="mi">2</span>

<span class="gp">In [239]: </span><span class="n">sf</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[239]: </span><span class="mi">2</span>

<span class="gp">In [240]: </span><span class="n">sf</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mf">3.0</span><span class="p">]</span>
<span class="gr">Out[240]: </span><span class="mi">2</span>

<span class="gp">In [241]: </span><span class="n">sf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[241]: </span><span class="mi">2</span>

<span class="gp">In [242]: </span><span class="n">sf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mf">3.0</span><span class="p">]</span>
<span class="gr">Out[242]: </span><span class="mi">2</span>
</pre></div>
</div>
<p>The only positional indexing is via <tt class="docutils literal"><span class="pre">iloc</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [243]: </span><span class="n">sf</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="gr">Out[243]: </span><span class="mi">3</span>
</pre></div>
</div>
<p>A scalar index that is not found will raise <tt class="docutils literal"><span class="pre">KeyError</span></tt></p>
<p>Slicing is ALWAYS on the values of the index, for <tt class="docutils literal"><span class="pre">[],ix,loc</span></tt> and ALWAYS positional with <tt class="docutils literal"><span class="pre">iloc</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [244]: </span><span class="n">sf</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gr">Out[244]: </span>
<span class="go">2    1</span>
<span class="go">3    2</span>
<span class="go">dtype: int64</span>

<span class="gp">In [245]: </span><span class="n">sf</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gr">Out[245]: </span>
<span class="go">2    1</span>
<span class="go">3    2</span>
<span class="go">dtype: int64</span>

<span class="gp">In [246]: </span><span class="n">sf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gr">Out[246]: </span>
<span class="go">2    1</span>
<span class="go">3    2</span>
<span class="go">dtype: int64</span>

<span class="gp">In [247]: </span><span class="n">sf</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<span class="gr">Out[247]: </span>
<span class="go">3.0    2</span>
<span class="go">4.5    3</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>In float indexes, slicing using floats is allowed</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [248]: </span><span class="n">sf</span><span class="p">[</span><span class="mf">2.1</span><span class="p">:</span><span class="mf">4.6</span><span class="p">]</span>
<span class="gr">Out[248]: </span>
<span class="go">3.0    2</span>
<span class="go">4.5    3</span>
<span class="go">dtype: int64</span>

<span class="gp">In [249]: </span><span class="n">sf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mf">2.1</span><span class="p">:</span><span class="mf">4.6</span><span class="p">]</span>
<span class="gr">Out[249]: </span>
<span class="go">3.0    2</span>
<span class="go">4.5    3</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p>In non-float indexes, slicing using floats will raise a <tt class="docutils literal"><span class="pre">TypeError</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))[</span><span class="mf">3.5</span><span class="p">]</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">the</span> <span class="n">label</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">proper</span> <span class="n">indexer</span> <span class="k">for</span> <span class="n">this</span> <span class="n">index</span> <span class="nb">type</span> <span class="p">(</span><span class="n">Int64Index</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))[</span><span class="mf">3.5</span><span class="p">:</span><span class="mf">4.5</span><span class="p">]</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">the</span> <span class="nb">slice</span> <span class="n">start</span> <span class="p">[</span><span class="mf">3.5</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">proper</span> <span class="n">indexer</span> <span class="k">for</span> <span class="n">this</span> <span class="n">index</span> <span class="nb">type</span> <span class="p">(</span><span class="n">Int64Index</span><span class="p">)</span>
</pre></div>
</div>
<p>Using a scalar float indexer will be deprecated in a future version, but is allowed for now.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))[</span><span class="mf">3.0</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Here is a typical use-case for using this type of indexing. Imagine that you have a somewhat
irregular timedelta-like indexing scheme, but the data is recorded as floats. This could for
example be millisecond offsets.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [250]: </span><span class="n">dfir</span> <span class="o">=</span> <span class="n">concat</span><span class="p">([</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">   .....:</span>                   <span class="n">index</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">*</span> <span class="mf">250.0</span><span class="p">,</span>
<span class="gp">   .....:</span>                   <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;AB&#39;</span><span class="p">)),</span>
<span class="gp">   .....:</span>                <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>
<span class="gp">   .....:</span>                   <span class="n">index</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mf">250.1</span><span class="p">,</span>
<span class="gp">   .....:</span>                   <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;AB&#39;</span><span class="p">))])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [251]: </span><span class="n">dfir</span>
<span class="gr">Out[251]: </span>
<span class="go">               A         B</span>
<span class="go">0.0    -0.384281  1.296627</span>
<span class="go">250.0  -1.804211  0.560015</span>
<span class="go">500.0   0.640348 -0.227414</span>
<span class="go">750.0  -0.582619 -0.902874</span>
<span class="go">1000.0  0.039911 -0.270138</span>
<span class="go">1000.4  1.115044  0.969404</span>
<span class="go">1250.5 -0.781151 -2.784845</span>
<span class="go">1500.6 -1.201786 -0.231876</span>
<span class="go">1750.7 -0.142467  0.060178</span>
<span class="go">2000.8 -0.822858  1.876000</span>
<span class="go">2250.9 -0.932658 -0.635533</span>

<span class="go">[11 rows x 2 columns]</span>
</pre></div>
</div>
<p>Selection operations then will always work on a value basis, for all selection operators.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [252]: </span><span class="n">dfir</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mf">1000.4</span><span class="p">]</span>
<span class="gr">Out[252]: </span>
<span class="go">               A         B</span>
<span class="go">0.0    -0.384281  1.296627</span>
<span class="go">250.0  -1.804211  0.560015</span>
<span class="go">500.0   0.640348 -0.227414</span>
<span class="go">750.0  -0.582619 -0.902874</span>
<span class="go">1000.0  0.039911 -0.270138</span>
<span class="go">1000.4  1.115044  0.969404</span>

<span class="go">[6 rows x 2 columns]</span>

<span class="gp">In [253]: </span><span class="n">dfir</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1001</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">]</span>
<span class="gr">Out[253]: </span>
<span class="go">0.0      -0.384281</span>
<span class="go">250.0    -1.804211</span>
<span class="go">500.0     0.640348</span>
<span class="go">750.0    -0.582619</span>
<span class="go">1000.0    0.039911</span>
<span class="go">1000.4    1.115044</span>
<span class="go">Name: A, dtype: float64</span>

<span class="gp">In [254]: </span><span class="n">dfir</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mf">1000.4</span><span class="p">]</span>
<span class="gr">Out[254]: </span>
<span class="go">A    1.115044</span>
<span class="go">B    0.969404</span>
<span class="go">Name: 1000.4, dtype: float64</span>
</pre></div>
</div>
<p>You could then easily pick out the first 1 second (1000 ms) of data then.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [255]: </span><span class="n">dfir</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1000</span><span class="p">]</span>
<span class="gr">Out[255]: </span>
<span class="go">             A         B</span>
<span class="go">0    -0.384281  1.296627</span>
<span class="go">250  -1.804211  0.560015</span>
<span class="go">500   0.640348 -0.227414</span>
<span class="go">750  -0.582619 -0.902874</span>
<span class="go">1000  0.039911 -0.270138</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>Of course if you need integer based selection, then use <tt class="docutils literal"><span class="pre">iloc</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [256]: </span><span class="n">dfir</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<span class="gr">Out[256]: </span>
<span class="go">             A         B</span>
<span class="go">0    -0.384281  1.296627</span>
<span class="go">250  -1.804211  0.560015</span>
<span class="go">500   0.640348 -0.227414</span>
<span class="go">750  -0.582619 -0.902874</span>
<span class="go">1000  0.039911 -0.270138</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="returning-a-view-versus-a-copy">
<span id="indexing-view-versus-copy"></span><h2>Returning a view versus a copy<a class="headerlink" href="#returning-a-view-versus-a-copy" title="Permalink to this headline">¶</a></h2>
<p>The rules about when a view on the data is returned are entirely dependent on
NumPy. Whenever an array of labels or a boolean vector are involved in the
indexing operation, the result will be a copy. With single label / scalar
indexing and slicing, e.g. <tt class="docutils literal"><span class="pre">df.ix[3:6]</span></tt> or <tt class="docutils literal"><span class="pre">df.ix[:,</span> <span class="pre">'A']</span></tt>, a view will be
returned.</p>
<p>In chained expressions, the order may determine whether a copy is returned or not.
If an expression will set values on a copy of a slice, then a <tt class="docutils literal"><span class="pre">SettingWithCopy</span></tt>
exception will be raised (this raise/warn behavior is new starting in 0.13.0)</p>
<p>You can control the action of a chained assignment via the option <tt class="docutils literal"><span class="pre">mode.chained_assignment</span></tt>,
which can take the values <tt class="docutils literal"><span class="pre">['raise','warn',None]</span></tt>, where showing a warning is the default.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [257]: </span><span class="n">dfb</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;a&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>                         <span class="s">&#39;three&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;six&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>                  <span class="s">&#39;c&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">7</span><span class="p">)})</span>
<span class="gp">   .....:</span> 

<span class="c"># passed via reference (will stay)</span>
<span class="gp">In [258]: </span><span class="n">dfb</span><span class="p">[</span><span class="s">&#39;c&#39;</span><span class="p">][</span><span class="n">dfb</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;o&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">42</span>
</pre></div>
</div>
<p>This however is operating on a copy and will not work.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;mode.chained_assignment&#39;</span><span class="p">,</span><span class="s">&#39;warn&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dfb</span><span class="p">[</span><span class="n">dfb</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;o&#39;</span><span class="p">)][</span><span class="s">&#39;c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">42</span>
<span class="go">Traceback (most recent call last)</span>
<span class="go">     ...</span>
<span class="go">SettingWithCopyWarning:</span>
<span class="go">     A value is trying to be set on a copy of a slice from a DataFrame.</span>
<span class="go">     Try using .loc[row_index,col_indexer] = value instead</span>
</pre></div>
</div>
<p>A chained assignment can also crop up in setting in a mixed dtype frame.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These setting rules apply to all of <tt class="docutils literal"><span class="pre">.loc/.iloc/.ix</span></tt></p>
</div>
<p>This is the correct access method</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [259]: </span><span class="n">dfc</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;A&#39;</span><span class="p">:[</span><span class="s">&#39;aaa&#39;</span><span class="p">,</span><span class="s">&#39;bbb&#39;</span><span class="p">,</span><span class="s">&#39;ccc&#39;</span><span class="p">],</span><span class="s">&#39;B&#39;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]})</span>

<span class="gp">In [260]: </span><span class="n">dfc</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">11</span>

<span class="gp">In [261]: </span><span class="n">dfc</span>
<span class="gr">Out[261]: </span>
<span class="go">     A  B</span>
<span class="go">0   11  1</span>
<span class="go">1  bbb  2</span>
<span class="go">2  ccc  3</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>This <em>can</em> work at times, but is not guaranteed, and so should be avoided</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [262]: </span><span class="n">dfc</span> <span class="o">=</span> <span class="n">dfc</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [263]: </span><span class="n">dfc</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">111</span>

<span class="gp">In [264]: </span><span class="n">dfc</span>
<span class="gr">Out[264]: </span>
<span class="go">     A  B</span>
<span class="go">0  111  1</span>
<span class="go">1  bbb  2</span>
<span class="go">2  ccc  3</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>This will <strong>not</strong> work at all, and so should be avoided</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;mode.chained_assignment&#39;</span><span class="p">,</span><span class="s">&#39;raise&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dfc</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&#39;A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1111</span>
<span class="go">Traceback (most recent call last)</span>
<span class="go">     ...</span>
<span class="go">SettingWithCopyException:</span>
<span class="go">     A value is trying to be set on a copy of a slice from a DataFrame.</span>
<span class="go">     Try using .loc[row_index,col_indexer] = value instead</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The chained assignment warnings / exceptions are aiming to inform the user of a possibly invalid
assignment. There may be false positives; situations where a chained assignment is inadvertantly
reported.</p>
</div>
</div>
<div class="section" id="fallback-indexing">
<h2>Fallback indexing<a class="headerlink" href="#fallback-indexing" title="Permalink to this headline">¶</a></h2>
<p id="indexing-fallback">Float indexes should be used only with caution. If you have a float indexed
<tt class="docutils literal"><span class="pre">DataFrame</span></tt> and try to select using an integer, the row that Pandas returns
might not be what you expect. Pandas first attempts to use the <em>integer</em>
as a <em>label</em> location, but fails to find a match (because the types
are not equal). Pandas then falls back to back to positional indexing.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [265]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">   .....:</span>     <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [266]: </span><span class="n">df</span>
<span class="gr">Out[266]: </span>
<span class="go">          A         B         C         D</span>
<span class="go">1  0.379122 -1.909492 -1.431211  1.329653</span>
<span class="go">2 -0.562165  0.585729 -0.544104  0.825851</span>
<span class="go">3 -0.062472  2.032089  0.639479 -1.550712</span>
<span class="go">4  0.903495  0.476501 -0.800435 -1.596836</span>

<span class="go">[4 rows x 4 columns]</span>

<span class="gp">In [267]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gr">Out[267]: </span>
<span class="go">A    0.379122</span>
<span class="go">B   -1.909492</span>
<span class="go">C   -1.431211</span>
<span class="go">D    1.329653</span>
<span class="go">Name: 1.0, dtype: float64</span>
</pre></div>
</div>
<p>To select the row you do expect, instead use a float label or
use <tt class="docutils literal"><span class="pre">iloc</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [268]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mf">1.0</span><span class="p">]</span>
<span class="gr">Out[268]: </span>
<span class="go">A    0.379122</span>
<span class="go">B   -1.909492</span>
<span class="go">C   -1.431211</span>
<span class="go">D    1.329653</span>
<span class="go">Name: 1.0, dtype: float64</span>

<span class="gp">In [269]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gr">Out[269]: </span>
<span class="go">A    0.379122</span>
<span class="go">B   -1.909492</span>
<span class="go">C   -1.431211</span>
<span class="go">D    1.329653</span>
<span class="go">Name: 1.0, dtype: float64</span>
</pre></div>
</div>
<p>Instead of using a float index, it is often better to
convert to an integer index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [270]: </span><span class="n">df_new</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="gp">In [271]: </span><span class="n">df_new</span><span class="p">[</span><span class="n">df_new</span><span class="p">[</span><span class="s">&#39;index&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mf">1.0</span><span class="p">]</span>
<span class="gr">Out[271]: </span>
<span class="go">   index         A         B         C         D</span>
<span class="go">0      1  0.379122 -1.909492 -1.431211  1.329653</span>

<span class="go">[1 rows x 5 columns]</span>

<span class="c"># now you can also do &quot;float selection&quot;</span>
<span class="gp">In [272]: </span><span class="n">df_new</span><span class="p">[(</span><span class="n">df_new</span><span class="p">[</span><span class="s">&#39;index&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_new</span><span class="p">[</span><span class="s">&#39;index&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)]</span>
<span class="gr">Out[272]: </span>
<span class="go">   index         A         B         C         D</span>
<span class="go">0      1  0.379122 -1.909492 -1.431211  1.329653</span>

<span class="go">[1 rows x 5 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="index-objects">
<span id="indexing-class"></span><h2>Index objects<a class="headerlink" href="#index-objects" title="Permalink to this headline">¶</a></h2>
<p>The pandas <a class="reference internal" href="generated/pandas.Index.html#pandas.Index" title="pandas.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> class and its subclasses can be viewed as
implementing an <em>ordered multiset</em>. Duplicates are allowed. However, if you try
to convert an <a class="reference internal" href="generated/pandas.Index.html#pandas.Index" title="pandas.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> object with duplicate entries into a
<tt class="docutils literal"><span class="pre">set</span></tt>, an exception will be raised.</p>
<p><a class="reference internal" href="generated/pandas.Index.html#pandas.Index" title="pandas.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> also provides the infrastructure necessary for
lookups, data alignment, and reindexing. The easiest way to create an
<a class="reference internal" href="generated/pandas.Index.html#pandas.Index" title="pandas.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a> directly is to pass a <tt class="docutils literal"><span class="pre">list</span></tt> or other sequence to
<a class="reference internal" href="generated/pandas.Index.html#pandas.Index" title="pandas.Index"><tt class="xref py py-class docutils literal"><span class="pre">Index</span></tt></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [273]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">([</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>

<span class="gp">In [274]: </span><span class="n">index</span>
<span class="gr">Out[274]: </span><span class="n">Index</span><span class="p">([</span><span class="s">u&#39;e&#39;</span><span class="p">,</span> <span class="s">u&#39;d&#39;</span><span class="p">,</span> <span class="s">u&#39;a&#39;</span><span class="p">,</span> <span class="s">u&#39;b&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">)</span>

<span class="gp">In [275]: </span><span class="s">&#39;d&#39;</span> <span class="ow">in</span> <span class="n">index</span>
<span class="gr">Out[275]: </span><span class="bp">True</span>
</pre></div>
</div>
<p>You can also pass a <tt class="docutils literal"><span class="pre">name</span></tt> to be stored in the index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [276]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">([</span><span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;something&#39;</span><span class="p">)</span>

<span class="gp">In [277]: </span><span class="n">index</span><span class="o">.</span><span class="n">name</span>
<span class="gr">Out[277]: </span><span class="s">&#39;something&#39;</span>
</pre></div>
</div>
<p>Starting with pandas 0.5, the name, if set, will be shown in the console
display:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [278]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;rows&#39;</span><span class="p">)</span>

<span class="gp">In [279]: </span><span class="n">columns</span> <span class="o">=</span> <span class="n">Index</span><span class="p">([</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;cols&#39;</span><span class="p">)</span>

<span class="gp">In [280]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [281]: </span><span class="n">df</span>
<span class="gr">Out[281]: </span>
<span class="go">cols         A         B         C</span>
<span class="go">rows                              </span>
<span class="go">0     0.242701  0.302298  1.249715</span>
<span class="go">1    -1.524904 -0.726778  0.279579</span>
<span class="go">2     1.059562 -1.783941 -1.377069</span>
<span class="go">3     0.150077 -1.300946 -0.342584</span>
<span class="go">4    -1.972104  0.961460  1.222320</span>

<span class="go">[5 rows x 3 columns]</span>

<span class="gp">In [282]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span>
<span class="gr">Out[282]: </span>
<span class="go">rows</span>
<span class="go">0       0.242701</span>
<span class="go">1      -1.524904</span>
<span class="go">2       1.059562</span>
<span class="go">3       0.150077</span>
<span class="go">4      -1.972104</span>
<span class="go">Name: A, dtype: float64</span>
</pre></div>
</div>
<div class="section" id="set-operations-on-index-objects">
<h3>Set operations on Index objects<a class="headerlink" href="#set-operations-on-index-objects" title="Permalink to this headline">¶</a></h3>
<p id="indexing-set-ops">The three main operations are <tt class="docutils literal"><span class="pre">union</span> <span class="pre">(|)</span></tt>, <tt class="docutils literal"><span class="pre">intersection</span> <span class="pre">(&amp;)</span></tt>, and <tt class="docutils literal"><span class="pre">diff</span>
<span class="pre">(-)</span></tt>. These can be directly called as instance methods or used via overloaded
operators:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [283]: </span><span class="n">a</span> <span class="o">=</span> <span class="n">Index</span><span class="p">([</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">])</span>

<span class="gp">In [284]: </span><span class="n">b</span> <span class="o">=</span> <span class="n">Index</span><span class="p">([</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">])</span>

<span class="gp">In [285]: </span><span class="n">a</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gr">Out[285]: </span><span class="n">Index</span><span class="p">([</span><span class="s">u&#39;a&#39;</span><span class="p">,</span> <span class="s">u&#39;b&#39;</span><span class="p">,</span> <span class="s">u&#39;c&#39;</span><span class="p">,</span> <span class="s">u&#39;d&#39;</span><span class="p">,</span> <span class="s">u&#39;e&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">)</span>

<span class="gp">In [286]: </span><span class="n">a</span> <span class="o">|</span> <span class="n">b</span>
<span class="gr">Out[286]: </span><span class="n">Index</span><span class="p">([</span><span class="s">u&#39;a&#39;</span><span class="p">,</span> <span class="s">u&#39;b&#39;</span><span class="p">,</span> <span class="s">u&#39;c&#39;</span><span class="p">,</span> <span class="s">u&#39;d&#39;</span><span class="p">,</span> <span class="s">u&#39;e&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">)</span>

<span class="gp">In [287]: </span><span class="n">a</span> <span class="o">&amp;</span> <span class="n">b</span>
<span class="gr">Out[287]: </span><span class="n">Index</span><span class="p">([</span><span class="s">u&#39;c&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">)</span>

<span class="gp">In [288]: </span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
<span class="gr">Out[288]: </span><span class="n">Index</span><span class="p">([</span><span class="s">u&#39;a&#39;</span><span class="p">,</span> <span class="s">u&#39;b&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-isin-method-of-index-objects">
<h3>The <tt class="docutils literal"><span class="pre">isin</span></tt> method of Index objects<a class="headerlink" href="#the-isin-method-of-index-objects" title="Permalink to this headline">¶</a></h3>
<p>One additional operation is the <tt class="docutils literal"><span class="pre">isin</span></tt> method that works analogously to the
<tt class="docutils literal"><span class="pre">Series.isin</span></tt> method found <a class="reference internal" href="#indexing-boolean"><em>here</em></a>.</p>
</div>
</div>
<div class="section" id="hierarchical-indexing-multiindex">
<span id="indexing-hierarchical"></span><h2>Hierarchical indexing (MultiIndex)<a class="headerlink" href="#hierarchical-indexing-multiindex" title="Permalink to this headline">¶</a></h2>
<p>Hierarchical indexing (also referred to as &#8220;multi-level&#8221; indexing) is brand new
in the pandas 0.4 release. It is very exciting as it opens the door to some
quite sophisticated data analysis and manipulation, especially for working with
higher dimensional data. In essence, it enables you to store and manipulate
data with an arbitrary number of dimensions in lower dimensional data
structures like Series (1d) and DataFrame (2d).</p>
<p>In this section, we will show what exactly we mean by &#8220;hierarchical&#8221; indexing
and how it integrates with the all of the pandas indexing functionality
described above and in prior sections. Later, when discussing <a class="reference internal" href="groupby.html#groupby"><em>group by</em></a> and <a class="reference internal" href="reshaping.html#reshaping"><em>pivoting and reshaping data</em></a>, we&#8217;ll show
non-trivial applications to illustrate how it aids in structuring data for
analysis.</p>
<p>See the <a class="reference internal" href="cookbook.html#cookbook-multi-index"><em>cookbook</em></a> for some advanced strategies</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Given that hierarchical indexing is so new to the library, it is definitely
&#8220;bleeding-edge&#8221; functionality but is certainly suitable for production. But,
there may inevitably be some minor API changes as more use cases are
explored and any weaknesses in the design / implementation are identified.
pandas aims to be &#8220;eminently usable&#8221; so any feedback about new
functionality like this is extremely helpful.</p>
</div>
<div class="section" id="creating-a-multiindex-hierarchical-index-object">
<h3>Creating a MultiIndex (hierarchical index) object<a class="headerlink" href="#creating-a-multiindex-hierarchical-index-object" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> object is the hierarchical analogue of the standard
<tt class="docutils literal"><span class="pre">Index</span></tt> object which typically stores the axis labels in pandas objects. You
can think of <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> an array of tuples where each tuple is unique. A
<tt class="docutils literal"><span class="pre">MultiIndex</span></tt> can be created from a list of arrays (using
<tt class="docutils literal"><span class="pre">MultiIndex.from_arrays</span></tt>), an array of tuples (using
<tt class="docutils literal"><span class="pre">MultiIndex.from_tuples</span></tt>), or a crossed set of iterables (using
<tt class="docutils literal"><span class="pre">MultiIndex.from_product</span></tt>).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [289]: </span><span class="n">arrays</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>           <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">]]</span>
<span class="gp">   .....:</span> 

<span class="gp">In [290]: </span><span class="n">tuples</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">arrays</span><span class="p">))</span>

<span class="gp">In [291]: </span><span class="n">tuples</span>
<span class="gr">Out[291]: </span>
<span class="go">[(&#39;bar&#39;, &#39;one&#39;),</span>
<span class="go"> (&#39;bar&#39;, &#39;two&#39;),</span>
<span class="go"> (&#39;baz&#39;, &#39;one&#39;),</span>
<span class="go"> (&#39;baz&#39;, &#39;two&#39;),</span>
<span class="go"> (&#39;foo&#39;, &#39;one&#39;),</span>
<span class="go"> (&#39;foo&#39;, &#39;two&#39;),</span>
<span class="go"> (&#39;qux&#39;, &#39;one&#39;),</span>
<span class="go"> (&#39;qux&#39;, &#39;two&#39;)]</span>

<span class="gp">In [292]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">tuples</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">,</span> <span class="s">&#39;second&#39;</span><span class="p">])</span>

<span class="gp">In [293]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

<span class="gp">In [294]: </span><span class="n">s</span>
<span class="gr">Out[294]: </span>
<span class="go">first  second</span>
<span class="go">bar    one       0.420597</span>
<span class="go">       two      -0.631851</span>
<span class="go">baz    one      -1.054843</span>
<span class="go">       two       0.588134</span>
<span class="go">foo    one       1.453543</span>
<span class="go">       two       0.668992</span>
<span class="go">qux    one      -0.024028</span>
<span class="go">       two       1.269473</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>When you want every pairing of the elements in two iterables, it can be easier
to use the <tt class="docutils literal"><span class="pre">MultiIndex.from_product</span></tt> function:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [295]: </span><span class="n">iterables</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">]]</span>

<span class="gp">In [296]: </span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">(</span><span class="n">iterables</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;first&#39;</span><span class="p">,</span> <span class="s">&#39;second&#39;</span><span class="p">])</span>
<span class="gr">Out[296]: </span>
<span class="go">MultiIndex(levels=[[u&#39;bar&#39;, u&#39;baz&#39;, u&#39;foo&#39;, u&#39;qux&#39;], [u&#39;one&#39;, u&#39;two&#39;]],</span>
<span class="go">           labels=[[0, 0, 1, 1, 2, 2, 3, 3], [0, 1, 0, 1, 0, 1, 0, 1]],</span>
<span class="go">           names=[u&#39;first&#39;, u&#39;second&#39;])</span>
</pre></div>
</div>
<p>As a convenience, you can pass a list of arrays directly into Series or
DataFrame to construct a MultiIndex automatically:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [297]: </span><span class="n">arrays</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> <span class="p">,</span>
<span class="gp">   .....:</span>           <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span>           <span class="p">]</span>
<span class="gp">   .....:</span> 

<span class="gp">In [298]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">arrays</span><span class="p">)</span>

<span class="gp">In [299]: </span><span class="n">s</span>
<span class="gr">Out[299]: </span>
<span class="go">bar  one    1.039182</span>
<span class="go">     two    0.956255</span>
<span class="go">baz  one    1.448918</span>
<span class="go">     two    0.238470</span>
<span class="go">foo  one    0.174031</span>
<span class="go">     two   -0.793292</span>
<span class="go">qux  one    0.051545</span>
<span class="go">     two    1.452842</span>
<span class="go">dtype: float64</span>

<span class="gp">In [300]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">arrays</span><span class="p">)</span>

<span class="gp">In [301]: </span><span class="n">df</span>
<span class="gr">Out[301]: </span>
<span class="go">                0         1         2         3</span>
<span class="go">bar one  0.115255 -0.442066 -0.586551 -0.950131</span>
<span class="go">    two  0.890610 -0.170954  0.355509 -0.284458</span>
<span class="go">baz one  1.094382  0.054720  0.030047  1.978266</span>
<span class="go">    two -0.428214 -0.116571  0.013297 -0.632840</span>
<span class="go">foo one -0.906030  0.064289  1.046974 -0.720532</span>
<span class="go">    two  1.100970  0.417609  0.986436 -1.277886</span>
<span class="go">qux one  1.534011  0.895957  1.944202 -0.547004</span>
<span class="go">    two -0.463114 -1.232976  0.881544 -1.802477</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>All of the <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> constructors accept a <tt class="docutils literal"><span class="pre">names</span></tt> argument which stores
string names for the levels themselves. If no names are provided, <tt class="docutils literal"><span class="pre">None</span></tt> will
be assigned:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [302]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
<span class="gr">Out[302]: </span><span class="n">FrozenList</span><span class="p">([</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">])</span>
</pre></div>
</div>
<p>This index can back any axis of a pandas object, and the number of <strong>levels</strong>
of the index is up to you:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [303]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>

<span class="gp">In [304]: </span><span class="n">df</span>
<span class="gr">Out[304]: </span>
<span class="go">first        bar                 baz                 foo                 qux  \</span>
<span class="go">second       one       two       one       two       one       two       one   </span>
<span class="go">A      -0.007381 -1.219794  0.145578 -0.249321 -1.046479  1.314373  0.716789   </span>
<span class="go">B      -0.365315  0.370955  1.428502 -0.292967 -1.250595  0.333150  0.616471   </span>
<span class="go">C      -0.024817 -0.795125 -0.408384 -1.849202  0.781722  0.133331 -0.298493   </span>

<span class="go">first             </span>
<span class="go">second       two  </span>
<span class="go">A       0.385795  </span>
<span class="go">B      -0.915417  </span>
<span class="go">C      -1.367644  </span>

<span class="go">[3 rows x 8 columns]</span>

<span class="gp">In [305]: </span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">[:</span><span class="mi">6</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="n">index</span><span class="p">[:</span><span class="mi">6</span><span class="p">])</span>
<span class="gr">Out[305]: </span>
<span class="go">first              bar                 baz                 foo          </span>
<span class="go">second             one       two       one       two       one       two</span>
<span class="go">first second                                                            </span>
<span class="go">bar   one     0.392245 -0.738972  0.357817  1.291147 -0.787450  1.023850</span>
<span class="go">      two     0.475844  0.159213  1.002647  0.137063  0.287958 -0.651968</span>
<span class="go">baz   one    -0.422738 -0.304204  1.234844  0.692625 -2.093541  0.688230</span>
<span class="go">      two     1.060943  1.152768  1.264767  0.140697  0.057916  0.405542</span>
<span class="go">foo   one     0.084720  1.833111  2.103399  0.073064 -0.687485 -0.015795</span>
<span class="go">      two    -0.242492  0.697262  1.151237  0.627468  0.397786 -0.811265</span>

<span class="go">[6 rows x 6 columns]</span>
</pre></div>
</div>
<p>We&#8217;ve &#8220;sparsified&#8221; the higher levels of the indexes to make the console output a
bit easier on the eyes.</p>
<p>It&#8217;s worth keeping in mind that there&#8217;s nothing preventing you from using
tuples as atomic labels on an axis:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [306]: </span><span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">tuples</span><span class="p">)</span>
<span class="gr">Out[306]: </span>
<span class="go">(bar, one)   -0.198387</span>
<span class="go">(bar, two)    1.403283</span>
<span class="go">(baz, one)    0.024097</span>
<span class="go">(baz, two)   -0.773295</span>
<span class="go">(foo, one)    0.463600</span>
<span class="go">(foo, two)    1.969721</span>
<span class="go">(qux, one)    0.948590</span>
<span class="go">(qux, two)   -0.490665</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>The reason that the <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> matters is that it can allow you to do
grouping, selection, and reshaping operations as we will describe below and in
subsequent areas of the documentation. As you will see in later sections, you
can find yourself working with hierarchically-indexed data without creating a
<tt class="docutils literal"><span class="pre">MultiIndex</span></tt> explicitly yourself. However, when loading data from a file, you
may wish to generate your own <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> when preparing the data set.</p>
<p>Note that how the index is displayed by be controlled using the
<tt class="docutils literal"><span class="pre">multi_sparse</span></tt> option in <tt class="docutils literal"><span class="pre">pandas.set_printoptions</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [307]: </span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.multi_sparse&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

<span class="gp">In [308]: </span><span class="n">df</span>
<span class="gr">Out[308]: </span>
<span class="go">first        bar       bar       baz       baz       foo       foo       qux  \</span>
<span class="go">second       one       two       one       two       one       two       one   </span>
<span class="go">A      -0.007381 -1.219794  0.145578 -0.249321 -1.046479  1.314373  0.716789   </span>
<span class="go">B      -0.365315  0.370955  1.428502 -0.292967 -1.250595  0.333150  0.616471   </span>
<span class="go">C      -0.024817 -0.795125 -0.408384 -1.849202  0.781722  0.133331 -0.298493   </span>

<span class="go">first        qux  </span>
<span class="go">second       two  </span>
<span class="go">A       0.385795  </span>
<span class="go">B      -0.915417  </span>
<span class="go">C      -1.367644  </span>

<span class="go">[3 rows x 8 columns]</span>

<span class="gp">In [309]: </span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s">&#39;display.multi_sparse&#39;</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="reconstructing-the-level-labels">
<h3>Reconstructing the level labels<a class="headerlink" href="#reconstructing-the-level-labels" title="Permalink to this headline">¶</a></h3>
<p id="indexing-get-level-values">The method <tt class="docutils literal"><span class="pre">get_level_values</span></tt> will return a vector of the labels for each
location at a particular level:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [310]: </span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[310]: </span><span class="n">Index</span><span class="p">([</span><span class="s">u&#39;bar&#39;</span><span class="p">,</span> <span class="s">u&#39;bar&#39;</span><span class="p">,</span> <span class="s">u&#39;baz&#39;</span><span class="p">,</span> <span class="s">u&#39;baz&#39;</span><span class="p">,</span> <span class="s">u&#39;foo&#39;</span><span class="p">,</span> <span class="s">u&#39;foo&#39;</span><span class="p">,</span> <span class="s">u&#39;qux&#39;</span><span class="p">,</span> <span class="s">u&#39;qux&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">)</span>

<span class="gp">In [311]: </span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s">&#39;second&#39;</span><span class="p">)</span>
<span class="gr">Out[311]: </span><span class="n">Index</span><span class="p">([</span><span class="s">u&#39;one&#39;</span><span class="p">,</span> <span class="s">u&#39;two&#39;</span><span class="p">,</span> <span class="s">u&#39;one&#39;</span><span class="p">,</span> <span class="s">u&#39;two&#39;</span><span class="p">,</span> <span class="s">u&#39;one&#39;</span><span class="p">,</span> <span class="s">u&#39;two&#39;</span><span class="p">,</span> <span class="s">u&#39;one&#39;</span><span class="p">,</span> <span class="s">u&#39;two&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;object&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-indexing-on-axis-with-multiindex">
<h3>Basic indexing on axis with MultiIndex<a class="headerlink" href="#basic-indexing-on-axis-with-multiindex" title="Permalink to this headline">¶</a></h3>
<p>One of the important features of hierarchical indexing is that you can select
data by a &#8220;partial&#8221; label identifying a subgroup in the data. <strong>Partial</strong>
selection &#8220;drops&#8221; levels of the hierarchical index in the result in a
completely analogous way to selecting a column in a regular DataFrame:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [312]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span>
<span class="gr">Out[312]: </span>
<span class="go">second       one       two</span>
<span class="go">A      -0.007381 -1.219794</span>
<span class="go">B      -0.365315  0.370955</span>
<span class="go">C      -0.024817 -0.795125</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [313]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">]</span>
<span class="gr">Out[313]: </span>
<span class="go">A   -0.007381</span>
<span class="go">B   -0.365315</span>
<span class="go">C   -0.024817</span>
<span class="go">Name: (bar, one), dtype: float64</span>

<span class="gp">In [314]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">][</span><span class="s">&#39;one&#39;</span><span class="p">]</span>
<span class="gr">Out[314]: </span>
<span class="go">A   -0.007381</span>
<span class="go">B   -0.365315</span>
<span class="go">C   -0.024817</span>
<span class="go">Name: one, dtype: float64</span>

<span class="gp">In [315]: </span><span class="n">s</span><span class="p">[</span><span class="s">&#39;qux&#39;</span><span class="p">]</span>
<span class="gr">Out[315]: </span>
<span class="go">one    0.051545</span>
<span class="go">two    1.452842</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="#indexing-xs"><em>Cross-section with hierarchical index</em></a> for how to select
on a deeper level.</p>
</div>
<div class="section" id="data-alignment-and-using-reindex">
<h3>Data alignment and using <tt class="docutils literal"><span class="pre">reindex</span></tt><a class="headerlink" href="#data-alignment-and-using-reindex" title="Permalink to this headline">¶</a></h3>
<p>Operations between differently-indexed objects having <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> on the
axes will work as you expect; data alignment will work the same as an Index of
tuples:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [316]: </span><span class="n">s</span> <span class="o">+</span> <span class="n">s</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="gr">Out[316]: </span>
<span class="go">bar  one    2.078365</span>
<span class="go">     two    1.912509</span>
<span class="go">baz  one    2.897837</span>
<span class="go">     two    0.476941</span>
<span class="go">foo  one    0.348063</span>
<span class="go">     two   -1.586583</span>
<span class="go">qux  one         NaN</span>
<span class="go">     two         NaN</span>
<span class="go">dtype: float64</span>

<span class="gp">In [317]: </span><span class="n">s</span> <span class="o">+</span> <span class="n">s</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>
<span class="gr">Out[317]: </span>
<span class="go">bar  one    2.078365</span>
<span class="go">     two         NaN</span>
<span class="go">baz  one    2.897837</span>
<span class="go">     two         NaN</span>
<span class="go">foo  one    0.348063</span>
<span class="go">     two         NaN</span>
<span class="go">qux  one    0.103090</span>
<span class="go">     two         NaN</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">reindex</span></tt> can be called with another <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> or even a list or array
of tuples:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [318]: </span><span class="n">s</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">index</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
<span class="gr">Out[318]: </span>
<span class="go">first  second</span>
<span class="go">bar    one       1.039182</span>
<span class="go">       two       0.956255</span>
<span class="go">baz    one       1.448918</span>
<span class="go">dtype: float64</span>

<span class="gp">In [319]: </span><span class="n">s</span><span class="o">.</span><span class="n">reindex</span><span class="p">([(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;qux&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">)])</span>
<span class="gr">Out[319]: </span>
<span class="go">foo  two   -0.793292</span>
<span class="go">bar  one    1.039182</span>
<span class="go">qux  one    0.051545</span>
<span class="go">baz  one    1.448918</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-indexing-with-hierarchical-index">
<span id="indexing-advanced-hierarchical"></span><h3>Advanced indexing with hierarchical index<a class="headerlink" href="#advanced-indexing-with-hierarchical-index" title="Permalink to this headline">¶</a></h3>
<p>Syntactically integrating <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> in advanced indexing with <tt class="docutils literal"><span class="pre">.ix</span></tt> is a
bit challenging, but we&#8217;ve made every effort to do so. for example the
following works as you would expect:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [320]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">T</span>

<span class="gp">In [321]: </span><span class="n">df</span>
<span class="gr">Out[321]: </span>
<span class="go">                     A         B         C</span>
<span class="go">first second                              </span>
<span class="go">bar   one    -0.007381 -0.365315 -0.024817</span>
<span class="go">      two    -1.219794  0.370955 -0.795125</span>
<span class="go">baz   one     0.145578  1.428502 -0.408384</span>
<span class="go">      two    -0.249321 -0.292967 -1.849202</span>
<span class="go">foo   one    -1.046479 -1.250595  0.781722</span>
<span class="go">      two     1.314373  0.333150  0.133331</span>
<span class="go">qux   one     0.716789  0.616471 -0.298493</span>
<span class="go">      two     0.385795 -0.915417 -1.367644</span>

<span class="go">[8 rows x 3 columns]</span>

<span class="gp">In [322]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span>
<span class="gr">Out[322]: </span>
<span class="go">               A         B         C</span>
<span class="go">second                              </span>
<span class="go">one    -0.007381 -0.365315 -0.024817</span>
<span class="go">two    -1.219794  0.370955 -0.795125</span>

<span class="go">[2 rows x 3 columns]</span>

<span class="gp">In [323]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">]</span>
<span class="gr">Out[323]: </span>
<span class="go">A   -1.219794</span>
<span class="go">B    0.370955</span>
<span class="go">C   -0.795125</span>
<span class="go">Name: (bar, two), dtype: float64</span>
</pre></div>
</div>
<p>&#8220;Partial&#8221; slicing also works quite nicely for the topmost level:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [324]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="s">&#39;baz&#39;</span><span class="p">:</span><span class="s">&#39;foo&#39;</span><span class="p">]</span>
<span class="gr">Out[324]: </span>
<span class="go">                     A         B         C</span>
<span class="go">first second                              </span>
<span class="go">baz   one     0.145578  1.428502 -0.408384</span>
<span class="go">      two    -0.249321 -0.292967 -1.849202</span>
<span class="go">foo   one    -1.046479 -1.250595  0.781722</span>
<span class="go">      two     1.314373  0.333150  0.133331</span>

<span class="go">[4 rows x 3 columns]</span>
</pre></div>
</div>
<p>But lower levels cannot be sliced in this way, because the MultiIndex uses
its multiple index dimensions to slice along one dimension of your object:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [325]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[(</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">):(</span><span class="s">&#39;qux&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">)]</span>
<span class="gr">Out[325]: </span>
<span class="go">                     A         B         C</span>
<span class="go">first second                              </span>
<span class="go">baz   two    -0.249321 -0.292967 -1.849202</span>
<span class="go">foo   one    -1.046479 -1.250595  0.781722</span>
<span class="go">      two     1.314373  0.333150  0.133331</span>
<span class="go">qux   one     0.716789  0.616471 -0.298493</span>

<span class="go">[4 rows x 3 columns]</span>

<span class="gp">In [326]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[(</span><span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">):</span><span class="s">&#39;foo&#39;</span><span class="p">]</span>
<span class="gr">Out[326]: </span>
<span class="go">                     A         B         C</span>
<span class="go">first second                              </span>
<span class="go">baz   two    -0.249321 -0.292967 -1.849202</span>
<span class="go">foo   one    -1.046479 -1.250595  0.781722</span>
<span class="go">      two     1.314373  0.333150  0.133331</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<p>Passing a list of labels or tuples works similar to reindexing:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [327]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[[(</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;qux&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">)]]</span>
<span class="gr">Out[327]: </span>
<span class="go">                     A         B         C</span>
<span class="go">first second                              </span>
<span class="go">bar   two    -1.219794  0.370955 -0.795125</span>
<span class="go">qux   one     0.716789  0.616471 -0.298493</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>The following does not work, and it&#8217;s not clear if it should or not:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[[</span><span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>The code for implementing <tt class="docutils literal"><span class="pre">.ix</span></tt> makes every attempt to &#8220;do the right thing&#8221;
but as you use it you may uncover corner cases or unintuitive behavior. If you
do find something like this, do not hesitate to report the issue or ask on the
mailing list.</p>
</div>
<div class="section" id="cross-section-with-hierarchical-index">
<span id="indexing-xs"></span><h3>Cross-section with hierarchical index<a class="headerlink" href="#cross-section-with-hierarchical-index" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">xs</span></tt> method of <tt class="docutils literal"><span class="pre">DataFrame</span></tt> additionally takes a level argument to make
selecting data at a particular level of a MultiIndex easier.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [328]: </span><span class="n">df</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s">&#39;second&#39;</span><span class="p">)</span>
<span class="gr">Out[328]: </span>
<span class="go">              A         B         C</span>
<span class="go">first                              </span>
<span class="go">bar   -0.007381 -0.365315 -0.024817</span>
<span class="go">baz    0.145578  1.428502 -0.408384</span>
<span class="go">foo   -1.046479 -1.250595  0.781722</span>
<span class="go">qux    0.716789  0.616471 -0.298493</span>

<span class="go">[4 rows x 3 columns]</span>
</pre></div>
</div>
<p>You can also select on the columns with <tt class="xref py py-meth docutils literal"><span class="pre">xs()</span></tt>, by
providing the axis argument</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [329]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">T</span>

<span class="gp">In [330]: </span><span class="n">df</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s">&#39;second&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[330]: </span>
<span class="go">first       bar       baz       foo       qux</span>
<span class="go">A     -0.007381  0.145578 -1.046479  0.716789</span>
<span class="go">B     -0.365315  1.428502 -1.250595  0.616471</span>
<span class="go">C     -0.024817 -0.408384  0.781722 -0.298493</span>

<span class="go">[3 rows x 4 columns]</span>
</pre></div>
</div>
<p><tt class="xref py py-meth docutils literal"><span class="pre">xs()</span></tt> also allows selection with multiple keys</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [331]: </span><span class="n">df</span><span class="o">.</span><span class="n">xs</span><span class="p">((</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span> <span class="n">level</span><span class="o">=</span><span class="p">(</span><span class="s">&#39;second&#39;</span><span class="p">,</span> <span class="s">&#39;first&#39;</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[331]: </span>
<span class="go">first        bar</span>
<span class="go">second       one</span>
<span class="go">A      -0.007381</span>
<span class="go">B      -0.365315</span>
<span class="go">C      -0.024817</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
<p class="versionadded">
<span class="versionmodified">New in version 0.13.0.</span></p>
<p>You can pass <tt class="docutils literal"><span class="pre">drop_level=False</span></tt> to <tt class="xref py py-meth docutils literal"><span class="pre">xs()</span></tt> to retain
the level that was selected</p>
<p>versus the result with <tt class="docutils literal"><span class="pre">drop_level=True</span></tt> (the default value)</p>
</div>
<div class="section" id="advanced-reindexing-and-alignment-with-hierarchical-index">
<span id="indexing-advanced-reindex"></span><h3>Advanced reindexing and alignment with hierarchical index<a class="headerlink" href="#advanced-reindexing-and-alignment-with-hierarchical-index" title="Permalink to this headline">¶</a></h3>
<p>The parameter <tt class="docutils literal"><span class="pre">level</span></tt> has been added to the <tt class="docutils literal"><span class="pre">reindex</span></tt> and <tt class="docutils literal"><span class="pre">align</span></tt> methods
of pandas objects. This is useful to broadcast values across a level. For
instance:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [332]: </span><span class="n">midx</span> <span class="o">=</span> <span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="s">&#39;zero&#39;</span><span class="p">,</span> <span class="s">&#39;one&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">]],</span>
<span class="gp">   .....:</span>                   <span class="n">labels</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [333]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">midx</span><span class="p">)</span>

<span class="gp">In [334]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">               0         1</span>
<span class="go">one  y  0.313092 -0.588491</span>
<span class="go">     x  0.203166  1.632996</span>
<span class="go">zero y -0.557549  0.126204</span>
<span class="go">     x  1.643615 -0.067716</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [335]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [336]: </span><span class="k">print</span><span class="p">(</span><span class="n">df2</span><span class="p">)</span>
<span class="go">             0         1</span>
<span class="go">zero  0.543033  0.029244</span>
<span class="go">one   0.258129  0.522253</span>

<span class="go">[2 rows x 2 columns]</span>

<span class="gp">In [337]: </span><span class="k">print</span><span class="p">(</span><span class="n">df2</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
<span class="go">               0         1</span>
<span class="go">one  y  0.258129  0.522253</span>
<span class="go">     x  0.258129  0.522253</span>
<span class="go">zero y  0.543033  0.029244</span>
<span class="go">     x  0.543033  0.029244</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [338]: </span><span class="n">df_aligned</span><span class="p">,</span> <span class="n">df2_aligned</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [339]: </span><span class="k">print</span><span class="p">(</span><span class="n">df_aligned</span><span class="p">)</span>
<span class="go">               0         1</span>
<span class="go">one  y  0.313092 -0.588491</span>
<span class="go">     x  0.203166  1.632996</span>
<span class="go">zero y -0.557549  0.126204</span>
<span class="go">     x  1.643615 -0.067716</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [340]: </span><span class="k">print</span><span class="p">(</span><span class="n">df2_aligned</span><span class="p">)</span>
<span class="go">               0         1</span>
<span class="go">one  y  0.258129  0.522253</span>
<span class="go">     x  0.258129  0.522253</span>
<span class="go">zero y  0.543033  0.029244</span>
<span class="go">     x  0.543033  0.029244</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="the-need-for-sortedness-with-multiindex">
<h3>The need for sortedness with <tt class="xref py py-class docutils literal"><span class="pre">MultiIndex</span></tt><a class="headerlink" href="#the-need-for-sortedness-with-multiindex" title="Permalink to this headline">¶</a></h3>
<p><strong>Caveat emptor</strong>: the present implementation of <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> requires that
the labels be sorted for some of the slicing / indexing routines to work
correctly. You can think about breaking the axis into unique groups, where at
the hierarchical level of interest, each distinct group shares a label, but no
two have the same label. However, the <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> does not enforce this:
<strong>you are responsible for ensuring that things are properly sorted</strong>. There is
an important new method <tt class="docutils literal"><span class="pre">sortlevel</span></tt> to sort an axis within a <tt class="docutils literal"><span class="pre">MultiIndex</span></tt>
so that its labels are grouped and sorted by the original ordering of the
associated factor at that level. Note that this does not necessarily mean the
labels will be sorted lexicographically!</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [341]: </span><span class="kn">import</span> <span class="nn">random</span><span class="p">;</span> <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">tuples</span><span class="p">)</span>

<span class="gp">In [342]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">tuples</span><span class="p">))</span>

<span class="gp">In [343]: </span><span class="n">s</span>
<span class="gr">Out[343]: </span>
<span class="go">qux  two    0.127064</span>
<span class="go">baz  one    0.396144</span>
<span class="go">     two    1.043289</span>
<span class="go">qux  one   -0.229627</span>
<span class="go">bar  one    0.158186</span>
<span class="go">foo  two   -0.281965</span>
<span class="go">bar  two    1.255148</span>
<span class="go">foo  one    3.063464</span>
<span class="go">dtype: float64</span>

<span class="gp">In [344]: </span><span class="n">s</span><span class="o">.</span><span class="n">sortlevel</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[344]: </span>
<span class="go">bar  one    0.158186</span>
<span class="go">     two    1.255148</span>
<span class="go">baz  one    0.396144</span>
<span class="go">     two    1.043289</span>
<span class="go">foo  one    3.063464</span>
<span class="go">     two   -0.281965</span>
<span class="go">qux  one   -0.229627</span>
<span class="go">     two    0.127064</span>
<span class="go">dtype: float64</span>

<span class="gp">In [345]: </span><span class="n">s</span><span class="o">.</span><span class="n">sortlevel</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[345]: </span>
<span class="go">bar  one    0.158186</span>
<span class="go">baz  one    0.396144</span>
<span class="go">foo  one    3.063464</span>
<span class="go">qux  one   -0.229627</span>
<span class="go">bar  two    1.255148</span>
<span class="go">baz  two    1.043289</span>
<span class="go">foo  two   -0.281965</span>
<span class="go">qux  two    0.127064</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p id="indexing-sortlevel-byname">Note, you may also pass a level name to <tt class="docutils literal"><span class="pre">sortlevel</span></tt> if the MultiIndex levels
are named.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [346]: </span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">set_names</span><span class="p">([</span><span class="s">&#39;L1&#39;</span><span class="p">,</span> <span class="s">&#39;L2&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [347]: </span><span class="n">s</span><span class="o">.</span><span class="n">sortlevel</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s">&#39;L1&#39;</span><span class="p">)</span>
<span class="gr">Out[347]: </span>
<span class="go">L1   L2 </span>
<span class="go">bar  one    0.158186</span>
<span class="go">     two    1.255148</span>
<span class="go">baz  one    0.396144</span>
<span class="go">     two    1.043289</span>
<span class="go">foo  one    3.063464</span>
<span class="go">     two   -0.281965</span>
<span class="go">qux  one   -0.229627</span>
<span class="go">     two    0.127064</span>
<span class="go">dtype: float64</span>

<span class="gp">In [348]: </span><span class="n">s</span><span class="o">.</span><span class="n">sortlevel</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s">&#39;L2&#39;</span><span class="p">)</span>
<span class="gr">Out[348]: </span>
<span class="go">L1   L2 </span>
<span class="go">bar  one    0.158186</span>
<span class="go">baz  one    0.396144</span>
<span class="go">foo  one    3.063464</span>
<span class="go">qux  one   -0.229627</span>
<span class="go">bar  two    1.255148</span>
<span class="go">baz  two    1.043289</span>
<span class="go">foo  two   -0.281965</span>
<span class="go">qux  two    0.127064</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>Some indexing will work even if the data are not sorted, but will be rather
inefficient and will also return a copy of the data rather than a view:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [349]: </span><span class="n">s</span><span class="p">[</span><span class="s">&#39;qux&#39;</span><span class="p">]</span>
<span class="gr">Out[349]: </span>
<span class="go">L2</span>
<span class="go">two    0.127064</span>
<span class="go">one   -0.229627</span>
<span class="go">dtype: float64</span>

<span class="gp">In [350]: </span><span class="n">s</span><span class="o">.</span><span class="n">sortlevel</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="s">&#39;qux&#39;</span><span class="p">]</span>
<span class="gr">Out[350]: </span>
<span class="go">L2</span>
<span class="go">one   -0.229627</span>
<span class="go">two    0.127064</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>On higher dimensional objects, you can sort any of the other axes by level if
they have a MultiIndex:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [351]: </span><span class="n">df</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">sortlevel</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[351]: </span>
<span class="go">       zero       one      zero       one</span>
<span class="go">          x         x         y         y</span>
<span class="go">0  1.643615  0.203166 -0.557549  0.313092</span>
<span class="go">1 -0.067716  1.632996  0.126204 -0.588491</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> object has code to <strong>explicity check the sort depth</strong>. Thus,
if you try to index at a depth at which the index is not sorted, it will raise
an exception. Here is a concrete example to illustrate this:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [352]: </span><span class="n">tuples</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">)]</span>

<span class="gp">In [353]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">(</span><span class="n">tuples</span><span class="p">)</span>

<span class="gp">In [354]: </span><span class="n">idx</span><span class="o">.</span><span class="n">lexsort_depth</span>
<span class="gr">Out[354]: </span><span class="mi">2</span>

<span class="gp">In [355]: </span><span class="n">reordered</span> <span class="o">=</span> <span class="n">idx</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>

<span class="gp">In [356]: </span><span class="n">reordered</span><span class="o">.</span><span class="n">lexsort_depth</span>
<span class="gr">Out[356]: </span><span class="mi">1</span>

<span class="gp">In [357]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">reordered</span><span class="p">)</span>

<span class="gp">In [358]: </span><span class="n">s</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="s">&#39;a&#39;</span><span class="p">]</span>
<span class="gr">Out[358]: </span>
<span class="go">a  b    0.304771</span>
<span class="go">   a   -0.766820</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>However:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">ix</span><span class="p">[(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">):(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)]</span>
<span class="go">Traceback (most recent call last)</span>
<span class="go">     ...</span>
<span class="go">KeyError: Key length (3) was greater than MultiIndex lexsort depth (2)</span>
</pre></div>
</div>
</div>
<div class="section" id="swapping-levels-with-swaplevel">
<h3>Swapping levels with <tt class="xref py py-meth docutils literal"><span class="pre">swaplevel()</span></tt><a class="headerlink" href="#swapping-levels-with-swaplevel" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">swaplevel</span></tt> function can switch the order of two levels:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [359]: </span><span class="n">df</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="gr">Out[359]: </span>
<span class="go">               0         1</span>
<span class="go">one  y  0.313092 -0.588491</span>
<span class="go">     x  0.203166  1.632996</span>
<span class="go">zero y -0.557549  0.126204</span>
<span class="go">     x  1.643615 -0.067716</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [360]: </span><span class="n">df</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">swaplevel</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[360]: </span>
<span class="go">               0         1</span>
<span class="go">y one   0.313092 -0.588491</span>
<span class="go">x one   0.203166  1.632996</span>
<span class="go">y zero -0.557549  0.126204</span>
<span class="go">x zero  1.643615 -0.067716</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="reordering-levels-with-reorder-levels">
<span id="indexing-reorderlevels"></span><h3>Reordering levels with <tt class="xref py py-meth docutils literal"><span class="pre">reorder_levels()</span></tt><a class="headerlink" href="#reordering-levels-with-reorder-levels" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">reorder_levels</span></tt> function generalizes the <tt class="docutils literal"><span class="pre">swaplevel</span></tt> function,
allowing you to permute the hierarchical index levels in one step:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [361]: </span><span class="n">df</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">reorder_levels</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gr">Out[361]: </span>
<span class="go">               0         1</span>
<span class="go">y one   0.313092 -0.588491</span>
<span class="go">x one   0.203166  1.632996</span>
<span class="go">y zero -0.557549  0.126204</span>
<span class="go">x zero  1.643615 -0.067716</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="some-gory-internal-details">
<h3>Some gory internal details<a class="headerlink" href="#some-gory-internal-details" title="Permalink to this headline">¶</a></h3>
<p>Internally, the <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> consists of a few things: the <strong>levels</strong>, the
integer <strong>labels</strong>, and the level <strong>names</strong>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [362]: </span><span class="n">index</span>
<span class="gr">Out[362]: </span>
<span class="go">MultiIndex(levels=[[u&#39;bar&#39;, u&#39;baz&#39;, u&#39;foo&#39;, u&#39;qux&#39;], [u&#39;one&#39;, u&#39;two&#39;]],</span>
<span class="go">           labels=[[0, 0, 1, 1, 2, 2, 3, 3], [0, 1, 0, 1, 0, 1, 0, 1]],</span>
<span class="go">           names=[u&#39;first&#39;, u&#39;second&#39;])</span>

<span class="gp">In [363]: </span><span class="n">index</span><span class="o">.</span><span class="n">levels</span>
<span class="gr">Out[363]: </span><span class="n">FrozenList</span><span class="p">([[</span><span class="s">u&#39;bar&#39;</span><span class="p">,</span> <span class="s">u&#39;baz&#39;</span><span class="p">,</span> <span class="s">u&#39;foo&#39;</span><span class="p">,</span> <span class="s">u&#39;qux&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s">u&#39;one&#39;</span><span class="p">,</span> <span class="s">u&#39;two&#39;</span><span class="p">]])</span>

<span class="gp">In [364]: </span><span class="n">index</span><span class="o">.</span><span class="n">labels</span>
<span class="gr">Out[364]: </span><span class="n">FrozenList</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>

<span class="gp">In [365]: </span><span class="n">index</span><span class="o">.</span><span class="n">names</span>
<span class="gr">Out[365]: </span><span class="n">FrozenList</span><span class="p">([</span><span class="s">u&#39;first&#39;</span><span class="p">,</span> <span class="s">u&#39;second&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>You can probably guess that the labels determine which unique element is
identified with that location at each layer of the index. It&#8217;s important to
note that sortedness is determined <strong>solely</strong> from the integer labels and does
not check (or care) whether the levels themselves are sorted. Fortunately, the
constructors <tt class="docutils literal"><span class="pre">from_tuples</span></tt> and <tt class="docutils literal"><span class="pre">from_arrays</span></tt> ensure that this is true, but
if you compute the levels and labels yourself, please be careful.</p>
</div>
</div>
<div class="section" id="setting-index-metadata-name-s-levels-labels">
<h2>Setting index metadata (<tt class="docutils literal"><span class="pre">name(s)</span></tt>, <tt class="docutils literal"><span class="pre">levels</span></tt>, <tt class="docutils literal"><span class="pre">labels</span></tt>)<a class="headerlink" href="#setting-index-metadata-name-s-levels-labels" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 0.13.0.</span></p>
<p id="indexing-set-metadata">Indexes are &#8220;mostly immutable&#8221;, but it is possible to set and change their
metadata, like the index <tt class="docutils literal"><span class="pre">name</span></tt> (or, for <tt class="docutils literal"><span class="pre">MultiIndex</span></tt>, <tt class="docutils literal"><span class="pre">levels</span></tt> and
<tt class="docutils literal"><span class="pre">labels</span></tt>).</p>
<p>You can use the <tt class="docutils literal"><span class="pre">rename</span></tt>, <tt class="docutils literal"><span class="pre">set_names</span></tt>, <tt class="docutils literal"><span class="pre">set_levels</span></tt>, and <tt class="docutils literal"><span class="pre">set_labels</span></tt>
to set these attributes directly. They default to returning a copy; however,
you can specify <tt class="docutils literal"><span class="pre">inplace=True</span></tt> to have the data change inplace.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [366]: </span><span class="n">ind</span> <span class="o">=</span> <span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [367]: </span><span class="n">ind</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s">&quot;apple&quot;</span><span class="p">)</span>
<span class="gr">Out[367]: </span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int64&#39;</span><span class="p">)</span>

<span class="gp">In [368]: </span><span class="n">ind</span>
<span class="gr">Out[368]: </span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int64&#39;</span><span class="p">)</span>

<span class="gp">In [369]: </span><span class="n">ind</span><span class="o">.</span><span class="n">set_names</span><span class="p">([</span><span class="s">&quot;apple&quot;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [370]: </span><span class="n">ind</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;bob&quot;</span>

<span class="gp">In [371]: </span><span class="n">ind</span>
<span class="gr">Out[371]: </span><span class="n">Int64Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int64&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-an-index-to-an-existing-dataframe">
<h2>Adding an index to an existing DataFrame<a class="headerlink" href="#adding-an-index-to-an-existing-dataframe" title="Permalink to this headline">¶</a></h2>
<p>Occasionally you will load or create a data set into a DataFrame and want to
add an index after you&#8217;ve already done so. There are a couple of different
ways.</p>
</div>
<div class="section" id="add-an-index-using-dataframe-columns">
<h2>Add an index using DataFrame columns<a class="headerlink" href="#add-an-index-using-dataframe-columns" title="Permalink to this headline">¶</a></h2>
<p id="indexing-set-index">DataFrame has a <tt class="docutils literal"><span class="pre">set_index</span></tt> method which takes a column name (for a regular
<tt class="docutils literal"><span class="pre">Index</span></tt>) or a list of column names (for a <tt class="docutils literal"><span class="pre">MultiIndex</span></tt>), to create a new,
indexed DataFrame:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [372]: </span><span class="n">data</span>
<span class="gr">Out[372]: </span>
<span class="go">     a    b  c  d</span>
<span class="go">0  bar  one  z  1</span>
<span class="go">1  bar  two  y  2</span>
<span class="go">2  foo  one  x  3</span>
<span class="go">3  foo  two  w  4</span>

<span class="go">[4 rows x 4 columns]</span>

<span class="gp">In [373]: </span><span class="n">indexed1</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">)</span>

<span class="gp">In [374]: </span><span class="n">indexed1</span>
<span class="gr">Out[374]: </span>
<span class="go">     a    b  d</span>
<span class="go">c             </span>
<span class="go">z  bar  one  1</span>
<span class="go">y  bar  two  2</span>
<span class="go">x  foo  one  3</span>
<span class="go">w  foo  two  4</span>

<span class="go">[4 rows x 3 columns]</span>

<span class="gp">In [375]: </span><span class="n">indexed2</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>

<span class="gp">In [376]: </span><span class="n">indexed2</span>
<span class="gr">Out[376]: </span>
<span class="go">         c  d</span>
<span class="go">a   b        </span>
<span class="go">bar one  z  1</span>
<span class="go">    two  y  2</span>
<span class="go">foo one  x  3</span>
<span class="go">    two  w  4</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">append</span></tt> keyword option allow you to keep the existing index and append
the given columns to a MultiIndex:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [377]: </span><span class="n">frame</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="gp">In [378]: </span><span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">append</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [379]: </span><span class="n">frame</span>
<span class="gr">Out[379]: </span>
<span class="go">           c  d</span>
<span class="go">c a   b        </span>
<span class="go">z bar one  z  1</span>
<span class="go">y bar two  y  2</span>
<span class="go">x foo one  x  3</span>
<span class="go">w foo two  w  4</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
<p>Other options in <tt class="docutils literal"><span class="pre">set_index</span></tt> allow you not drop the index columns or to add
the index in-place (without creating a new object):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [380]: </span><span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gr">Out[380]: </span>
<span class="go">     a    b  c  d</span>
<span class="go">c                </span>
<span class="go">z  bar  one  z  1</span>
<span class="go">y  bar  two  y  2</span>
<span class="go">x  foo  one  x  3</span>
<span class="go">w  foo  two  w  4</span>

<span class="go">[4 rows x 4 columns]</span>

<span class="gp">In [381]: </span><span class="n">data</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [382]: </span><span class="n">data</span>
<span class="gr">Out[382]: </span>
<span class="go">         c  d</span>
<span class="go">a   b        </span>
<span class="go">bar one  z  1</span>
<span class="go">    two  y  2</span>
<span class="go">foo one  x  3</span>
<span class="go">    two  w  4</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-reset-the-index-reset-index">
<h2>Remove / reset the index,  <tt class="docutils literal"><span class="pre">reset_index</span></tt><a class="headerlink" href="#remove-reset-the-index-reset-index" title="Permalink to this headline">¶</a></h2>
<p>As a convenience, there is a new function on DataFrame called <tt class="docutils literal"><span class="pre">reset_index</span></tt>
which transfers the index values into the DataFrame&#8217;s columns and sets a simple
integer index. This is the inverse operation to <tt class="docutils literal"><span class="pre">set_index</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [383]: </span><span class="n">data</span>
<span class="gr">Out[383]: </span>
<span class="go">         c  d</span>
<span class="go">a   b        </span>
<span class="go">bar one  z  1</span>
<span class="go">    two  y  2</span>
<span class="go">foo one  x  3</span>
<span class="go">    two  w  4</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [384]: </span><span class="n">data</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="gr">Out[384]: </span>
<span class="go">     a    b  c  d</span>
<span class="go">0  bar  one  z  1</span>
<span class="go">1  bar  two  y  2</span>
<span class="go">2  foo  one  x  3</span>
<span class="go">3  foo  two  w  4</span>

<span class="go">[4 rows x 4 columns]</span>
</pre></div>
</div>
<p>The output is more similar to a SQL table or a record array. The names for the
columns derived from the index are the ones stored in the <tt class="docutils literal"><span class="pre">names</span></tt> attribute.</p>
<p>You can use the <tt class="docutils literal"><span class="pre">level</span></tt> keyword to remove only a portion of the index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [385]: </span><span class="n">frame</span>
<span class="gr">Out[385]: </span>
<span class="go">           c  d</span>
<span class="go">c a   b        </span>
<span class="go">z bar one  z  1</span>
<span class="go">y bar two  y  2</span>
<span class="go">x foo one  x  3</span>
<span class="go">w foo two  w  4</span>

<span class="go">[4 rows x 2 columns]</span>

<span class="gp">In [386]: </span><span class="n">frame</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gr">Out[386]: </span>
<span class="go">         a  c  d</span>
<span class="go">c b             </span>
<span class="go">z one  bar  z  1</span>
<span class="go">y two  bar  y  2</span>
<span class="go">x one  foo  x  3</span>
<span class="go">w two  foo  w  4</span>

<span class="go">[4 rows x 3 columns]</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">reset_index</span></tt> takes an optional parameter <tt class="docutils literal"><span class="pre">drop</span></tt> which if true simply
discards the index, instead of putting index values in the DataFrame&#8217;s columns.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">reset_index</span></tt> method used to be called <tt class="docutils literal"><span class="pre">delevel</span></tt> which is now
deprecated.</p>
</div>
</div>
<div class="section" id="adding-an-ad-hoc-index">
<h2>Adding an ad hoc index<a class="headerlink" href="#adding-an-ad-hoc-index" title="Permalink to this headline">¶</a></h2>
<p>If you create an index yourself, you can just assign it to the <tt class="docutils literal"><span class="pre">index</span></tt> field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">data</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span>
</pre></div>
</div>
</div>
<div class="section" id="indexing-internal-details">
<h2>Indexing internal details<a class="headerlink" href="#indexing-internal-details" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following is largely relevant for those actually working on the pandas
codebase. The source code is still the best place to look at the specifics
of how things are implemented.</p>
</div>
<p>In pandas there are a few objects implemented which can serve as valid
containers for the axis labels:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">Index</span></tt>: the generic &#8220;ordered set&#8221; object, an ndarray of object dtype
assuming nothing about its contents. The labels must be hashable (and
likely immutable) and unique. Populates a dict of label to location in
Cython to do <img class="math" src="_images/math/62d0effd6477f4244d585fc25f46a645378a4ceb.png" alt="O(1)"/> lookups.</li>
<li><tt class="docutils literal"><span class="pre">Int64Index</span></tt>: a version of <tt class="docutils literal"><span class="pre">Index</span></tt> highly optimized for 64-bit integer
data, such as time stamps</li>
<li><tt class="docutils literal"><span class="pre">MultiIndex</span></tt>: the standard hierarchical index object</li>
<li><tt class="docutils literal"><span class="pre">PeriodIndex</span></tt>: An Index object with Period elements</li>
<li><tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt>: An Index object with Timestamp elements</li>
<li><tt class="docutils literal"><span class="pre">date_range</span></tt>: fixed frequency date range generated from a time rule or
DateOffset. An ndarray of Python datetime objects</li>
</ul>
</div></blockquote>
<p>The motivation for having an <tt class="docutils literal"><span class="pre">Index</span></tt> class in the first place was to enable
different implementations of indexing. This means that it&#8217;s possible for you,
the user, to implement a custom <tt class="docutils literal"><span class="pre">Index</span></tt> subclass that may be better suited to
a particular application than the ones provided in pandas.</p>
<p>From an internal implementation point of view, the relevant methods that an
<tt class="docutils literal"><span class="pre">Index</span></tt> must define are one or more of the following (depending on how
incompatible the new object internals are with the <tt class="docutils literal"><span class="pre">Index</span></tt> functions):</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">get_loc</span></tt>: returns an &#8220;indexer&#8221; (an integer, or in some cases a
slice object) for a label</li>
<li><tt class="docutils literal"><span class="pre">slice_locs</span></tt>: returns the &#8220;range&#8221; to slice between two labels</li>
<li><tt class="docutils literal"><span class="pre">get_indexer</span></tt>: Computes the indexing vector for reindexing / data
alignment purposes. See the source / docstrings for more on this</li>
<li><tt class="docutils literal"><span class="pre">get_indexer_non_unique</span></tt>: Computes the indexing vector for reindexing / data
alignment purposes when the index is non-unique. See the source / docstrings
for more on this</li>
<li><tt class="docutils literal"><span class="pre">reindex</span></tt>: Does any pre-conversion of the input index then calls
<tt class="docutils literal"><span class="pre">get_indexer</span></tt></li>
<li><tt class="docutils literal"><span class="pre">union</span></tt>, <tt class="docutils literal"><span class="pre">intersection</span></tt>: computes the union or intersection of two
Index objects</li>
<li><tt class="docutils literal"><span class="pre">insert</span></tt>: Inserts a new label into an Index, yielding a new object</li>
<li><tt class="docutils literal"><span class="pre">delete</span></tt>: Delete a label, yielding a new object</li>
<li><tt class="docutils literal"><span class="pre">drop</span></tt>: Deletes a set of labels</li>
<li><tt class="docutils literal"><span class="pre">take</span></tt>: Analogous to ndarray.take</li>
</ul>
</div></blockquote>
</div>
</div>


                    </div>
                </div>
            </div>

            
            <div class="clearer"></div>
        </div>
    </div>
</div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="computation.html" title="Computational tools"
             >next</a> |</li>
        <li class="right" >
          <a href="basics.html" title="Essential Basic Functionality"
             >previous</a> |</li>
        <li><a href="index.html">pandas 0.13.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2014, the pandas development team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>