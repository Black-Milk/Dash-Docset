<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Sparse matrices (scipy.sparse) — SciPy v0.13.0 Reference Guide</title>
<link href="_static/css/spc-bootstrap.css" rel="stylesheet" type="text/css"/>
<link href="_static/css/spc-extend.css" rel="stylesheet" type="text/css"/>
<link href="_static/css/jquery-ui.css" rel="stylesheet" type="text/css"/>
<link href="_static/scipy.css" rel="stylesheet" type="text/css"/>
<link href="_static/pygments.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
<script src="_static/js/bootstrap.min.js" type="text/javascript"></script>
<script src="_static/js/jquery.min.js" type="text/javascript"></script>
<script src="_static/js/jquery-ui.min.js" type="text/javascript"></script>
<script src="_static/jquery.js" type="text/javascript"></script>
<script src="_static/underscore.js" type="text/javascript"></script>
<script src="_static/doctools.js" type="text/javascript"></script>
<link href="index.html" rel="top" title="SciPy v0.13.0 Reference Guide"/>
<link href="generated/scipy.sparse.bsr_matrix.html" rel="next" title="scipy.sparse.bsr_matrix"/>
<link href="generated/scipy.signal.lombscargle.html" rel="prev" title="scipy.signal.lombscargle"/>
</head>
<body>
<div class="container">
<div class="header">
</div>
</div>
<div class="container">
<div class="main">
<div class="row-fluid">
<div class="span12">
<div class="spc-navbar">
<ul class="nav nav-pills pull-left">
<li class="active"><a href="index.html">SciPy v0.13.0 Reference Guide</a></li>
</ul>
<ul class="nav nav-pills pull-right">
<li class="active">
<a accesskey="I" href="genindex.html" title="General Index">index</a>
</li>
<li class="active">
<a href="py-modindex.html" title="Python Module Index">modules</a>
</li>
<li class="active">
<a accesskey="N" href="generated/scipy.sparse.bsr_matrix.html" title="scipy.sparse.bsr_matrix">next</a>
</li>
<li class="active">
<a accesskey="P" href="generated/scipy.signal.lombscargle.html" title="scipy.signal.lombscargle">previous</a>
</li>
</ul>
</div>
</div>
</div>
<div class="row-fluid">
<div class="spc-rightsidebar span3">
<div class="sphinxsidebarwrapper">
<p class="logo"><a href="index.html">
<img alt="Logo" class="logo" src="_static/scipyshiny_small.png"/>
</a></p>
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li><a class="reference internal" href="#">Sparse matrices (<tt class="docutils literal"><span class="pre">scipy.sparse</span></tt>)</a><ul>
<li><a class="reference internal" href="#contents">Contents</a><ul>
<li><a class="reference internal" href="#sparse-matrix-classes">Sparse matrix classes</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#functions">Functions</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#submodules">Submodules</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#exceptions">Exceptions</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#usage-information">Usage information</a><ul>
<li><a class="reference internal" href="#matrix-vector-product">Matrix vector product</a></li>
<li><a class="reference internal" href="#example-1">Example 1</a></li>
<li><a class="reference internal" href="#example-2">Example 2</a></li>
<li><a class="reference internal" href="#further-details">Further Details</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4>Previous topic</h4>
<p class="topless"><a href="generated/scipy.signal.lombscargle.html" title="previous chapter">scipy.signal.lombscargle</a></p>
<h4>Next topic</h4>
<p class="topless"><a href="generated/scipy.sparse.bsr_matrix.html" title="next chapter">scipy.sparse.bsr_matrix</a></p>
</div>
</div>
<div class="span9">
<div class="bodywrapper">
<div class="body" id="spc-section-body">
<span class="target" id="module-scipy.sparse"></span><div class="section" id="sparse-matrices-scipy-sparse"><a name="//apple_ref/cpp/Module/scipy.sparse"></a>
<h1>Sparse matrices (<a class="reference internal" href="#module-scipy.sparse" title="scipy.sparse"><tt class="xref py py-mod docutils literal"><span class="pre">scipy.sparse</span></tt></a>)<a class="headerlink" href="#sparse-matrices-scipy-sparse" title="Permalink to this headline">¶</a></h1>
<p>SciPy 2-D sparse matrix package for numeric data.</p>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sparse-matrix-classes">
<h3>Sparse matrix classes<a class="headerlink" href="#sparse-matrix-classes" title="Permalink to this headline">¶</a></h3>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%"></col>
<col width="90%"></col>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.bsr_matrix.html#scipy.sparse.bsr_matrix" title="scipy.sparse.bsr_matrix"><tt class="xref py py-obj docutils literal"><span class="pre">bsr_matrix</span></tt></a>(arg1[, shape, dtype, copy, blocksize])</td>
<td>Block Sparse Row matrix</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.coo_matrix.html#scipy.sparse.coo_matrix" title="scipy.sparse.coo_matrix"><tt class="xref py py-obj docutils literal"><span class="pre">coo_matrix</span></tt></a>(arg1[, shape, dtype, copy])</td>
<td>A sparse matrix in COOrdinate format.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.csc_matrix.html#scipy.sparse.csc_matrix" title="scipy.sparse.csc_matrix"><tt class="xref py py-obj docutils literal"><span class="pre">csc_matrix</span></tt></a>(arg1[, shape, dtype, copy])</td>
<td>Compressed Sparse Column matrix</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix" title="scipy.sparse.csr_matrix"><tt class="xref py py-obj docutils literal"><span class="pre">csr_matrix</span></tt></a>(arg1[, shape, dtype, copy])</td>
<td>Compressed Sparse Row matrix</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.dia_matrix.html#scipy.sparse.dia_matrix" title="scipy.sparse.dia_matrix"><tt class="xref py py-obj docutils literal"><span class="pre">dia_matrix</span></tt></a>(arg1[, shape, dtype, copy])</td>
<td>Sparse matrix with DIAgonal storage</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.dok_matrix.html#scipy.sparse.dok_matrix" title="scipy.sparse.dok_matrix"><tt class="xref py py-obj docutils literal"><span class="pre">dok_matrix</span></tt></a>(arg1[, shape, dtype, copy])</td>
<td>Dictionary Of Keys based sparse matrix.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.lil_matrix.html#scipy.sparse.lil_matrix" title="scipy.sparse.lil_matrix"><tt class="xref py py-obj docutils literal"><span class="pre">lil_matrix</span></tt></a>(arg1[, shape, dtype, copy])</td>
<td>Row-based linked list sparse matrix</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<p>Building sparse matrices:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%"></col>
<col width="90%"></col>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.eye.html#scipy.sparse.eye" title="scipy.sparse.eye"><tt class="xref py py-obj docutils literal"><span class="pre">eye</span></tt></a>(m[, n, k, dtype, format])</td>
<td>Sparse matrix with ones on diagonal</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.identity.html#scipy.sparse.identity" title="scipy.sparse.identity"><tt class="xref py py-obj docutils literal"><span class="pre">identity</span></tt></a>(n[, dtype, format])</td>
<td>Identity matrix in sparse format</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.kron.html#scipy.sparse.kron" title="scipy.sparse.kron"><tt class="xref py py-obj docutils literal"><span class="pre">kron</span></tt></a>(A, B[, format])</td>
<td>kronecker product of sparse matrices A and B</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.kronsum.html#scipy.sparse.kronsum" title="scipy.sparse.kronsum"><tt class="xref py py-obj docutils literal"><span class="pre">kronsum</span></tt></a>(A, B[, format])</td>
<td>kronecker sum of sparse matrices A and B</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.diags.html#scipy.sparse.diags" title="scipy.sparse.diags"><tt class="xref py py-obj docutils literal"><span class="pre">diags</span></tt></a>(diagonals, offsets[, shape, format, dtype])</td>
<td>Construct a sparse matrix from diagonals.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.spdiags.html#scipy.sparse.spdiags" title="scipy.sparse.spdiags"><tt class="xref py py-obj docutils literal"><span class="pre">spdiags</span></tt></a>(data, diags, m, n[, format])</td>
<td>Return a sparse matrix from diagonals.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.block_diag.html#scipy.sparse.block_diag" title="scipy.sparse.block_diag"><tt class="xref py py-obj docutils literal"><span class="pre">block_diag</span></tt></a>(mats[, format, dtype])</td>
<td>Build a block diagonal sparse matrix from provided matrices.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.tril.html#scipy.sparse.tril" title="scipy.sparse.tril"><tt class="xref py py-obj docutils literal"><span class="pre">tril</span></tt></a>(A[, k, format])</td>
<td>Return the lower triangular portion of a matrix in sparse format</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.triu.html#scipy.sparse.triu" title="scipy.sparse.triu"><tt class="xref py py-obj docutils literal"><span class="pre">triu</span></tt></a>(A[, k, format])</td>
<td>Return the upper triangular portion of a matrix in sparse format</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.bmat.html#scipy.sparse.bmat" title="scipy.sparse.bmat"><tt class="xref py py-obj docutils literal"><span class="pre">bmat</span></tt></a>(blocks[, format, dtype])</td>
<td>Build a sparse matrix from sparse sub-blocks</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.hstack.html#scipy.sparse.hstack" title="scipy.sparse.hstack"><tt class="xref py py-obj docutils literal"><span class="pre">hstack</span></tt></a>(blocks[, format, dtype])</td>
<td>Stack sparse matrices horizontally (column wise)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.vstack.html#scipy.sparse.vstack" title="scipy.sparse.vstack"><tt class="xref py py-obj docutils literal"><span class="pre">vstack</span></tt></a>(blocks[, format, dtype])</td>
<td>Stack sparse matrices vertically (row wise)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.rand.html#scipy.sparse.rand" title="scipy.sparse.rand"><tt class="xref py py-obj docutils literal"><span class="pre">rand</span></tt></a>(m, n[, density, format, dtype, ...])</td>
<td>Generate a sparse matrix of the given shape and density with uniformely distributed values.</td>
</tr>
</tbody>
</table>
<p>Identifying sparse matrices:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%"></col>
<col width="90%"></col>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.issparse.html#scipy.sparse.issparse" title="scipy.sparse.issparse"><tt class="xref py py-obj docutils literal"><span class="pre">issparse</span></tt></a>(x)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.isspmatrix.html#scipy.sparse.isspmatrix" title="scipy.sparse.isspmatrix"><tt class="xref py py-obj docutils literal"><span class="pre">isspmatrix</span></tt></a>(x)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.isspmatrix_csc.html#scipy.sparse.isspmatrix_csc" title="scipy.sparse.isspmatrix_csc"><tt class="xref py py-obj docutils literal"><span class="pre">isspmatrix_csc</span></tt></a>(x)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.isspmatrix_csr.html#scipy.sparse.isspmatrix_csr" title="scipy.sparse.isspmatrix_csr"><tt class="xref py py-obj docutils literal"><span class="pre">isspmatrix_csr</span></tt></a>(x)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.isspmatrix_bsr.html#scipy.sparse.isspmatrix_bsr" title="scipy.sparse.isspmatrix_bsr"><tt class="xref py py-obj docutils literal"><span class="pre">isspmatrix_bsr</span></tt></a>(x)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.isspmatrix_lil.html#scipy.sparse.isspmatrix_lil" title="scipy.sparse.isspmatrix_lil"><tt class="xref py py-obj docutils literal"><span class="pre">isspmatrix_lil</span></tt></a>(x)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.isspmatrix_dok.html#scipy.sparse.isspmatrix_dok" title="scipy.sparse.isspmatrix_dok"><tt class="xref py py-obj docutils literal"><span class="pre">isspmatrix_dok</span></tt></a>(x)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.isspmatrix_coo.html#scipy.sparse.isspmatrix_coo" title="scipy.sparse.isspmatrix_coo"><tt class="xref py py-obj docutils literal"><span class="pre">isspmatrix_coo</span></tt></a>(x)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.isspmatrix_dia.html#scipy.sparse.isspmatrix_dia" title="scipy.sparse.isspmatrix_dia"><tt class="xref py py-obj docutils literal"><span class="pre">isspmatrix_dia</span></tt></a>(x)</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="submodules">
<h3>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h3>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%"></col>
<col width="90%"></col>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="sparse.csgraph.html#module-scipy.sparse.csgraph" title="scipy.sparse.csgraph"><tt class="xref py py-obj docutils literal"><span class="pre">csgraph</span></tt></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="sparse.linalg.html#module-scipy.sparse.linalg" title="scipy.sparse.linalg"><tt class="xref py py-obj docutils literal"><span class="pre">linalg</span></tt></a></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="exceptions">
<h3>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h3>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%"></col>
<col width="90%"></col>
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="generated/scipy.sparse.SparseEfficiencyWarning.html#scipy.sparse.SparseEfficiencyWarning" title="scipy.sparse.SparseEfficiencyWarning"><tt class="xref py py-obj docutils literal"><span class="pre">SparseEfficiencyWarning</span></tt></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="generated/scipy.sparse.SparseWarning.html#scipy.sparse.SparseWarning" title="scipy.sparse.SparseWarning"><tt class="xref py py-obj docutils literal"><span class="pre">SparseWarning</span></tt></a></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="usage-information">
<h2>Usage information<a class="headerlink" href="#usage-information" title="Permalink to this headline">¶</a></h2>
<p>There are seven available sparse matrix types:</p>
<blockquote>
<div><ol class="arabic simple">
<li>csc_matrix: Compressed Sparse Column format</li>
<li>csr_matrix: Compressed Sparse Row format</li>
<li>bsr_matrix: Block Sparse Row format</li>
<li>lil_matrix: List of Lists format</li>
<li>dok_matrix: Dictionary of Keys format</li>
<li>coo_matrix: COOrdinate format (aka IJV, triplet format)</li>
<li>dia_matrix: DIAgonal format</li>
</ol>
</div></blockquote>
<p>To construct a matrix efficiently, use either lil_matrix (recommended) or
dok_matrix. The lil_matrix class supports basic slicing and fancy
indexing with a similar syntax to NumPy arrays.  As illustrated below,
the COO format may also be used to efficiently construct matrices.</p>
<p>To perform manipulations such as multiplication or inversion, first
convert the matrix to either CSC or CSR format. The lil_matrix format is
row-based, so conversion to CSR is efficient, whereas conversion to CSC
is less so.</p>
<p>All conversions among the CSR, CSC, and COO formats are efficient,
linear-time operations.</p>
<div class="section" id="matrix-vector-product">
<h3>Matrix vector product<a class="headerlink" href="#matrix-vector-product" title="Permalink to this headline">¶</a></h3>
<p>To do a vector product between a sparse matrix and a vector simply use
the matrix <em class="xref py py-obj">dot</em> method, as described in its docstring:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">csr_matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">csr_matrix</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="go">array([ 1, -3, -1], dtype=int64)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>As of NumPy 1.7, <em class="xref py py-obj">np.dot</em> is not aware of sparse matrices,
therefore using it will result on unexpected results or errors.
The corresponding dense matrix should be obtained first instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">todense</span><span class="p">(),</span> <span class="n">v</span><span class="p">)</span>
<span class="go">matrix([[ 1, -3, -1]], dtype=int64)</span>
</pre></div>
</div>
<p class="last">but then all the performance advantages would be lost.
Notice that it returned a matrix, because <em class="xref py py-obj">todense</em> returns a matrix.</p>
</div>
<p>The CSR format is specially suitable for fast matrix vector products.</p>
</div>
<div class="section" id="example-1">
<h3>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h3>
<p>Construct a 1000x1000 lil_matrix and add some values to it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">lil_matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.sparse.linalg</span> <span class="kn">import</span> <span class="n">spsolve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy.linalg</span> <span class="kn">import</span> <span class="n">solve</span><span class="p">,</span> <span class="n">norm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">rand</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">lil_matrix</span><span class="p">((</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:</span><span class="mi">100</span><span class="p">]</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">:</span><span class="mi">200</span><span class="p">]</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:</span><span class="mi">100</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="o">.</span><span class="n">setdiag</span><span class="p">(</span><span class="n">rand</span><span class="p">(</span><span class="mi">1000</span><span class="p">))</span>
</pre></div>
</div>
<p>Now convert it to CSR format and solve A x = b for x:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">tocsr</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">rand</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">spsolve</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>Convert it to a dense matrix and solve, and check that the result
is the same:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x_</span> <span class="o">=</span> <span class="n">solve</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">todense</span><span class="p">(),</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we can compute norm of the error with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">err</span> <span class="o">=</span> <span class="n">norm</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x_</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">err</span> <span class="o">&lt;</span> <span class="mf">1e-10</span>
<span class="go">True</span>
</pre></div>
</div>
<p>It should be small :)</p>
</div>
<div class="section" id="example-2">
<h3>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h3>
<p>Construct a matrix in COO format:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">sparse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">I</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">J</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">V</span><span class="p">,(</span><span class="n">I</span><span class="p">,</span><span class="n">J</span><span class="p">)),</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
<p>Notice that the indices do not need to be sorted.</p>
<p>Duplicate (i,j) entries are summed when converting to CSR or CSC.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">I</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">J</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">V</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">coo_matrix</span><span class="p">((</span><span class="n">V</span><span class="p">,(</span><span class="n">I</span><span class="p">,</span><span class="n">J</span><span class="p">)),</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">tocsr</span><span class="p">()</span>
</pre></div>
</div>
<p>This is useful for constructing finite-element stiffness and mass matrices.</p>
</div>
<div class="section" id="further-details">
<h3>Further Details<a class="headerlink" href="#further-details" title="Permalink to this headline">¶</a></h3>
<p>CSR column indices are not necessarily sorted.  Likewise for CSC row
indices.  Use the .sorted_indices() and .sort_indices() methods when
sorted indices are required (e.g. when passing data to other libraries).</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="container container-navbar-bottom">
<div class="spc-navbar">
</div>
</div>
<div class="container">
<div class="footer">
<div class="row-fluid">
<ul class="inline pull-left">
<li>
        © Copyright 2008-2009, The Scipy community.
      </li>
<li>
      Last updated on Oct 21, 2013.
      </li>
<li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
      </li>
</ul>
</div>
</div>
</div>
<script type="text/javascript">
        $('.dropdown-toggle').dropdown()
</script>
<script>
$(document).ready(function()
{
  //Handles menu drop down
  $('.dropdown-menu').find('form').click(function (e) {
        e.stopPropagation();
        });
  });
</script>
<script type="text/javascript">
        //handles accordion arrow-up and down in pages
        $('.accordion-group').collapse();
        $('.accordion-group').on('show hide', function(e)
                { 
                        $(e.target).siblings('.accordion-heading').find('.accordion-toggle i').toggleClass('icon-arrow-down icon-arrow-up', 200); 
                });
</script>
</body>
</html>