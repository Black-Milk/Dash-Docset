

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Time Series / Date functionality &mdash; pandas 0.11.1.dev-36c1263 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.11.1.dev-36c1263',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pandas 0.11.1.dev-36c1263 documentation" href="index.html" />
    <link rel="next" title="Plotting with matplotlib" href="visualization.html" />
    <link rel="prev" title="Reshaping and Pivot Tables" href="reshaping.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="visualization.html" title="Plotting with matplotlib"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="reshaping.html" title="Reshaping and Pivot Tables"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pandas 0.11.1.dev-36c1263 documentation</a> &raquo;</li> 
      </ul>
    </div>
<div class="content-wrapper">
    <div class="content">
        <div class="document">
            <div class="sphinxsidebar">
                <h3>Table Of Contents</h3>
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">What&#8217;s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Package overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="10min.html">10 Minutes to Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsintro.html">Intro to Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Essential Basic Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and Selecting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="computation.html">Computational tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_data.html">Working with missing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupby.html">Group By: split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging.html">Merge, join, and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshaping.html">Reshaping and Pivot Tables</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Time Series / Date functionality</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#time-stamps-vs-time-spans">Time Stamps vs. Time Spans</a></li>
<li class="toctree-l2"><a class="reference internal" href="#converting-to-timestamps">Converting to Timestamps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#generating-ranges-of-timestamps">Generating Ranges of Timestamps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#datetimeindex">DatetimeIndex</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#partial-string-indexing">Partial String Indexing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#truncating-fancy-indexing">Truncating &amp; Fancy Indexing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dateoffset-objects">DateOffset objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#parametric-offsets">Parametric offsets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#offset-aliases">Offset Aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#combining-aliases">Combining Aliases</a></li>
<li class="toctree-l3"><a class="reference internal" href="#anchored-offsets">Anchored Offsets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#legacy-aliases">Legacy Aliases</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#time-series-related-instance-methods">Time series-related instance methods</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shifting-lagging">Shifting / lagging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frequency-conversion">Frequency conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filling-forward-backward">Filling forward / backward</a></li>
<li class="toctree-l3"><a class="reference internal" href="#converting-to-python-datetimes">Converting to Python datetimes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#up-and-downsampling">Up- and downsampling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#time-span-representation">Time Span Representation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#period">Period</a></li>
<li class="toctree-l3"><a class="reference internal" href="#periodindex-and-period-range">PeriodIndex and period_range</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frequency-conversion-and-resampling-with-periodindex">Frequency Conversion and Resampling with PeriodIndex</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#converting-between-representations">Converting between Representations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#time-zone-handling">Time Zone Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#time-deltas">Time Deltas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Plotting with matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="rplot.html">Trellis plotting interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">IO Tools (Text, CSV, HDF5, ...)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Sparse data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Caveats and Gotchas</a></li>
<li class="toctree-l1"><a class="reference internal" href="r_interface.html">rpy2 / R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="related.html">Related Python libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_r.html">Comparison with R / R libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Notes</a></li>
</ul>

                <h3 style="margin-top: 1.5em;">Search</h3>

                <form class="search" action="search.html" method="get">
                    <input type="text" name="q" size="18"/>
                    <input type="submit" value="Go"/>
                    <input type="hidden" name="check_keywords" value="yes"/>
                    <input type="hidden" name="area" value="default"/>
                </form>
                <p class="searchtip" style="font-size: 90%">
                    Enter search terms or a module, class or function name.
                </p>

                <p>

                <p>
                    <script type="text/javascript"
                            src="http://www.ohloh.net/p/482908/widgets/project_partner_badge.js"></script>
                </p>
            </div>
             
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div class="body">
                        
  <div class="section" id="time-series-date-functionality">
<span id="timeseries"></span><h1>Time Series / Date functionality<a class="headerlink" href="#time-series-date-functionality" title="Permalink to this headline">¶</a></h1>
<p>pandas has proven very successful as a tool for working with time series data,
especially in the financial data analysis space. With the 0.8 release, we have
further improved the time series API in pandas by leaps and bounds. Using the
new NumPy <tt class="docutils literal"><span class="pre">datetime64</span></tt> dtype, we have consolidated a large number of features
from other Python libraries like <tt class="docutils literal"><span class="pre">scikits.timeseries</span></tt> as well as created
a tremendous amount of new functionality for manipulating time series data.</p>
<p>In working with time series data, we will frequently seek to:</p>
<blockquote>
<div><ul class="simple">
<li>generate sequences of fixed-frequency dates and time spans</li>
<li>conform or convert time series to a particular frequency</li>
<li>compute &#8220;relative&#8221; dates based on various non-standard time increments
(e.g. 5 business days before the last business day of the year), or &#8220;roll&#8221;
dates forward or backward</li>
</ul>
</div></blockquote>
<p>pandas provides a relatively compact and self-contained set of tools for
performing the above tasks.</p>
<p>Create a range of dates:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># 72 hours starting with midnight Jan 1st, 2011</span>
<span class="gp">In [1661]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2011&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">72</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;H&#39;</span><span class="p">)</span>

<span class="gp">In [1662]: </span><span class="n">rng</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-01 00:00:00, ..., 2011-01-01 04:00:00]</span>
<span class="go">Length: 5, Freq: H, Timezone: None</span>
</pre></div>
</div>
<p>Index pandas objects with dates:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1663]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [1664]: </span><span class="n">ts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="go">2011-01-01 00:00:00    0.469112</span>
<span class="go">2011-01-01 01:00:00   -0.282863</span>
<span class="go">2011-01-01 02:00:00   -1.509059</span>
<span class="go">2011-01-01 03:00:00   -1.135632</span>
<span class="go">2011-01-01 04:00:00    1.212112</span>
<span class="go">Freq: H, dtype: float64</span>
</pre></div>
</div>
<p>Change frequency and fill gaps:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># to 45 minute frequency and forward fill</span>
<span class="gp">In [1665]: </span><span class="n">converted</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;45Min&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;pad&#39;</span><span class="p">)</span>

<span class="gp">In [1666]: </span><span class="n">converted</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="go">2011-01-01 00:00:00    0.469112</span>
<span class="go">2011-01-01 00:45:00    0.469112</span>
<span class="go">2011-01-01 01:30:00   -0.282863</span>
<span class="go">2011-01-01 02:15:00   -1.509059</span>
<span class="go">2011-01-01 03:00:00   -1.135632</span>
<span class="go">Freq: 45T, dtype: float64</span>
</pre></div>
</div>
<p>Resample:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># Daily means</span>
<span class="gp">In [1667]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;mean&#39;</span><span class="p">)</span>

<span class="go">2011-01-01   -0.319569</span>
<span class="go">2011-01-02   -0.337703</span>
<span class="go">2011-01-03    0.117258</span>
<span class="go">Freq: D, dtype: float64</span>
</pre></div>
</div>
<div class="section" id="time-stamps-vs-time-spans">
<span id="timeseries-representation"></span><h2>Time Stamps vs. Time Spans<a class="headerlink" href="#time-stamps-vs-time-spans" title="Permalink to this headline">¶</a></h2>
<p>Time-stamped data is the most basic type of timeseries data that associates
values with points in time. For pandas objects it means using the points in
time to create the index</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1668]: </span><span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>

<span class="gp">In [1669]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">dates</span><span class="p">)</span>

<span class="gp">In [1670]: </span><span class="nb">type</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="go">pandas.tseries.index.DatetimeIndex</span>

<span class="gp">In [1671]: </span><span class="n">ts</span>

<span class="go">2012-05-01   -0.410001</span>
<span class="go">2012-05-02   -0.078638</span>
<span class="go">2012-05-03    0.545952</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>However, in many cases it is more natural to associate things like change
variables with a time span instead.</p>
<p>For example:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1672]: </span><span class="n">periods</span> <span class="o">=</span> <span class="n">PeriodIndex</span><span class="p">([</span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012-01&#39;</span><span class="p">),</span> <span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012-02&#39;</span><span class="p">),</span>
<span class="gp">   ......:</span>                        <span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012-03&#39;</span><span class="p">)])</span>
<span class="gp">   ......:</span> 

<span class="gp">In [1673]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">periods</span><span class="p">)</span>

<span class="gp">In [1674]: </span><span class="nb">type</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="go">pandas.tseries.period.PeriodIndex</span>

<span class="gp">In [1675]: </span><span class="n">ts</span>

<span class="go">2012-01   -1.219217</span>
<span class="go">2012-02   -1.226825</span>
<span class="go">2012-03    0.769804</span>
<span class="go">Freq: M, dtype: float64</span>
</pre></div>
</div>
<p>Starting with 0.8, pandas allows you to capture both representations and
convert between them. Under the hood, pandas represents timestamps using
instances of <tt class="docutils literal"><span class="pre">Timestamp</span></tt> and sequences of timestamps using instances of
<tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt>. For regular time spans, pandas uses <tt class="docutils literal"><span class="pre">Period</span></tt> objects for
scalar values and <tt class="docutils literal"><span class="pre">PeriodIndex</span></tt> for sequences of spans. Better support for
irregular intervals with arbitrary start and end points are forth-coming in
future releases.</p>
</div>
<div class="section" id="converting-to-timestamps">
<span id="timeseries-converting"></span><h2>Converting to Timestamps<a class="headerlink" href="#converting-to-timestamps" title="Permalink to this headline">¶</a></h2>
<p>To convert a Series or list-like object of date-like objects e.g. strings,
epochs, or a mixture, you can use the <tt class="docutils literal"><span class="pre">to_datetime</span></tt> function. When passed
a Series, this returns a Series (with the same index), while a list-like
is converted to a DatetimeIndex:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1676]: </span><span class="n">to_datetime</span><span class="p">(</span><span class="n">Series</span><span class="p">([</span><span class="s">&#39;Jul 31, 2009&#39;</span><span class="p">,</span> <span class="s">&#39;2010-01-10&#39;</span><span class="p">,</span> <span class="bp">None</span><span class="p">]))</span>

<span class="go">0   2009-07-31 00:00:00</span>
<span class="go">1   2010-01-10 00:00:00</span>
<span class="go">2                   NaT</span>
<span class="go">dtype: datetime64[ns]</span>

<span class="gp">In [1677]: </span><span class="n">to_datetime</span><span class="p">([</span><span class="s">&#39;2005/11/23&#39;</span><span class="p">,</span> <span class="s">&#39;2010.12.31&#39;</span><span class="p">])</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2005-11-23 00:00:00, 2010-12-31 00:00:00]</span>
<span class="go">Length: 2, Freq: None, Timezone: None</span>
</pre></div>
</div>
<p>If you use dates which start with the day first (i.e. European style),
you can pass the <tt class="docutils literal"><span class="pre">dayfirst</span></tt> flag:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1678]: </span><span class="n">to_datetime</span><span class="p">([</span><span class="s">&#39;04-01-2012 10:00&#39;</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2012-01-04 10:00:00]</span>
<span class="go">Length: 1, Freq: None, Timezone: None</span>

<span class="gp">In [1679]: </span><span class="n">to_datetime</span><span class="p">([</span><span class="s">&#39;14-01-2012&#39;</span><span class="p">,</span> <span class="s">&#39;01-14-2012&#39;</span><span class="p">],</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2012-01-14 00:00:00, 2012-01-14 00:00:00]</span>
<span class="go">Length: 2, Freq: None, Timezone: None</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You see in the above example that <tt class="docutils literal"><span class="pre">dayfirst</span></tt> isn&#8217;t strict, so if a date
can&#8217;t be parsed with the day being first it will be parsed as if
<tt class="docutils literal"><span class="pre">dayfirst</span></tt> were False.</p>
</div>
<p>Pass <tt class="docutils literal"><span class="pre">coerce=True</span></tt> to convert bad data to <tt class="docutils literal"><span class="pre">NaT</span></tt> (not a time):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1680]: </span><span class="n">to_datetime</span><span class="p">([</span><span class="s">&#39;2009-07-31&#39;</span><span class="p">,</span> <span class="s">&#39;asd&#39;</span><span class="p">])</span>
<span class="go">array([&#39;2009-07-31&#39;, &#39;asd&#39;], dtype=object)</span>

<span class="gp">In [1681]: </span><span class="n">to_datetime</span><span class="p">([</span><span class="s">&#39;2009-07-31&#39;</span><span class="p">,</span> <span class="s">&#39;asd&#39;</span><span class="p">],</span> <span class="nb">coerce</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2009-07-31 00:00:00, NaT]</span>
<span class="go">Length: 2, Freq: None, Timezone: None</span>
</pre></div>
</div>
<p>It&#8217;s also possible to convert integer or float epoch times. The default unit
for these is nanoseconds (since these are how Timestamps are stored). However,
often epochs are stored in another <tt class="docutils literal"><span class="pre">unit</span></tt> which can be specified:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1682]: </span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[1970-01-01 00:00:00.000000001]</span>
<span class="go">Length: 1, Freq: None, Timezone: None</span>

<span class="gp">In [1683]: </span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">3.14</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s">&#39;s&#39;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[1970-01-01 00:00:01, 1970-01-01 00:00:03.140000]</span>
<span class="go">Length: 2, Freq: None, Timezone: None</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Epoch times will be rounded to the nearest nanosecond.</p>
</div>
<p>Take care, <tt class="docutils literal"><span class="pre">to_datetime</span></tt> may not act as you expect on mixed data:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1684]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;1&#39;</span><span class="p">])</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[1970-01-01 00:00:00.000000001, 2013-06-01 00:00:00]</span>
<span class="go">Length: 2, Freq: None, Timezone: None</span>
</pre></div>
</div>
</div>
<div class="section" id="generating-ranges-of-timestamps">
<span id="timeseries-daterange"></span><h2>Generating Ranges of Timestamps<a class="headerlink" href="#generating-ranges-of-timestamps" title="Permalink to this headline">¶</a></h2>
<p>To generate an index with time stamps, you can use either the DatetimeIndex or
Index constructor and pass in a list of datetime objects:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1685]: </span><span class="n">dates</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span>

<span class="gp">In [1686]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>

<span class="gp">In [1687]: </span><span class="n">index</span> <span class="c"># Note the frequency information</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2012-05-01 00:00:00, ..., 2012-05-03 00:00:00]</span>
<span class="go">Length: 3, Freq: None, Timezone: None</span>

<span class="gp">In [1688]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>

<span class="gp">In [1689]: </span><span class="n">index</span> <span class="c"># Automatically converted to DatetimeIndex</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2012-05-01 00:00:00, ..., 2012-05-03 00:00:00]</span>
<span class="go">Length: 3, Freq: None, Timezone: None</span>
</pre></div>
</div>
<p>Practically, this becomes very cumbersome because we often need a very long
index with a large number of timestamps. If we need timestamps on a regular
frequency, we can use the pandas functions <tt class="docutils literal"><span class="pre">date_range</span></tt> and <tt class="docutils literal"><span class="pre">bdate_range</span></tt>
to create timestamp indexes.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1690]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;2000-1-1&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [1691]: </span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2000-01-31 00:00:00, ..., 2083-04-30 00:00:00]</span>
<span class="go">Length: 1000, Freq: M, Timezone: None</span>

<span class="gp">In [1692]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">bdate_range</span><span class="p">(</span><span class="s">&#39;2012-1-1&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">250</span><span class="p">)</span>

<span class="gp">In [1693]: </span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2012-01-02 00:00:00, ..., 2012-12-14 00:00:00]</span>
<span class="go">Length: 250, Freq: B, Timezone: None</span>
</pre></div>
</div>
<p>Convenience functions like <tt class="docutils literal"><span class="pre">date_range</span></tt> and <tt class="docutils literal"><span class="pre">bdate_range</span></tt> utilize a
variety of frequency aliases. The default frequency for <tt class="docutils literal"><span class="pre">date_range</span></tt> is a
<strong>calendar day</strong> while the default for <tt class="docutils literal"><span class="pre">bdate_range</span></tt> is a <strong>business day</strong></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1694]: </span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="gp">In [1695]: </span><span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="gp">In [1696]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

<span class="gp">In [1697]: </span><span class="n">rng</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-01 00:00:00, ..., 2012-01-01 00:00:00]</span>
<span class="go">Length: 366, Freq: D, Timezone: None</span>

<span class="gp">In [1698]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">bdate_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

<span class="gp">In [1699]: </span><span class="n">rng</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-03 00:00:00, ..., 2011-12-30 00:00:00]</span>
<span class="go">Length: 260, Freq: B, Timezone: None</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">date_range</span></tt> and <tt class="docutils literal"><span class="pre">bdate_range</span></tt> makes it easy to generate a range of dates
using various combinations of parameters like <tt class="docutils literal"><span class="pre">start</span></tt>, <tt class="docutils literal"><span class="pre">end</span></tt>,
<tt class="docutils literal"><span class="pre">periods</span></tt>, and <tt class="docutils literal"><span class="pre">freq</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1700]: </span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;BM&#39;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-31 00:00:00, ..., 2011-12-30 00:00:00]</span>
<span class="go">Length: 12, Freq: BM, Timezone: None</span>

<span class="gp">In [1701]: </span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;W&#39;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-02 00:00:00, ..., 2012-01-01 00:00:00]</span>
<span class="go">Length: 53, Freq: W-SUN, Timezone: None</span>

<span class="gp">In [1702]: </span><span class="n">bdate_range</span><span class="p">(</span><span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-12-05 00:00:00, ..., 2011-12-30 00:00:00]</span>
<span class="go">Length: 20, Freq: B, Timezone: None</span>

<span class="gp">In [1703]: </span><span class="n">bdate_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-03 00:00:00, ..., 2011-01-28 00:00:00]</span>
<span class="go">Length: 20, Freq: B, Timezone: None</span>
</pre></div>
</div>
<p>The start and end dates are strictly inclusive. So it will not generate any
dates outside of those dates if specified.</p>
</div>
<div class="section" id="datetimeindex">
<span id="timeseries-datetimeindex"></span><h2>DatetimeIndex<a class="headerlink" href="#datetimeindex" title="Permalink to this headline">¶</a></h2>
<p>One of the main uses for <tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt> is as an index for pandas objects.
The <tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt> class contains many timeseries related optimizations:</p>
<blockquote>
<div><ul class="simple">
<li>A large range of dates for various offsets are pre-computed and cached
under the hood in order to make generating subsequent date ranges very fast
(just have to grab a slice)</li>
<li>Fast shifting using the <tt class="docutils literal"><span class="pre">shift</span></tt> and <tt class="docutils literal"><span class="pre">tshift</span></tt> method on pandas objects</li>
<li>Unioning of overlapping DatetimeIndex objects with the same frequency is
very fast (important for fast data alignment)</li>
<li>Quick access to date fields via properties such as <tt class="docutils literal"><span class="pre">year</span></tt>, <tt class="docutils literal"><span class="pre">month</span></tt>, etc.</li>
<li>Regularization functions like <tt class="docutils literal"><span class="pre">snap</span></tt> and very fast <tt class="docutils literal"><span class="pre">asof</span></tt> logic</li>
</ul>
</div></blockquote>
<p>DatetimeIndex objects has all the basic functionality of regular Index objects
and a smorgasbord of advanced timeseries-specific methods for easy frequency
processing.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="basics.html#basics-reindexing"><em>Reindexing methods</em></a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While pandas does not force you to have a sorted date index, some of these
methods may have unexpected or incorrect behavior if the dates are
unsorted. So please be careful.</p>
</div>
<p><tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt> can be used like a regular index and offers all of its
intelligent functionality like selection, slicing, etc.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1704]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;BM&#39;</span><span class="p">)</span>

<span class="gp">In [1705]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [1706]: </span><span class="n">ts</span><span class="o">.</span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-31 00:00:00, ..., 2011-12-30 00:00:00]</span>
<span class="go">Length: 12, Freq: BM, Timezone: None</span>

<span class="gp">In [1707]: </span><span class="n">ts</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-31 00:00:00, ..., 2011-05-31 00:00:00]</span>
<span class="go">Length: 5, Freq: BM, Timezone: None</span>

<span class="gp">In [1708]: </span><span class="n">ts</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-31 00:00:00, ..., 2011-11-30 00:00:00]</span>
<span class="go">Length: 6, Freq: 2BM, Timezone: None</span>
</pre></div>
</div>
<div class="section" id="partial-string-indexing">
<h3>Partial String Indexing<a class="headerlink" href="#partial-string-indexing" title="Permalink to this headline">¶</a></h3>
<p>You can pass in dates and strings that parse to dates as indexing parameters:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1709]: </span><span class="n">ts</span><span class="p">[</span><span class="s">&#39;1/31/2011&#39;</span><span class="p">]</span>
<span class="go">-1.2812473076599531</span>

<span class="gp">In [1710]: </span><span class="n">ts</span><span class="p">[</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">25</span><span class="p">):]</span>

<span class="go">2011-12-30    0.687738</span>
<span class="go">Freq: BM, dtype: float64</span>

<span class="gp">In [1711]: </span><span class="n">ts</span><span class="p">[</span><span class="s">&#39;10/31/2011&#39;</span><span class="p">:</span><span class="s">&#39;12/31/2011&#39;</span><span class="p">]</span>

<span class="go">2011-10-31    0.149748</span>
<span class="go">2011-11-30   -0.732339</span>
<span class="go">2011-12-30    0.687738</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>To provide convenience for accessing longer time series, you can also pass in
the year or year and month as strings:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1712]: </span><span class="n">ts</span><span class="p">[</span><span class="s">&#39;2011&#39;</span><span class="p">]</span>

<span class="go">2011-01-31   -1.281247</span>
<span class="go">2011-02-28   -0.727707</span>
<span class="go">2011-03-31   -0.121306</span>
<span class="go">2011-04-29   -0.097883</span>
<span class="go">2011-05-31    0.695775</span>
<span class="go">2011-06-30    0.341734</span>
<span class="go">2011-07-29    0.959726</span>
<span class="go">2011-08-31   -1.110336</span>
<span class="go">2011-09-30   -0.619976</span>
<span class="go">2011-10-31    0.149748</span>
<span class="go">2011-11-30   -0.732339</span>
<span class="go">2011-12-30    0.687738</span>
<span class="go">Freq: BM, dtype: float64</span>

<span class="gp">In [1713]: </span><span class="n">ts</span><span class="p">[</span><span class="s">&#39;2011-6&#39;</span><span class="p">]</span>

<span class="go">2011-06-30    0.341734</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>This type of slicing will work on a DataFrame with a <tt class="docutils literal"><span class="pre">DateTimeIndex</span></tt> as well. Since the
partial string selection is a form of label slicing, the endpoints <strong>will be</strong> included. This
would include matching times on an included date. Here&#8217;s an example:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1714]: </span><span class="n">dft</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">100000</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">],</span><span class="n">index</span><span class="o">=</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span><span class="n">freq</span><span class="o">=</span><span class="s">&#39;T&#39;</span><span class="p">))</span>

<span class="gp">In [1715]: </span><span class="n">dft</span>

<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">DatetimeIndex: 100000 entries, 2013-01-01 00:00:00 to 2013-03-11 10:39:00</span>
<span class="go">Freq: T</span>
<span class="go">Data columns (total 1 columns):</span>
<span class="go">A    100000  non-null values</span>
<span class="go">dtypes: float64(1)</span>

<span class="gp">In [1716]: </span><span class="n">dft</span><span class="p">[</span><span class="s">&#39;2013&#39;</span><span class="p">]</span>

<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">DatetimeIndex: 100000 entries, 2013-01-01 00:00:00 to 2013-03-11 10:39:00</span>
<span class="go">Freq: T</span>
<span class="go">Data columns (total 1 columns):</span>
<span class="go">A    100000  non-null values</span>
<span class="go">dtypes: float64(1)</span>
</pre></div>
</div>
<p>This starts on the very first time in the month, and includes the last date &amp; time for the month</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1717]: </span><span class="n">dft</span><span class="p">[</span><span class="s">&#39;2013-1&#39;</span><span class="p">:</span><span class="s">&#39;2013-2&#39;</span><span class="p">]</span>

<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">DatetimeIndex: 84960 entries, 2013-01-01 00:00:00 to 2013-02-28 23:59:00</span>
<span class="go">Freq: T</span>
<span class="go">Data columns (total 1 columns):</span>
<span class="go">A    84960  non-null values</span>
<span class="go">dtypes: float64(1)</span>
</pre></div>
</div>
<p>This specifies a stop time <strong>that includes all of the times on the last day</strong></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1718]: </span><span class="n">dft</span><span class="p">[</span><span class="s">&#39;2013-1&#39;</span><span class="p">:</span><span class="s">&#39;2013-2-28&#39;</span><span class="p">]</span>

<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">DatetimeIndex: 84960 entries, 2013-01-01 00:00:00 to 2013-02-28 23:59:00</span>
<span class="go">Freq: T</span>
<span class="go">Data columns (total 1 columns):</span>
<span class="go">A    84960  non-null values</span>
<span class="go">dtypes: float64(1)</span>
</pre></div>
</div>
<p>This specifies an <strong>exact</strong> stop time (and is not the same as the above)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1719]: </span><span class="n">dft</span><span class="p">[</span><span class="s">&#39;2013-1&#39;</span><span class="p">:</span><span class="s">&#39;2013-2-28 00:00:00&#39;</span><span class="p">]</span>

<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">DatetimeIndex: 83521 entries, 2013-01-01 00:00:00 to 2013-02-28 00:00:00</span>
<span class="go">Freq: T</span>
<span class="go">Data columns (total 1 columns):</span>
<span class="go">A    83521  non-null values</span>
<span class="go">dtypes: float64(1)</span>
</pre></div>
</div>
<p>We are stopping on the included end-point as its part of the index</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1720]: </span><span class="n">dft</span><span class="p">[</span><span class="s">&#39;2013-1-15&#39;</span><span class="p">:</span><span class="s">&#39;2013-1-15 12:30:00&#39;</span><span class="p">]</span>

<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">DatetimeIndex: 751 entries, 2013-01-15 00:00:00 to 2013-01-15 12:30:00</span>
<span class="go">Freq: T</span>
<span class="go">Data columns (total 1 columns):</span>
<span class="go">A    751  non-null values</span>
<span class="go">dtypes: float64(1)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The following selection will raises a <tt class="docutils literal"><span class="pre">KeyError</span></tt>; otherwise this selection methodology
would be inconsistent with other selection methods in pandas (as this is not a <em>slice</em>, nor does it
resolve to one)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dft</span><span class="p">[</span><span class="s">&#39;2013-1-15 12:30:00&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To select a single row, use <tt class="docutils literal"><span class="pre">.loc</span></tt></p>
<div class="last highlight-ipython"><div class="highlight"><pre><span class="gp">In [1721]: </span><span class="n">dft</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s">&#39;2013-1-15 12:30:00&#39;</span><span class="p">]</span>

<span class="go">A    0.193284</span>
<span class="go">Name: 2013-01-15 12:30:00, dtype: float64</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="truncating-fancy-indexing">
<h3>Truncating &amp; Fancy Indexing<a class="headerlink" href="#truncating-fancy-indexing" title="Permalink to this headline">¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">truncate</span></tt> convenience function is provided that is equivalent to slicing:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1722]: </span><span class="n">ts</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="n">before</span><span class="o">=</span><span class="s">&#39;10/31/2011&#39;</span><span class="p">,</span> <span class="n">after</span><span class="o">=</span><span class="s">&#39;12/31/2011&#39;</span><span class="p">)</span>

<span class="go">2011-10-31    0.149748</span>
<span class="go">2011-11-30   -0.732339</span>
<span class="go">2011-12-30    0.687738</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>Even complicated fancy indexing that breaks the DatetimeIndex&#8217;s frequency
regularity will result in a <tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt> (but frequency is lost):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1723]: </span><span class="n">ts</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span><span class="o">.</span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-31 00:00:00, ..., 2011-07-29 00:00:00]</span>
<span class="go">Length: 3, Freq: None, Timezone: None</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="dateoffset-objects">
<span id="timeseries-offsets"></span><h2>DateOffset objects<a class="headerlink" href="#dateoffset-objects" title="Permalink to this headline">¶</a></h2>
<p>In the preceding examples, we created DatetimeIndex objects at various
frequencies by passing in frequency strings like &#8216;M&#8217;, &#8216;W&#8217;, and &#8216;BM to the
<tt class="docutils literal"><span class="pre">freq</span></tt> keyword. Under the hood, these frequency strings are being translated
into an instance of pandas <tt class="docutils literal"><span class="pre">DateOffset</span></tt>, which represents a regular
frequency increment. Specific offset logic like &#8220;month&#8221;, &#8220;business day&#8221;, or
&#8220;one hour&#8221; is represented in its various subclasses.</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DateOffset</td>
<td>Generic offset class, defaults to 1 calendar day</td>
</tr>
<tr class="row-odd"><td>BDay</td>
<td>business day (weekday)</td>
</tr>
<tr class="row-even"><td>Week</td>
<td>one week, optionally anchored on a day of the week</td>
</tr>
<tr class="row-odd"><td>WeekOfMonth</td>
<td>the x-th day of the y-th week of each month</td>
</tr>
<tr class="row-even"><td>MonthEnd</td>
<td>calendar month end</td>
</tr>
<tr class="row-odd"><td>MonthBegin</td>
<td>calendar month begin</td>
</tr>
<tr class="row-even"><td>BMonthEnd</td>
<td>business month end</td>
</tr>
<tr class="row-odd"><td>BMonthBegin</td>
<td>business month begin</td>
</tr>
<tr class="row-even"><td>QuarterEnd</td>
<td>calendar quarter end</td>
</tr>
<tr class="row-odd"><td>QuarterBegin</td>
<td>calendar quarter begin</td>
</tr>
<tr class="row-even"><td>BQuarterEnd</td>
<td>business quarter end</td>
</tr>
<tr class="row-odd"><td>BQuarterBegin</td>
<td>business quarter begin</td>
</tr>
<tr class="row-even"><td>YearEnd</td>
<td>calendar year end</td>
</tr>
<tr class="row-odd"><td>YearBegin</td>
<td>calendar year begin</td>
</tr>
<tr class="row-even"><td>BYearEnd</td>
<td>business year end</td>
</tr>
<tr class="row-odd"><td>BYearBegin</td>
<td>business year begin</td>
</tr>
<tr class="row-even"><td>Hour</td>
<td>one hour</td>
</tr>
<tr class="row-odd"><td>Minute</td>
<td>one minute</td>
</tr>
<tr class="row-even"><td>Second</td>
<td>one second</td>
</tr>
<tr class="row-odd"><td>Milli</td>
<td>one millisecond</td>
</tr>
<tr class="row-even"><td>Micro</td>
<td>one microsecond</td>
</tr>
</tbody>
</table>
<p>The basic <tt class="docutils literal"><span class="pre">DateOffset</span></tt> takes the same arguments as
<tt class="docutils literal"><span class="pre">dateutil.relativedelta</span></tt>, which works like:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1724]: </span><span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2008</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>

<span class="gp">In [1725]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">relativedelta</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">datetime.datetime(2008, 12, 23, 0, 0)</span>
</pre></div>
</div>
<p>We could have done the same thing with <tt class="docutils literal"><span class="pre">DateOffset</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1726]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="o">*</span>

<span class="gp">In [1727]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">days</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="go">datetime.datetime(2008, 12, 23, 0, 0)</span>
</pre></div>
</div>
<p>The key features of a <tt class="docutils literal"><span class="pre">DateOffset</span></tt> object are:</p>
<blockquote>
<div><ul class="simple">
<li>it can be added / subtracted to/from a datetime object to obtain a
shifted date</li>
<li>it can be multiplied by an integer (positive or negative) so that the
increment will be applied multiple times</li>
<li>it has <tt class="docutils literal"><span class="pre">rollforward</span></tt> and <tt class="docutils literal"><span class="pre">rollback</span></tt> methods for moving a date forward
or backward to the next or previous &#8220;offset date&#8221;</li>
</ul>
</div></blockquote>
<p>Subclasses of <tt class="docutils literal"><span class="pre">DateOffset</span></tt> define the <tt class="docutils literal"><span class="pre">apply</span></tt> function which dictates
custom date increment logic, such as adding business days:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">BDay</span><span class="p">(</span><span class="n">DateOffset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;DateOffset increments between business days&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1728]: </span><span class="n">d</span> <span class="o">-</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">BDay</span><span class="p">()</span>
<span class="go">datetime.datetime(2008, 8, 11, 0, 0)</span>

<span class="gp">In [1729]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">BMonthEnd</span><span class="p">()</span>
<span class="go">datetime.datetime(2008, 8, 29, 0, 0)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">rollforward</span></tt> and <tt class="docutils literal"><span class="pre">rollback</span></tt> methods do exactly what you would expect:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1730]: </span><span class="n">d</span>
<span class="go">datetime.datetime(2008, 8, 18, 0, 0)</span>

<span class="gp">In [1731]: </span><span class="n">offset</span> <span class="o">=</span> <span class="n">BMonthEnd</span><span class="p">()</span>

<span class="gp">In [1732]: </span><span class="n">offset</span><span class="o">.</span><span class="n">rollforward</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">datetime.datetime(2008, 8, 29, 0, 0)</span>

<span class="gp">In [1733]: </span><span class="n">offset</span><span class="o">.</span><span class="n">rollback</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">datetime.datetime(2008, 7, 31, 0, 0)</span>
</pre></div>
</div>
<p>It&#8217;s definitely worth exploring the <tt class="docutils literal"><span class="pre">pandas.tseries.offsets</span></tt> module and the
various docstrings for the classes.</p>
<div class="section" id="parametric-offsets">
<h3>Parametric offsets<a class="headerlink" href="#parametric-offsets" title="Permalink to this headline">¶</a></h3>
<p>Some of the offsets can be &#8220;parameterized&#8221; when created to result in different
behavior. For example, the <tt class="docutils literal"><span class="pre">Week</span></tt> offset for generating weekly data accepts a
<tt class="docutils literal"><span class="pre">weekday</span></tt> parameter which results in the generated dates always lying on a
particular day of the week:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1734]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">Week</span><span class="p">()</span>
<span class="go">datetime.datetime(2008, 8, 25, 0, 0)</span>

<span class="gp">In [1735]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">Week</span><span class="p">(</span><span class="n">weekday</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="go">datetime.datetime(2008, 8, 22, 0, 0)</span>

<span class="gp">In [1736]: </span><span class="p">(</span><span class="n">d</span> <span class="o">+</span> <span class="n">Week</span><span class="p">(</span><span class="n">weekday</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">weekday</span><span class="p">()</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Another example is parameterizing <tt class="docutils literal"><span class="pre">YearEnd</span></tt> with the specific ending month:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1737]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">YearEnd</span><span class="p">()</span>
<span class="go">datetime.datetime(2008, 12, 31, 0, 0)</span>

<span class="gp">In [1738]: </span><span class="n">d</span> <span class="o">+</span> <span class="n">YearEnd</span><span class="p">(</span><span class="n">month</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="go">datetime.datetime(2009, 6, 30, 0, 0)</span>
</pre></div>
</div>
</div>
<div class="section" id="offset-aliases">
<span id="timeseries-alias"></span><h3>Offset Aliases<a class="headerlink" href="#offset-aliases" title="Permalink to this headline">¶</a></h3>
<p>A number of string aliases are given to useful common time series
frequencies. We will refer to these aliases as <em>offset aliases</em>
(referred to as <em>time rules</em> prior to v0.8.0).</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Alias</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>B</td>
<td>business day frequency</td>
</tr>
<tr class="row-odd"><td>D</td>
<td>calendar day frequency</td>
</tr>
<tr class="row-even"><td>W</td>
<td>weekly frequency</td>
</tr>
<tr class="row-odd"><td>M</td>
<td>month end frequency</td>
</tr>
<tr class="row-even"><td>BM</td>
<td>business month end frequency</td>
</tr>
<tr class="row-odd"><td>MS</td>
<td>month start frequency</td>
</tr>
<tr class="row-even"><td>BMS</td>
<td>business month start frequency</td>
</tr>
<tr class="row-odd"><td>Q</td>
<td>quarter end frequency</td>
</tr>
<tr class="row-even"><td>BQ</td>
<td>business quarter endfrequency</td>
</tr>
<tr class="row-odd"><td>QS</td>
<td>quarter start frequency</td>
</tr>
<tr class="row-even"><td>BQS</td>
<td>business quarter start frequency</td>
</tr>
<tr class="row-odd"><td>A</td>
<td>year end frequency</td>
</tr>
<tr class="row-even"><td>BA</td>
<td>business year end frequency</td>
</tr>
<tr class="row-odd"><td>AS</td>
<td>year start frequency</td>
</tr>
<tr class="row-even"><td>BAS</td>
<td>business year start frequency</td>
</tr>
<tr class="row-odd"><td>H</td>
<td>hourly frequency</td>
</tr>
<tr class="row-even"><td>T</td>
<td>minutely frequency</td>
</tr>
<tr class="row-odd"><td>S</td>
<td>secondly frequency</td>
</tr>
<tr class="row-even"><td>L</td>
<td>milliseonds</td>
</tr>
<tr class="row-odd"><td>U</td>
<td>microseconds</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="combining-aliases">
<h3>Combining Aliases<a class="headerlink" href="#combining-aliases" title="Permalink to this headline">¶</a></h3>
<p>As we have seen previously, the alias and the offset instance are fungible in
most functions:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1739]: </span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;B&#39;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-03 00:00:00, ..., 2011-01-07 00:00:00]</span>
<span class="go">Length: 5, Freq: B, Timezone: None</span>

<span class="gp">In [1740]: </span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">BDay</span><span class="p">())</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-03 00:00:00, ..., 2011-01-07 00:00:00]</span>
<span class="go">Length: 5, Freq: B, Timezone: None</span>
</pre></div>
</div>
<p>You can combine together day and intraday offsets:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1741]: </span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;2h20min&#39;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-01 00:00:00, ..., 2011-01-01 21:00:00]</span>
<span class="go">Length: 10, Freq: 140T, Timezone: None</span>

<span class="gp">In [1742]: </span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;1D10U&#39;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2011-01-01 00:00:00, ..., 2011-01-10 00:00:00.000090]</span>
<span class="go">Length: 10, Freq: 86400000010U, Timezone: None</span>
</pre></div>
</div>
</div>
<div class="section" id="anchored-offsets">
<h3>Anchored Offsets<a class="headerlink" href="#anchored-offsets" title="Permalink to this headline">¶</a></h3>
<p>For some frequencies you can specify an anchoring suffix:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Alias</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>W-SUN</td>
<td>weekly frequency (sundays). Same as &#8216;W&#8217;</td>
</tr>
<tr class="row-odd"><td>W-MON</td>
<td>weekly frequency (mondays)</td>
</tr>
<tr class="row-even"><td>W-TUE</td>
<td>weekly frequency (tuesdays)</td>
</tr>
<tr class="row-odd"><td>W-WED</td>
<td>weekly frequency (wednesdays)</td>
</tr>
<tr class="row-even"><td>W-THU</td>
<td>weekly frequency (thursdays)</td>
</tr>
<tr class="row-odd"><td>W-FRI</td>
<td>weekly frequency (fridays)</td>
</tr>
<tr class="row-even"><td>W-SAT</td>
<td>weekly frequency (saturdays)</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-DEC</td>
<td>quarterly frequency, year ends in December. Same as &#8216;Q&#8217;</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-JAN</td>
<td>quarterly frequency, year ends in January</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-FEB</td>
<td>quarterly frequency, year ends in February</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-MAR</td>
<td>quarterly frequency, year ends in March</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-APR</td>
<td>quarterly frequency, year ends in April</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-MAY</td>
<td>quarterly frequency, year ends in May</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-JUN</td>
<td>quarterly frequency, year ends in June</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-JUL</td>
<td>quarterly frequency, year ends in July</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-AUG</td>
<td>quarterly frequency, year ends in August</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-SEP</td>
<td>quarterly frequency, year ends in September</td>
</tr>
<tr class="row-odd"><td>(B)Q(S)-OCT</td>
<td>quarterly frequency, year ends in October</td>
</tr>
<tr class="row-even"><td>(B)Q(S)-NOV</td>
<td>quarterly frequency, year ends in November</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-DEC</td>
<td>annual frequency, anchored end of December. Same as &#8216;A&#8217;</td>
</tr>
<tr class="row-even"><td>(B)A(S)-JAN</td>
<td>annual frequency, anchored end of January</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-FEB</td>
<td>annual frequency, anchored end of February</td>
</tr>
<tr class="row-even"><td>(B)A(S)-MAR</td>
<td>annual frequency, anchored end of March</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-APR</td>
<td>annual frequency, anchored end of April</td>
</tr>
<tr class="row-even"><td>(B)A(S)-MAY</td>
<td>annual frequency, anchored end of May</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-JUN</td>
<td>annual frequency, anchored end of June</td>
</tr>
<tr class="row-even"><td>(B)A(S)-JUL</td>
<td>annual frequency, anchored end of July</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-AUG</td>
<td>annual frequency, anchored end of August</td>
</tr>
<tr class="row-even"><td>(B)A(S)-SEP</td>
<td>annual frequency, anchored end of September</td>
</tr>
<tr class="row-odd"><td>(B)A(S)-OCT</td>
<td>annual frequency, anchored end of October</td>
</tr>
<tr class="row-even"><td>(B)A(S)-NOV</td>
<td>annual frequency, anchored end of November</td>
</tr>
</tbody>
</table>
<p>These can be used as arguments to <tt class="docutils literal"><span class="pre">date_range</span></tt>, <tt class="docutils literal"><span class="pre">bdate_range</span></tt>, constructors
for <tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt>, as well as various other timeseries-related functions
in pandas.</p>
</div>
<div class="section" id="legacy-aliases">
<h3>Legacy Aliases<a class="headerlink" href="#legacy-aliases" title="Permalink to this headline">¶</a></h3>
<p>Note that prior to v0.8.0, time rules had a slightly different look. Pandas
will continue to support the legacy time rules for the time being but it is
strongly recommended that you switch to using the new offset aliases.</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Legacy Time Rule</th>
<th class="head">Offset Alias</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>WEEKDAY</td>
<td>B</td>
</tr>
<tr class="row-odd"><td>EOM</td>
<td>BM</td>
</tr>
<tr class="row-even"><td>W&#64;MON</td>
<td>W-MON</td>
</tr>
<tr class="row-odd"><td>W&#64;TUE</td>
<td>W-TUE</td>
</tr>
<tr class="row-even"><td>W&#64;WED</td>
<td>W-WED</td>
</tr>
<tr class="row-odd"><td>W&#64;THU</td>
<td>W-THU</td>
</tr>
<tr class="row-even"><td>W&#64;FRI</td>
<td>W-FRI</td>
</tr>
<tr class="row-odd"><td>W&#64;SAT</td>
<td>W-SAT</td>
</tr>
<tr class="row-even"><td>W&#64;SUN</td>
<td>W-SUN</td>
</tr>
<tr class="row-odd"><td>Q&#64;JAN</td>
<td>BQ-JAN</td>
</tr>
<tr class="row-even"><td>Q&#64;FEB</td>
<td>BQ-FEB</td>
</tr>
<tr class="row-odd"><td>Q&#64;MAR</td>
<td>BQ-MAR</td>
</tr>
<tr class="row-even"><td>A&#64;JAN</td>
<td>BA-JAN</td>
</tr>
<tr class="row-odd"><td>A&#64;FEB</td>
<td>BA-FEB</td>
</tr>
<tr class="row-even"><td>A&#64;MAR</td>
<td>BA-MAR</td>
</tr>
<tr class="row-odd"><td>A&#64;APR</td>
<td>BA-APR</td>
</tr>
<tr class="row-even"><td>A&#64;MAY</td>
<td>BA-MAY</td>
</tr>
<tr class="row-odd"><td>A&#64;JUN</td>
<td>BA-JUN</td>
</tr>
<tr class="row-even"><td>A&#64;JUL</td>
<td>BA-JUL</td>
</tr>
<tr class="row-odd"><td>A&#64;AUG</td>
<td>BA-AUG</td>
</tr>
<tr class="row-even"><td>A&#64;SEP</td>
<td>BA-SEP</td>
</tr>
<tr class="row-odd"><td>A&#64;OCT</td>
<td>BA-OCT</td>
</tr>
<tr class="row-even"><td>A&#64;NOV</td>
<td>BA-NOV</td>
</tr>
<tr class="row-odd"><td>A&#64;DEC</td>
<td>BA-DEC</td>
</tr>
<tr class="row-even"><td>min</td>
<td>T</td>
</tr>
<tr class="row-odd"><td>ms</td>
<td>L</td>
</tr>
<tr class="row-even"><td>us: &#8220;U&#8221;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>As you can see, legacy quarterly and annual frequencies are business quarter
and business year ends. Please also note the legacy time rule for milliseconds
<tt class="docutils literal"><span class="pre">ms</span></tt> versus the new offset alias for month start <tt class="docutils literal"><span class="pre">MS</span></tt>. This means that
offset alias parsing is case sensitive.</p>
</div>
</div>
<div class="section" id="time-series-related-instance-methods">
<span id="timeseries-advanced-datetime"></span><h2>Time series-related instance methods<a class="headerlink" href="#time-series-related-instance-methods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="shifting-lagging">
<h3>Shifting / lagging<a class="headerlink" href="#shifting-lagging" title="Permalink to this headline">¶</a></h3>
<p>One may want to <em>shift</em> or <em>lag</em> the values in a TimeSeries back and forward in
time. The method for this is <tt class="docutils literal"><span class="pre">shift</span></tt>, which is available on all of the pandas
objects. In DataFrame, <tt class="docutils literal"><span class="pre">shift</span></tt> will currently only shift along the <tt class="docutils literal"><span class="pre">index</span></tt>
and in Panel along the <tt class="docutils literal"><span class="pre">major_axis</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1743]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">ts</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>

<span class="gp">In [1744]: </span><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="go">2011-01-31         NaN</span>
<span class="go">2011-02-28   -1.281247</span>
<span class="go">2011-03-31   -0.727707</span>
<span class="go">2011-04-29   -0.121306</span>
<span class="go">2011-05-31   -0.097883</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>The shift method accepts an <tt class="docutils literal"><span class="pre">freq</span></tt> argument which can accept a
<tt class="docutils literal"><span class="pre">DateOffset</span></tt> class or other <tt class="docutils literal"><span class="pre">timedelta</span></tt>-like object or also a <a class="reference internal" href="#timeseries-alias"><em>offset alias</em></a>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1745]: </span><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">datetools</span><span class="o">.</span><span class="n">bday</span><span class="p">)</span>

<span class="go">2011-02-07   -1.281247</span>
<span class="go">2011-03-07   -0.727707</span>
<span class="go">2011-04-07   -0.121306</span>
<span class="go">2011-05-06   -0.097883</span>
<span class="go">2011-06-07    0.695775</span>
<span class="go">dtype: float64</span>

<span class="gp">In [1746]: </span><span class="n">ts</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;BM&#39;</span><span class="p">)</span>

<span class="go">2011-06-30   -1.281247</span>
<span class="go">2011-07-29   -0.727707</span>
<span class="go">2011-08-31   -0.121306</span>
<span class="go">2011-09-30   -0.097883</span>
<span class="go">2011-10-31    0.695775</span>
<span class="go">Freq: BM, dtype: float64</span>
</pre></div>
</div>
<p>Rather than changing the alignment of the data and the index, <tt class="docutils literal"><span class="pre">DataFrame</span></tt> and
<tt class="docutils literal"><span class="pre">TimeSeries</span></tt> objects also have a <tt class="docutils literal"><span class="pre">tshift</span></tt> convenience method that changes
all the dates in the index by a specified number of offsets:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1747]: </span><span class="n">ts</span><span class="o">.</span><span class="n">tshift</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">)</span>

<span class="go">2011-02-05   -1.281247</span>
<span class="go">2011-03-05   -0.727707</span>
<span class="go">2011-04-05   -0.121306</span>
<span class="go">2011-05-04   -0.097883</span>
<span class="go">2011-06-05    0.695775</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>Note that with <tt class="docutils literal"><span class="pre">tshift</span></tt>, the leading entry is no longer NaN because the data
is not being realigned.</p>
</div>
<div class="section" id="frequency-conversion">
<h3>Frequency conversion<a class="headerlink" href="#frequency-conversion" title="Permalink to this headline">¶</a></h3>
<p>The primary function for changing frequencies is the <tt class="docutils literal"><span class="pre">asfreq</span></tt> function.
For a <tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt>, this is basically just a thin, but convenient wrapper
around <tt class="docutils literal"><span class="pre">reindex</span></tt> which generates a <tt class="docutils literal"><span class="pre">date_range</span></tt> and calls <tt class="docutils literal"><span class="pre">reindex</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1748]: </span><span class="n">dr</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2010&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="mi">3</span> <span class="o">*</span> <span class="n">datetools</span><span class="o">.</span><span class="n">bday</span><span class="p">)</span>

<span class="gp">In [1749]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">dr</span><span class="p">)</span>

<span class="gp">In [1750]: </span><span class="n">ts</span>

<span class="go">2010-01-01   -0.659574</span>
<span class="go">2010-01-06    1.494522</span>
<span class="go">2010-01-11   -0.778425</span>
<span class="go">Freq: 3B, dtype: float64</span>

<span class="gp">In [1751]: </span><span class="n">ts</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="n">BDay</span><span class="p">())</span>

<span class="go">2010-01-01   -0.659574</span>
<span class="go">2010-01-04         NaN</span>
<span class="go">2010-01-05         NaN</span>
<span class="go">2010-01-06    1.494522</span>
<span class="go">2010-01-07         NaN</span>
<span class="go">2010-01-08         NaN</span>
<span class="go">2010-01-11   -0.778425</span>
<span class="go">Freq: B, dtype: float64</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">asfreq</span></tt> provides a further convenience so you can specify an interpolation
method for any gaps that may appear after the frequency conversion</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1752]: </span><span class="n">ts</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="n">BDay</span><span class="p">(),</span> <span class="n">method</span><span class="o">=</span><span class="s">&#39;pad&#39;</span><span class="p">)</span>

<span class="go">2010-01-01   -0.659574</span>
<span class="go">2010-01-04   -0.659574</span>
<span class="go">2010-01-05   -0.659574</span>
<span class="go">2010-01-06    1.494522</span>
<span class="go">2010-01-07    1.494522</span>
<span class="go">2010-01-08    1.494522</span>
<span class="go">2010-01-11   -0.778425</span>
<span class="go">Freq: B, dtype: float64</span>
</pre></div>
</div>
</div>
<div class="section" id="filling-forward-backward">
<h3>Filling forward / backward<a class="headerlink" href="#filling-forward-backward" title="Permalink to this headline">¶</a></h3>
<p>Related to <tt class="docutils literal"><span class="pre">asfreq</span></tt> and <tt class="docutils literal"><span class="pre">reindex</span></tt> is the <tt class="docutils literal"><span class="pre">fillna</span></tt> function documented in
the <a class="reference internal" href="missing_data.html#missing-data-fillna"><em>missing data section</em></a>.</p>
</div>
<div class="section" id="converting-to-python-datetimes">
<h3>Converting to Python datetimes<a class="headerlink" href="#converting-to-python-datetimes" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt> can be converted to an array of Python native datetime.datetime objects using the
<tt class="docutils literal"><span class="pre">to_pydatetime</span></tt> method.</p>
</div>
</div>
<div class="section" id="up-and-downsampling">
<span id="timeseries-resampling"></span><h2>Up- and downsampling<a class="headerlink" href="#up-and-downsampling" title="Permalink to this headline">¶</a></h2>
<p>With 0.8, pandas introduces simple, powerful, and efficient functionality for
performing resampling operations during frequency conversion (e.g., converting
secondly data into 5-minutely data). This is extremely common in, but not
limited to, financial applications.</p>
<p>See some <a class="reference internal" href="cookbook.html#cookbook-resample"><em>cookbook examples</em></a> for some advanced strategies</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1753]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;S&#39;</span><span class="p">)</span>

<span class="gp">In [1754]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [1755]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;sum&#39;</span><span class="p">)</span>

<span class="go">2012-01-01    25103</span>
<span class="go">Freq: 5T, dtype: int64</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">resample</span></tt> function is very flexible and allows you to specify many
different parameters to control the frequency conversion and resampling
operation.</p>
<p>The <tt class="docutils literal"><span class="pre">how</span></tt> parameter can be a function name or numpy array function that takes
an array and produces aggregated values:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1756]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">)</span> <span class="c"># default is mean</span>

<span class="go">2012-01-01    251.03</span>
<span class="go">Freq: 5T, dtype: float64</span>

<span class="gp">In [1757]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;ohlc&#39;</span><span class="p">)</span>

<span class="go">            open  high  low  close</span>
<span class="go">2012-01-01   308   460    9    205</span>

<span class="gp">In [1758]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>

<span class="go">2012-01-01   NaN</span>
<span class="go">Freq: 5T, dtype: float64</span>
</pre></div>
</div>
<p>Any function available via <a class="reference internal" href="groupby.html#groupby-dispatch"><em>dispatching</em></a> can be given to
the <tt class="docutils literal"><span class="pre">how</span></tt> parameter by name, including <tt class="docutils literal"><span class="pre">sum</span></tt>, <tt class="docutils literal"><span class="pre">mean</span></tt>, <tt class="docutils literal"><span class="pre">std</span></tt>, <tt class="docutils literal"><span class="pre">max</span></tt>,
<tt class="docutils literal"><span class="pre">min</span></tt>, <tt class="docutils literal"><span class="pre">median</span></tt>, <tt class="docutils literal"><span class="pre">first</span></tt>, <tt class="docutils literal"><span class="pre">last</span></tt>, <tt class="docutils literal"><span class="pre">ohlc</span></tt>.</p>
<p>For downsampling, <tt class="docutils literal"><span class="pre">closed</span></tt> can be set to &#8216;left&#8217; or &#8216;right&#8217; to specify which
end of the interval is closed:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1759]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">)</span>

<span class="go">2011-12-31 23:55:00    308.000000</span>
<span class="go">2012-01-01 00:00:00    250.454545</span>
<span class="go">Freq: 5T, dtype: float64</span>

<span class="gp">In [1760]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">closed</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">)</span>

<span class="go">2012-01-01    251.03</span>
<span class="go">Freq: 5T, dtype: float64</span>
</pre></div>
</div>
<p>For upsampling, the <tt class="docutils literal"><span class="pre">fill_method</span></tt> and <tt class="docutils literal"><span class="pre">limit</span></tt> parameters can be specified
to interpolate over the gaps that are created:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># from secondly to every 250 milliseconds</span>
<span class="gp">In [1761]: </span><span class="n">ts</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;250L&#39;</span><span class="p">)</span>

<span class="go">2012-01-01 00:00:00           308</span>
<span class="go">2012-01-01 00:00:00.250000    NaN</span>
<span class="go">2012-01-01 00:00:00.500000    NaN</span>
<span class="go">2012-01-01 00:00:00.750000    NaN</span>
<span class="go">2012-01-01 00:00:01           204</span>
<span class="go">Freq: 250L, dtype: float64</span>

<span class="gp">In [1762]: </span><span class="n">ts</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;250L&#39;</span><span class="p">,</span> <span class="n">fill_method</span><span class="o">=</span><span class="s">&#39;pad&#39;</span><span class="p">)</span>

<span class="go">2012-01-01 00:00:00           308</span>
<span class="go">2012-01-01 00:00:00.250000    308</span>
<span class="go">2012-01-01 00:00:00.500000    308</span>
<span class="go">2012-01-01 00:00:00.750000    308</span>
<span class="go">2012-01-01 00:00:01           204</span>
<span class="go">Freq: 250L, dtype: int64</span>

<span class="gp">In [1763]: </span><span class="n">ts</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;250L&#39;</span><span class="p">,</span> <span class="n">fill_method</span><span class="o">=</span><span class="s">&#39;pad&#39;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="go">2012-01-01 00:00:00           308</span>
<span class="go">2012-01-01 00:00:00.250000    308</span>
<span class="go">2012-01-01 00:00:00.500000    308</span>
<span class="go">2012-01-01 00:00:00.750000    NaN</span>
<span class="go">2012-01-01 00:00:01           204</span>
<span class="go">Freq: 250L, dtype: float64</span>
</pre></div>
</div>
<p>Parameters like <tt class="docutils literal"><span class="pre">label</span></tt> and <tt class="docutils literal"><span class="pre">loffset</span></tt> are used to manipulate the resulting
labels. <tt class="docutils literal"><span class="pre">label</span></tt> specifies whether the result is labeled with the beginning or
the end of the interval. <tt class="docutils literal"><span class="pre">loffset</span></tt> performs a time adjustment on the output
labels.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1764]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">)</span> <span class="c"># by default label=&#39;right&#39;</span>

<span class="go">2012-01-01    251.03</span>
<span class="go">Freq: 5T, dtype: float64</span>

<span class="gp">In [1765]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">)</span>

<span class="go">2012-01-01    251.03</span>
<span class="go">Freq: 5T, dtype: float64</span>

<span class="gp">In [1766]: </span><span class="n">ts</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s">&#39;5Min&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">loffset</span><span class="o">=</span><span class="s">&#39;1s&#39;</span><span class="p">)</span>

<span class="go">2012-01-01 00:00:01    251.03</span>
<span class="go">dtype: float64</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">axis</span></tt> parameter can be set to 0 or 1 and allows you to resample the
specified axis for a DataFrame.</p>
<p><tt class="docutils literal"><span class="pre">kind</span></tt> can be set to &#8216;timestamp&#8217; or &#8216;period&#8217; to convert the resulting index
to/from time-stamp and time-span representations. By default <tt class="docutils literal"><span class="pre">resample</span></tt>
retains the input representation.</p>
<p><tt class="docutils literal"><span class="pre">convention</span></tt> can be set to &#8216;start&#8217; or &#8216;end&#8217; when resampling period data
(detail below). It specifies how low frequency periods are converted to higher
frequency periods.</p>
<p>Note that 0.8 marks a watershed in the timeseries functionality in pandas. In
previous versions, resampling had to be done using a combination of
<tt class="docutils literal"><span class="pre">date_range</span></tt>, <tt class="docutils literal"><span class="pre">groupby</span></tt> with <tt class="docutils literal"><span class="pre">asof</span></tt>, and then calling an aggregation
function on the grouped object. This was not nearly convenient or performant as
the new pandas timeseries API.</p>
</div>
<div class="section" id="time-span-representation">
<span id="timeseries-periods"></span><h2>Time Span Representation<a class="headerlink" href="#time-span-representation" title="Permalink to this headline">¶</a></h2>
<p>Regular intervals of time are represented by <tt class="docutils literal"><span class="pre">Period</span></tt> objects in pandas while
sequences of <tt class="docutils literal"><span class="pre">Period</span></tt> objects are collected in a <tt class="docutils literal"><span class="pre">PeriodIndex</span></tt>, which can
be created with the convenience function <tt class="docutils literal"><span class="pre">period_range</span></tt>.</p>
<div class="section" id="period">
<h3>Period<a class="headerlink" href="#period" title="Permalink to this headline">¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">Period</span></tt> represents a span of time (e.g., a day, a month, a quarter, etc).
It can be created using a frequency alias:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1767]: </span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2012&#39;, &#39;A-DEC&#39;)</span>

<span class="gp">In [1768]: </span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012-1-1&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2012-01-01&#39;, &#39;D&#39;)</span>

<span class="gp">In [1769]: </span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012-1-1 19:00&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;H&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2012-01-01 19:00&#39;, &#39;H&#39;)</span>
</pre></div>
</div>
<p>Unlike time stamped data, pandas does not support frequencies at multiples of
DateOffsets (e.g., &#8216;3Min&#8217;) for periods.</p>
<p>Adding and subtracting integers from periods shifts the period by its own
frequency.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1770]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span>

<span class="gp">In [1771]: </span><span class="n">p</span> <span class="o">+</span> <span class="mi">1</span>
<span class="go">Period(&#39;2013&#39;, &#39;A-DEC&#39;)</span>

<span class="gp">In [1772]: </span><span class="n">p</span> <span class="o">-</span> <span class="mi">3</span>
<span class="go">Period(&#39;2009&#39;, &#39;A-DEC&#39;)</span>
</pre></div>
</div>
<p>Taking the difference of <tt class="docutils literal"><span class="pre">Period</span></tt> instances with the same frequency will
return the number of frequency units between them:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1773]: </span><span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">Period</span><span class="p">(</span><span class="s">&#39;2002&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
</div>
<div class="section" id="periodindex-and-period-range">
<h3>PeriodIndex and period_range<a class="headerlink" href="#periodindex-and-period-range" title="Permalink to this headline">¶</a></h3>
<p>Regular sequences of <tt class="docutils literal"><span class="pre">Period</span></tt> objects can be collected in a <tt class="docutils literal"><span class="pre">PeriodIndex</span></tt>,
which can be constructed using the <tt class="docutils literal"><span class="pre">period_range</span></tt> convenience function:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1774]: </span><span class="n">prng</span> <span class="o">=</span> <span class="n">period_range</span><span class="p">(</span><span class="s">&#39;1/1/2011&#39;</span><span class="p">,</span> <span class="s">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [1775]: </span><span class="n">prng</span>

<span class="go">&lt;class &#39;pandas.tseries.period.PeriodIndex&#39;&gt;</span>
<span class="go">freq: M</span>
<span class="go">[2011-01, ..., 2012-01]</span>
<span class="go">length: 13</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">PeriodIndex</span></tt> constructor can also be used directly:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1776]: </span><span class="n">PeriodIndex</span><span class="p">([</span><span class="s">&#39;2011-1&#39;</span><span class="p">,</span> <span class="s">&#39;2011-2&#39;</span><span class="p">,</span> <span class="s">&#39;2011-3&#39;</span><span class="p">],</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.tseries.period.PeriodIndex&#39;&gt;</span>
<span class="go">freq: M</span>
<span class="go">[2011-01, ..., 2011-03]</span>
<span class="go">length: 3</span>
</pre></div>
</div>
<p>Just like <tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt>, a <tt class="docutils literal"><span class="pre">PeriodIndex</span></tt> can also be used to index pandas
objects:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1777]: </span><span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prng</span><span class="p">)),</span> <span class="n">prng</span><span class="p">)</span>

<span class="go">2011-01   -0.253355</span>
<span class="go">2011-02   -1.426908</span>
<span class="go">2011-03    1.548971</span>
<span class="go">2011-04   -0.088718</span>
<span class="go">2011-05   -1.771348</span>
<span class="go">2011-06   -0.989328</span>
<span class="go">2011-07   -1.584789</span>
<span class="go">2011-08   -0.288786</span>
<span class="go">2011-09   -2.029806</span>
<span class="go">2011-10   -0.761200</span>
<span class="go">2011-11   -1.603608</span>
<span class="go">2011-12    1.756171</span>
<span class="go">2012-01    0.256502</span>
<span class="go">Freq: M, dtype: float64</span>
</pre></div>
</div>
</div>
<div class="section" id="frequency-conversion-and-resampling-with-periodindex">
<h3>Frequency Conversion and Resampling with PeriodIndex<a class="headerlink" href="#frequency-conversion-and-resampling-with-periodindex" title="Permalink to this headline">¶</a></h3>
<p>The frequency of Periods and PeriodIndex can be converted via the <tt class="docutils literal"><span class="pre">asfreq</span></tt>
method. Let&#8217;s start with the fiscal year 2011, ending in December:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1778]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Period</span><span class="p">(</span><span class="s">&#39;2011&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;A-DEC&#39;</span><span class="p">)</span>

<span class="gp">In [1779]: </span><span class="n">p</span>
<span class="go">Period(&#39;2011&#39;, &#39;A-DEC&#39;)</span>
</pre></div>
</div>
<p>We can convert it to a monthly frequency. Using the <tt class="docutils literal"><span class="pre">how</span></tt> parameter, we can
specify whether to return the starting or ending month:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1780]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;start&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2011-01&#39;, &#39;M&#39;)</span>

<span class="gp">In [1781]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;end&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2011-12&#39;, &#39;M&#39;)</span>
</pre></div>
</div>
<p>The shorthands &#8216;s&#8217; and &#8216;e&#8217; are provided for convenience:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1782]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2011-01&#39;, &#39;M&#39;)</span>

<span class="gp">In [1783]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2011-12&#39;, &#39;M&#39;)</span>
</pre></div>
</div>
<p>Converting to a &#8220;super-period&#8221; (e.g., annual frequency is a super-period of
quarterly frequency) automatically returns the super-period that includes the
input period:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1784]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Period</span><span class="p">(</span><span class="s">&#39;2011-12&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [1785]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;A-NOV&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2012&#39;, &#39;A-NOV&#39;)</span>
</pre></div>
</div>
<p>Note that since we converted to an annual frequency that ends the year in
November, the monthly period of December 2011 is actually in the 2012 A-NOV
period.</p>
<p id="timeseries-quarterly">Period conversions with anchored frequencies are particularly useful for
working with various quarterly data common to economics, business, and other
fields. Many organizations define quarters relative to the month in which their
fiscal year start and ends. Thus, first quarter of 2011 could start in 2010 or
a few months into 2011. Via anchored frequencies, pandas works all quarterly
frequencies <tt class="docutils literal"><span class="pre">Q-JAN</span></tt> through <tt class="docutils literal"><span class="pre">Q-DEC</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">Q-DEC</span></tt> define regular calendar quarters:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1786]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Period</span><span class="p">(</span><span class="s">&#39;2012Q1&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;Q-DEC&#39;</span><span class="p">)</span>

<span class="gp">In [1787]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2012-01-01&#39;, &#39;D&#39;)</span>

<span class="gp">In [1788]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2012-03-31&#39;, &#39;D&#39;)</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">Q-MAR</span></tt> defines fiscal year end in March:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1789]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">Period</span><span class="p">(</span><span class="s">&#39;2011Q4&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;Q-MAR&#39;</span><span class="p">)</span>

<span class="gp">In [1790]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2011-01-01&#39;, &#39;D&#39;)</span>

<span class="gp">In [1791]: </span><span class="n">p</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)</span>
<span class="go">Period(&#39;2011-03-31&#39;, &#39;D&#39;)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="converting-between-representations">
<span id="timeseries-interchange"></span><h2>Converting between Representations<a class="headerlink" href="#converting-between-representations" title="Permalink to this headline">¶</a></h2>
<p>Timestamped data can be converted to PeriodIndex-ed data using <tt class="docutils literal"><span class="pre">to_period</span></tt>
and vice-versa using <tt class="docutils literal"><span class="pre">to_timestamp</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1792]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2012&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [1793]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">index</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>

<span class="gp">In [1794]: </span><span class="n">ts</span>

<span class="go">2012-01-31    0.020601</span>
<span class="go">2012-02-29   -0.411719</span>
<span class="go">2012-03-31    2.079413</span>
<span class="go">2012-04-30   -1.077911</span>
<span class="go">2012-05-31    0.099258</span>
<span class="go">Freq: M, dtype: float64</span>

<span class="gp">In [1795]: </span><span class="n">ps</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">to_period</span><span class="p">()</span>

<span class="gp">In [1796]: </span><span class="n">ps</span>

<span class="go">2012-01    0.020601</span>
<span class="go">2012-02   -0.411719</span>
<span class="go">2012-03    2.079413</span>
<span class="go">2012-04   -1.077911</span>
<span class="go">2012-05    0.099258</span>
<span class="go">Freq: M, dtype: float64</span>

<span class="gp">In [1797]: </span><span class="n">ps</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">()</span>

<span class="go">2012-01-01    0.020601</span>
<span class="go">2012-02-01   -0.411719</span>
<span class="go">2012-03-01    2.079413</span>
<span class="go">2012-04-01   -1.077911</span>
<span class="go">2012-05-01    0.099258</span>
<span class="go">Freq: MS, dtype: float64</span>
</pre></div>
</div>
<p>Remember that &#8216;s&#8217; and &#8216;e&#8217; can be used to return the timestamps at the start or
end of the period:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1798]: </span><span class="n">ps</span><span class="o">.</span><span class="n">to_timestamp</span><span class="p">(</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s">&#39;s&#39;</span><span class="p">)</span>

<span class="go">2012-01-01    0.020601</span>
<span class="go">2012-02-01   -0.411719</span>
<span class="go">2012-03-01    2.079413</span>
<span class="go">2012-04-01   -1.077911</span>
<span class="go">2012-05-01    0.099258</span>
<span class="go">Freq: MS, dtype: float64</span>
</pre></div>
</div>
<p>Converting between period and timestamp enables some convenient arithmetic
functions to be used. In the following example, we convert a quarterly
frequency with year ending in November to 9am of the end of the month following
the quarter end:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1799]: </span><span class="n">prng</span> <span class="o">=</span> <span class="n">period_range</span><span class="p">(</span><span class="s">&#39;1990Q1&#39;</span><span class="p">,</span> <span class="s">&#39;2000Q4&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;Q-NOV&#39;</span><span class="p">)</span>

<span class="gp">In [1800]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prng</span><span class="p">)),</span> <span class="n">prng</span><span class="p">)</span>

<span class="gp">In [1801]: </span><span class="n">ts</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">prng</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s">&#39;H&#39;</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="mi">9</span>

<span class="gp">In [1802]: </span><span class="n">ts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="go">1990-03-01 09:00   -0.089851</span>
<span class="go">1990-06-01 09:00    0.711329</span>
<span class="go">1990-09-01 09:00    0.531761</span>
<span class="go">1990-12-01 09:00    0.265615</span>
<span class="go">1991-03-01 09:00   -0.174462</span>
<span class="go">Freq: H, dtype: float64</span>
</pre></div>
</div>
</div>
<div class="section" id="time-zone-handling">
<span id="timeseries-timezone"></span><h2>Time Zone Handling<a class="headerlink" href="#time-zone-handling" title="Permalink to this headline">¶</a></h2>
<p>Using <tt class="docutils literal"><span class="pre">pytz</span></tt>, pandas provides rich support for working with timestamps in
different time zones. By default, pandas objects are time zone unaware:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1803]: </span><span class="n">rng</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [1804]: </span><span class="k">print</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span>
<span class="go">None</span>
</pre></div>
</div>
<p>To supply the time zone, you can use the <tt class="docutils literal"><span class="pre">tz</span></tt> keyword to <tt class="docutils literal"><span class="pre">date_range</span></tt> and
other functions:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1805]: </span><span class="n">rng_utc</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;3/6/2012 00:00&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>

<span class="gp">In [1806]: </span><span class="k">print</span><span class="p">(</span><span class="n">rng_utc</span><span class="o">.</span><span class="n">tz</span><span class="p">)</span>
<span class="go">UTC</span>
</pre></div>
</div>
<p>Timestamps, like Python&#8217;s <tt class="docutils literal"><span class="pre">datetime.datetime</span></tt> object can be either time zone
naive or time zone aware. Naive time series and DatetimeIndex objects can be
<em>localized</em> using <tt class="docutils literal"><span class="pre">tz_localize</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1807]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rng</span><span class="p">)),</span> <span class="n">rng</span><span class="p">)</span>

<span class="gp">In [1808]: </span><span class="n">ts_utc</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>

<span class="gp">In [1809]: </span><span class="n">ts_utc</span>

<span class="go">2012-03-06 00:00:00+00:00   -2.189293</span>
<span class="go">2012-03-07 00:00:00+00:00   -1.819506</span>
<span class="go">2012-03-08 00:00:00+00:00    0.229798</span>
<span class="go">2012-03-09 00:00:00+00:00    0.119425</span>
<span class="go">2012-03-10 00:00:00+00:00    1.808966</span>
<span class="go">2012-03-11 00:00:00+00:00    1.015841</span>
<span class="go">2012-03-12 00:00:00+00:00   -1.651784</span>
<span class="go">2012-03-13 00:00:00+00:00    0.347674</span>
<span class="go">2012-03-14 00:00:00+00:00   -0.773688</span>
<span class="go">2012-03-15 00:00:00+00:00    0.425863</span>
<span class="go">2012-03-16 00:00:00+00:00    0.579486</span>
<span class="go">2012-03-17 00:00:00+00:00   -0.745396</span>
<span class="go">2012-03-18 00:00:00+00:00    0.141880</span>
<span class="go">2012-03-19 00:00:00+00:00   -1.077754</span>
<span class="go">2012-03-20 00:00:00+00:00   -1.301174</span>
<span class="go">Freq: D, dtype: float64</span>
</pre></div>
</div>
<p>You can use the <tt class="docutils literal"><span class="pre">tz_convert</span></tt> method to convert pandas objects to convert
tz-aware data to another time zone:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1810]: </span><span class="n">ts_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>

<span class="go">2012-03-05 19:00:00-05:00   -2.189293</span>
<span class="go">2012-03-06 19:00:00-05:00   -1.819506</span>
<span class="go">2012-03-07 19:00:00-05:00    0.229798</span>
<span class="go">2012-03-08 19:00:00-05:00    0.119425</span>
<span class="go">2012-03-09 19:00:00-05:00    1.808966</span>
<span class="go">2012-03-10 19:00:00-05:00    1.015841</span>
<span class="go">2012-03-11 20:00:00-04:00   -1.651784</span>
<span class="go">2012-03-12 20:00:00-04:00    0.347674</span>
<span class="go">2012-03-13 20:00:00-04:00   -0.773688</span>
<span class="go">2012-03-14 20:00:00-04:00    0.425863</span>
<span class="go">2012-03-15 20:00:00-04:00    0.579486</span>
<span class="go">2012-03-16 20:00:00-04:00   -0.745396</span>
<span class="go">2012-03-17 20:00:00-04:00    0.141880</span>
<span class="go">2012-03-18 20:00:00-04:00   -1.077754</span>
<span class="go">2012-03-19 20:00:00-04:00   -1.301174</span>
<span class="go">Freq: D, dtype: float64</span>
</pre></div>
</div>
<p>Under the hood, all timestamps are stored in UTC. Scalar values from a
<tt class="docutils literal"><span class="pre">DatetimeIndex</span></tt> with a time zone will have their fields (day, hour, minute)
localized to the time zone. However, timestamps with the same UTC value are
still considered to be equal even if they are in different time zones:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1811]: </span><span class="n">rng_eastern</span> <span class="o">=</span> <span class="n">rng_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>

<span class="gp">In [1812]: </span><span class="n">rng_berlin</span> <span class="o">=</span> <span class="n">rng_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;Europe/Berlin&#39;</span><span class="p">)</span>

<span class="gp">In [1813]: </span><span class="n">rng_eastern</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">Timestamp(&#39;2012-03-10 19:00:00-0500&#39;, tz=&#39;US/Eastern&#39;)</span>

<span class="gp">In [1814]: </span><span class="n">rng_berlin</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">Timestamp(&#39;2012-03-11 01:00:00+0100&#39;, tz=&#39;Europe/Berlin&#39;)</span>

<span class="gp">In [1815]: </span><span class="n">rng_eastern</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="n">rng_berlin</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Like Series, DataFrame, and DatetimeIndex, Timestamps can be converted to other
time zones using <tt class="docutils literal"><span class="pre">tz_convert</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1816]: </span><span class="n">rng_eastern</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">Timestamp(&#39;2012-03-10 19:00:00-0500&#39;, tz=&#39;US/Eastern&#39;)</span>

<span class="gp">In [1817]: </span><span class="n">rng_berlin</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">Timestamp(&#39;2012-03-11 01:00:00+0100&#39;, tz=&#39;Europe/Berlin&#39;)</span>

<span class="gp">In [1818]: </span><span class="n">rng_eastern</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;Europe/Berlin&#39;</span><span class="p">)</span>
<span class="go">Timestamp(&#39;2012-03-11 01:00:00+0100&#39;, tz=&#39;Europe/Berlin&#39;)</span>
</pre></div>
</div>
<p>Localization of Timestamps functions just like DatetimeIndex and TimeSeries:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1819]: </span><span class="n">rng</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="go">Timestamp(&#39;2012-03-11 00:00:00&#39;, tz=None)</span>

<span class="gp">In [1820]: </span><span class="n">rng</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s">&#39;Asia/Shanghai&#39;</span><span class="p">)</span>
<span class="go">Timestamp(&#39;2012-03-11 00:00:00+0800&#39;, tz=&#39;Asia/Shanghai&#39;)</span>
</pre></div>
</div>
<p>Operations between TimeSeries in difficult time zones will yield UTC
TimeSeries, aligning the data on the UTC timestamps:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1821]: </span><span class="n">eastern</span> <span class="o">=</span> <span class="n">ts_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>

<span class="gp">In [1822]: </span><span class="n">berlin</span> <span class="o">=</span> <span class="n">ts_utc</span><span class="o">.</span><span class="n">tz_convert</span><span class="p">(</span><span class="s">&#39;Europe/Berlin&#39;</span><span class="p">)</span>

<span class="gp">In [1823]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">eastern</span> <span class="o">+</span> <span class="n">berlin</span>

<span class="gp">In [1824]: </span><span class="n">result</span>

<span class="go">2012-03-06 00:00:00+00:00   -4.378586</span>
<span class="go">2012-03-07 00:00:00+00:00   -3.639011</span>
<span class="go">2012-03-08 00:00:00+00:00    0.459596</span>
<span class="go">2012-03-09 00:00:00+00:00    0.238849</span>
<span class="go">2012-03-10 00:00:00+00:00    3.617932</span>
<span class="go">2012-03-11 00:00:00+00:00    2.031683</span>
<span class="go">2012-03-12 00:00:00+00:00   -3.303568</span>
<span class="go">2012-03-13 00:00:00+00:00    0.695349</span>
<span class="go">2012-03-14 00:00:00+00:00   -1.547376</span>
<span class="go">2012-03-15 00:00:00+00:00    0.851726</span>
<span class="go">2012-03-16 00:00:00+00:00    1.158971</span>
<span class="go">2012-03-17 00:00:00+00:00   -1.490793</span>
<span class="go">2012-03-18 00:00:00+00:00    0.283760</span>
<span class="go">2012-03-19 00:00:00+00:00   -2.155508</span>
<span class="go">2012-03-20 00:00:00+00:00   -2.602348</span>
<span class="go">Freq: D, dtype: float64</span>

<span class="gp">In [1825]: </span><span class="n">result</span><span class="o">.</span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2012-03-06 00:00:00, ..., 2012-03-20 00:00:00]</span>
<span class="go">Length: 15, Freq: D, Timezone: UTC</span>
</pre></div>
</div>
</div>
<div class="section" id="time-deltas">
<span id="timeseries-timedeltas"></span><h2>Time Deltas<a class="headerlink" href="#time-deltas" title="Permalink to this headline">¶</a></h2>
<p>Timedeltas are differences in times, expressed in difference units, e.g. days,hours,minutes,seconds.
They can be both positive and negative.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1826]: </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>

<span class="gp">In [1827]: </span><span class="n">s</span>  <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;2012-1-1&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">))</span>

<span class="gp">In [1828]: </span><span class="n">td</span> <span class="o">=</span> <span class="n">Series</span><span class="p">([</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="p">])</span>

<span class="gp">In [1829]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="n">s</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">td</span><span class="p">))</span>

<span class="gp">In [1830]: </span><span class="n">df</span>

<span class="go">                    A                B</span>
<span class="go">0 2012-01-01 00:00:00         00:00:00</span>
<span class="go">1 2012-01-02 00:00:00 1 days, 00:00:00</span>
<span class="go">2 2012-01-03 00:00:00 2 days, 00:00:00</span>

<span class="gp">In [1831]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">]</span>

<span class="gp">In [1832]: </span><span class="n">df</span>

<span class="go">                    A                B                   C</span>
<span class="go">0 2012-01-01 00:00:00         00:00:00 2012-01-01 00:00:00</span>
<span class="go">1 2012-01-02 00:00:00 1 days, 00:00:00 2012-01-03 00:00:00</span>
<span class="go">2 2012-01-03 00:00:00 2 days, 00:00:00 2012-01-05 00:00:00</span>

<span class="gp">In [1833]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>

<span class="go">A     datetime64[ns]</span>
<span class="go">B    timedelta64[ns]</span>
<span class="go">C     datetime64[ns]</span>
<span class="go">dtype: object</span>

<span class="gp">In [1834]: </span><span class="n">s</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="go">0   -2 days, 00:00:00</span>
<span class="go">1   -1 days, 00:00:00</span>
<span class="go">2            00:00:00</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [1835]: </span><span class="n">s</span> <span class="o">-</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>

<span class="go">0   364 days, 20:55:00</span>
<span class="go">1   365 days, 20:55:00</span>
<span class="go">2   366 days, 20:55:00</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [1836]: </span><span class="n">s</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="go">0   2012-01-01 00:05:00</span>
<span class="go">1   2012-01-02 00:05:00</span>
<span class="go">2   2012-01-03 00:05:00</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
<p>Getting scalar results from a <tt class="docutils literal"><span class="pre">timedelta64[ns]</span></tt> series</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1837]: </span><span class="n">y</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="gp">In [1838]: </span><span class="n">y</span>

<span class="go">0           00:00:00</span>
<span class="go">1   1 days, 00:00:00</span>
<span class="go">2   2 days, 00:00:00</span>
<span class="go">dtype: timedelta64[ns]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">LooseVersion</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="s">&#39;1.6.2&#39;</span><span class="p">:</span>
    <span class="n">y</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">item</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">())</span>
    <span class="n">y</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">item</span><span class="p">()</span><span class="o">.</span><span class="n">days</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">y</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;s&#39;</span><span class="p">))</span>
    <span class="n">y</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">timedelta64</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;D&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As you can see from the conditional statement above, these operations are
different in numpy 1.6.2 and in numpy &gt;= 1.7. The <tt class="docutils literal"><span class="pre">timedelta64[ns]</span></tt> scalar
type in 1.6.2 is much like a <tt class="docutils literal"><span class="pre">datetime.timedelta</span></tt>, while in 1.7 it is a
nanosecond based integer.  A future version of pandas will make this
transparent.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In numpy &gt;= 1.7 dividing a <tt class="docutils literal"><span class="pre">timedelta64</span></tt> array by another <tt class="docutils literal"><span class="pre">timedelta64</span></tt>
array will yield an array with dtype <tt class="docutils literal"><span class="pre">np.float64</span></tt>.</p>
</div>
<p>Series of timedeltas with <tt class="docutils literal"><span class="pre">NaT</span></tt> values are supported</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1839]: </span><span class="n">y</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-</span> <span class="n">s</span><span class="o">.</span><span class="n">shift</span><span class="p">()</span>

<span class="gp">In [1840]: </span><span class="n">y</span>

<span class="go">0                NaT</span>
<span class="go">1   1 days, 00:00:00</span>
<span class="go">2   1 days, 00:00:00</span>
<span class="go">dtype: timedelta64[ns]</span>
</pre></div>
</div>
<p>Elements can be set to <tt class="docutils literal"><span class="pre">NaT</span></tt> using <tt class="docutils literal"><span class="pre">np.nan</span></tt> analagously to datetimes</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1841]: </span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [1842]: </span><span class="n">y</span>

<span class="go">0                NaT</span>
<span class="go">1                NaT</span>
<span class="go">2   1 days, 00:00:00</span>
<span class="go">dtype: timedelta64[ns]</span>
</pre></div>
</div>
<p>Operands can also appear in a reversed order (a singluar object operated with a Series)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1843]: </span><span class="n">s</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">s</span>

<span class="go">0   2 days, 00:00:00</span>
<span class="go">1   1 days, 00:00:00</span>
<span class="go">2           00:00:00</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [1844]: </span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span> <span class="o">-</span> <span class="n">s</span>

<span class="go">0   -364 days, 20:55:00</span>
<span class="go">1   -365 days, 20:55:00</span>
<span class="go">2   -366 days, 20:55:00</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [1845]: </span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">s</span>

<span class="go">0   2012-01-01 00:05:00</span>
<span class="go">1   2012-01-02 00:05:00</span>
<span class="go">2   2012-01-03 00:05:00</span>
<span class="go">dtype: datetime64[ns]</span>
</pre></div>
</div>
<p>Some timedelta numeric like operations are supported.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1846]: </span><span class="n">td</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">microseconds</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="go">0          -00:05:05.000005</span>
<span class="go">1           23:54:54.999995</span>
<span class="go">2   1 days, 23:54:54.999995</span>
<span class="go">dtype: timedelta64[ns]</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">min,</span> <span class="pre">max</span></tt> and the corresponding <tt class="docutils literal"><span class="pre">idxmin,</span> <span class="pre">idxmax</span></tt> operations are supported on frames</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1847]: </span><span class="n">A</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;20120101&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="gp">In [1848]: </span><span class="n">B</span> <span class="o">=</span> <span class="n">s</span> <span class="o">-</span> <span class="n">Series</span><span class="p">(</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;2012-1-2&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">))</span>

<span class="gp">In [1849]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="o">=</span><span class="n">B</span><span class="p">))</span>

<span class="gp">In [1850]: </span><span class="n">df</span>

<span class="go">                 A                 B</span>
<span class="go">0        -00:05:05 -1 days, 00:00:00</span>
<span class="go">1         23:54:55 -1 days, 00:00:00</span>
<span class="go">2 1 days, 23:54:55 -1 days, 00:00:00</span>

<span class="gp">In [1851]: </span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

<span class="go">A           -00:05:05</span>
<span class="go">B   -1 days, 00:00:00</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [1852]: </span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="go">0   -1 days, 00:00:00</span>
<span class="go">1   -1 days, 00:00:00</span>
<span class="go">2   -1 days, 00:00:00</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [1853]: </span><span class="n">df</span><span class="o">.</span><span class="n">idxmin</span><span class="p">()</span>

<span class="go">A    0</span>
<span class="go">B    0</span>
<span class="go">dtype: int64</span>

<span class="gp">In [1854]: </span><span class="n">df</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>

<span class="go">A    2</span>
<span class="go">B    0</span>
<span class="go">dtype: int64</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">min,</span> <span class="pre">max</span></tt> operations are supported on series; these return a single element
<tt class="docutils literal"><span class="pre">timedelta64[ns]</span></tt> Series (this avoids having to deal with numpy timedelta64
issues). <tt class="docutils literal"><span class="pre">idxmin,</span> <span class="pre">idxmax</span></tt> are supported as well.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1855]: </span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="go">0   -00:05:05</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [1856]: </span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

<span class="go">0   -1 days, 00:00:00</span>
<span class="go">dtype: timedelta64[ns]</span>

<span class="gp">In [1857]: </span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
<span class="go">&#39;A&#39;</span>

<span class="gp">In [1858]: </span><span class="n">df</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">idxmin</span><span class="p">()</span>
<span class="go">0</span>
</pre></div>
</div>
</div>
</div>


                    </div>
                </div>
            </div>

            
            <div class="clearer"></div>
        </div>
    </div>
</div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="visualization.html" title="Plotting with matplotlib"
             >next</a> |</li>
        <li class="right" >
          <a href="reshaping.html" title="Reshaping and Pivot Tables"
             >previous</a> |</li>
        <li><a href="index.html">pandas 0.11.1.dev-36c1263 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2012, the pandas development team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>